---
hide_table_of_contents: true
hide_title: true
custom_edit_url: null
---

import CenterLayout from "/src/components/CenterLayout"
import GitHub from "/src/components/GitHub"

<head>
  <link rel="canonical" href="https://github.com/gruntwork-io/knowledge-base/discussions/552" />
</head>

<CenterLayout>
<span className="searchCategory">Knowledge Base</span>
<h1>Suggested workarounds for discovering Terragrunt dependency changes during plans?</h1>
<GitHub discussion={{"id":"D_kwDOF8slf84AQntK","number":552,"author":{"login":"iangrunt"},"title":"Suggested workarounds for discovering Terragrunt dependency changes during plans?","body":"\nIf I have the following configuration, where my Aurora cluster is dependent on my VPC, how can I let the Aurora cluster know during the `plan` phase that it should also be recreated? \r\n\r\n```hcl\r\n# vpc/terragrunt.hcl \r\n\r\nterraform {\r\n  source = \"git@github.com:iangrunt/terraform-fake-modules.git//modules/aws/vpc?ref=v1.0.0\"\r\n}\r\n\r\ninputs = {\r\n  # Old value at the time when we applied:\r\n  #  cidr_block = \"10.111.0.0/16\"\r\n\r\n  # New value that will recreate my VPC:\r\n  cidr_block = \"10.222.0.0/16\"\r\n}\r\n\r\n```\r\n\r\n```hcl\r\n# aurora-postgres/terragrunt.hcl \r\n\r\nterraform {\r\n  source = \"git@github.com:iangrunt/terraform-fake-modules.git//modules/aws/aurora?ref=v1.0.0\"\r\n}\r\n\r\ndependency \"vpc\" {\r\n  config_path = \"../vpc\"\r\n}\r\n\r\ninputs = {\r\n  vpc_id = dependency.vpc.outputs.id\r\n}\r\n```\r\n\r\nWhen I run a `terragrunt run-all plan` I see my VPC being recreated correctly as the `cidr_block` has changed to force that, but I need to let my Aurora cluster know it will also be recreated:\r\n\r\n<img width=\"1025\" alt=\"Screen Shot 2022-09-02 at 12 46 34 PM\" src=\"https://user-images.githubusercontent.com/101607944/188202083-713409b3-645e-4872-9c01-b9743064c419.png\">\r\n\n\n---\n\n<ins datetime=\"2022-09-02T16:55:32Z\">\n  <p><a href=\"https://support.gruntwork.io/hc/requests/109200\">Tracked in ticket #109200</a></p>\n</ins>\n","bodyHTML":"<p dir=\"auto\">If I have the following configuration, where my Aurora cluster is dependent on my VPC, how can I let the Aurora cluster know during the <code class=\"notranslate\">plan</code> phase that it should also be recreated?</p>\n<div class=\"highlight highlight-source-terraform notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"# vpc/terragrunt.hcl \n\nterraform {\n  source = &quot;git@github.com:iangrunt/terraform-fake-modules.git//modules/aws/vpc?ref=v1.0.0&quot;\n}\n\ninputs = {\n  # Old value at the time when we applied:\n  #  cidr_block = &quot;10.111.0.0/16&quot;\n\n  # New value that will recreate my VPC:\n  cidr_block = &quot;10.222.0.0/16&quot;\n}\n\"><pre><span class=\"pl-c\"><span class=\"pl-c\">#</span> vpc/terragrunt.hcl </span>\n\n<span class=\"pl-k\">terraform</span> {\n  source <span class=\"pl-k\">=</span> <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>git@github.com:iangrunt/terraform-fake-modules.git//modules/aws/vpc?ref=v1.0.0<span class=\"pl-pds\">\"</span></span>\n}\n\n<span class=\"pl-v\"><span class=\"pl-smi\">inputs</span> <span class=\"pl-k\">= </span></span>{\n  <span class=\"pl-c\"><span class=\"pl-c\">#</span> Old value at the time when we applied:</span>\n  <span class=\"pl-c\"><span class=\"pl-c\">#</span>  cidr_block = \"10.111.0.0/16\"</span>\n\n  <span class=\"pl-c\"><span class=\"pl-c\">#</span> New value that will recreate my VPC:</span>\n  cidr_block <span class=\"pl-k\">=</span> <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>10.222.0.0/16<span class=\"pl-pds\">\"</span></span>\n}\n</pre></div>\n<div class=\"highlight highlight-source-terraform notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"# aurora-postgres/terragrunt.hcl \n\nterraform {\n  source = &quot;git@github.com:iangrunt/terraform-fake-modules.git//modules/aws/aurora?ref=v1.0.0&quot;\n}\n\ndependency &quot;vpc&quot; {\n  config_path = &quot;../vpc&quot;\n}\n\ninputs = {\n  vpc_id = dependency.vpc.outputs.id\n}\"><pre><span class=\"pl-c\"><span class=\"pl-c\">#</span> aurora-postgres/terragrunt.hcl </span>\n\n<span class=\"pl-k\">terraform</span> {\n  source <span class=\"pl-k\">=</span> <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>git@github.com:iangrunt/terraform-fake-modules.git//modules/aws/aurora?ref=v1.0.0<span class=\"pl-pds\">\"</span></span>\n}\n\n<span class=\"pl-en\">dependency</span> <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>vpc<span class=\"pl-pds\">\"</span></span> {\n  config_path <span class=\"pl-k\">=</span> <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>../vpc<span class=\"pl-pds\">\"</span></span>\n}\n\n<span class=\"pl-v\"><span class=\"pl-smi\">inputs</span> <span class=\"pl-k\">= </span></span>{\n  vpc_id <span class=\"pl-k\">=</span> dependency<span class=\"pl-k\">.</span><span class=\"pl-smi\">vpc</span><span class=\"pl-k\">.</span><span class=\"pl-smi\">outputs</span><span class=\"pl-k\">.</span><span class=\"pl-smi\">id</span>\n}</pre></div>\n<p dir=\"auto\">When I run a <code class=\"notranslate\">terragrunt run-all plan</code> I see my VPC being recreated correctly as the <code class=\"notranslate\">cidr_block</code> has changed to force that, but I need to let my Aurora cluster know it will also be recreated:</p>\n<p dir=\"auto\"><a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://user-images.githubusercontent.com/101607944/188202083-713409b3-645e-4872-9c01-b9743064c419.png\"><img width=\"1025\" alt=\"Screen Shot 2022-09-02 at 12 46 34 PM\" src=\"https://user-images.githubusercontent.com/101607944/188202083-713409b3-645e-4872-9c01-b9743064c419.png\" style=\"max-width: 100%;\"></a></p>\n<hr>\n<ins datetime=\"2022-09-02T16:55:32Z\">\n  <p dir=\"auto\"><a href=\"https://support.gruntwork.io/hc/requests/109200\" rel=\"nofollow\">Tracked in ticket #109200</a></p>\n</ins>","answer":{"body":"This is unfortunately a known limitation of `run-all plan` where there is no clear workaround we have implemented yet. This specific issue and suggested alternative workflows are documented in the associated warning for `run-all plan` in [the documentation](https://terragrunt.gruntwork.io/docs/reference/cli-options/#run-all).","bodyHTML":"<p dir=\"auto\">This is unfortunately a known limitation of <code class=\"notranslate\">run-all plan</code> where there is no clear workaround we have implemented yet. This specific issue and suggested alternative workflows are documented in the associated warning for <code class=\"notranslate\">run-all plan</code> in <a href=\"https://terragrunt.gruntwork.io/docs/reference/cli-options/#run-all\" rel=\"nofollow\">the documentation</a>.</p>"}}} />

</CenterLayout>
  

<!-- ##DOCS-SOURCER-START
{
  "sourcePlugin": "github-discussions",
  "hash": "bb0b8787aa202f6f84a5e68f603af63d"
}
##DOCS-SOURCER-END -->
