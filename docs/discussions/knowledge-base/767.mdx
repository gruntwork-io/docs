---
hide_table_of_contents: true
hide_title: true
custom_edit_url: null
---

import CenterLayout from "/src/components/CenterLayout"
import GitHub from "/src/components/GitHub"

<head>
  <link rel="canonical" href="https://github.com/gruntwork-io/knowledge-base/discussions/767" />
</head>

<CenterLayout>
<span className="searchCategory">Knowledge Base</span>
<h1>Help with reproducing errors in `infrastructure-deployer`</h1>
<GitHub discussion={{"id":"D_kwDOF8slf84AVeX4","number":767,"author":{"login":"vicyap"},"title":"Help with reproducing errors in `infrastructure-deployer`","body":"\r\nI am having an issue reproducing an error when I run `infrastructure-deployer`. It fails when it runs `terragrunt plan-all`. I am able to run the same `terragrunt` command from my local machine without an issue.\r\n\r\nI am asking for help on how I can best debug this issue. Any ideas would be greatly appreciated!\r\n\r\n---\r\n\r\n**Context**:\r\n\r\n* Our infrastructure live code is nested under `infrastructure-live/`.\r\n* We have a `_envcommon/services/rabbitmq.hcl` file which is used in 4 modules under `infrastructure-live/prod/us-west-2/prod/services/{rabbitmq,rabbitmq-3-11,internal-rabbitmq,internal-rabbitmq-3-11}`\r\n\r\n**Issue**:\r\n\r\nOur CI calls this command:\r\n\r\n```\r\ninfrastructure-deployer --aws-region us-west-2 -- terraform-planner infrastructure-deploy-script --ref f7085fa21f2640e7389801e1caa8e785c672c78e --binary terragrunt --command plan-all --command-args --terragrunt-modules-that-include=../_envcommon/services/rabbitmq.hcl --deploy-path infrastructure-live/prod/ --repo xxx --force-https true\r\n```\r\n\r\nWhich then calls this command:\r\n\r\n```\r\nterragrunt plan-all --terragrunt-non-interactive -input=false --terragrunt-modules-that-include=../_envcommon/services/rabbitmq.hcl\r\n```\r\n\r\nHere is the output from CI:\r\n```\r\nRunning infrastructure-deployer with args: --aws-region us-west-2 -- terraform-planner infrastructure-deploy-script --ref f7085fa21f2640e7389801e1caa8e785c672c78e --binary terragrunt --command plan-all --command-args --terragrunt-modules-that-include=../_envcommon/services/rabbitmq.hcl --deploy-path infrastructure-live/prod/ --repo xxx --force-https true\r\n[infrastructure-deployer] INFO[2023-09-14T23:26:11Z] Invoking Lambda function ecs-deploy-runner-invoker to trigger deployment.\r\n[infrastructure-deployer] INFO[2023-09-14T23:26:12Z] Successfully invoked Lambda function ecs-deploy-runner-invoker to trigger deployment.\r\n[infrastructure-deployer] INFO[2023-09-14T23:26:12Z] Waiting for ECS task arn:aws:ecs:xxx to start\r\n[infrastructure-deployer] INFO[2023-09-14T23:26:53Z] Deployment ECS Task arn:aws:ecs:xxx has started. Streaming logs.\r\nUpdating files: 100% (8923/8923), done.+0000] Updating files:  19% (1742/8923)\r\n[ecs-deploy-runner][2023-09-14T23:27:33+0000] [INFO] [infrastructure-deploy-script] 2023-09-14 23:27:33  Successfully cloned xxx to directory /tmp/tmp4802kcvv\r\n[ecs-deploy-runner][2023-09-14T23:27:33+0000] [INFO] [infrastructure-deploy-script] 2023-09-14 23:27:33  Checking out f7085fa21f2640e7389801e1caa8e785c672c78e\r\n[ecs-deploy-runner][2023-09-14T23:27:33+0000] [INFO] [infrastructure-deploy-script] 2023-09-14 23:27:33  Running command \"git checkout f7085fa21f2640e7389801e1caa8e785c672c78e\"\r\n[ecs-deploy-runner][2023-09-14T23:27:35+0000] Note: switching to 'f7085fa21f2640e7389801e1caa8e785c672c78e'.\r\n[ecs-deploy-runner][2023-09-14T23:27:35+0000] You are in 'detached HEAD' state. You can look around, make experimental\r\n[ecs-deploy-runner][2023-09-14T23:27:35+0000] changes and commit them, and you can discard any commits you make in this\r\n[ecs-deploy-runner][2023-09-14T23:27:35+0000] state without impacting any branches by switching back to a branch.\r\n[ecs-deploy-runner][2023-09-14T23:27:35+0000] If you want to create a new branch to retain commits you create, you may\r\n[ecs-deploy-runner][2023-09-14T23:27:35+0000] do so (now or later) by using -c with the switch command. Example:\r\n[ecs-deploy-runner][2023-09-14T23:27:35+0000]   git switch -c <new-branch-name>\r\n[ecs-deploy-runner][2023-09-14T23:27:35+0000] Or undo this operation with:\r\n[ecs-deploy-runner][2023-09-14T23:27:35+0000]   git switch -\r\n[ecs-deploy-runner][2023-09-14T23:27:35+0000] Turn off this advice by setting config variable advice.detachedHead to false\r\n[ecs-deploy-runner][2023-09-14T23:27:35+0000] HEAD is now at f7085fa21 Revert more changes\r\n[ecs-deploy-runner][2023-09-14T23:27:35+0000] [INFO] [infrastructure-deploy-script] 2023-09-14 23:27:35  Successfully checked out f7085fa21f2640e7389801e1caa8e785c672c78e\r\n[ecs-deploy-runner][2023-09-14T23:27:35+0000] [INFO] [infrastructure-deploy-script] 2023-09-14 23:27:35  Checking out f7085fa21f2640e7389801e1caa8e785c672c78e\r\n[ecs-deploy-runner][2023-09-14T23:27:35+0000] [INFO] [infrastructure-deploy-script] 2023-09-14 23:27:35  Running command \"git checkout f7085fa21f2640e7389801e1caa8e785c672c78e\"\r\n[ecs-deploy-runner][2023-09-14T23:27:35+0000] HEAD is now at f7085fa21 Revert more changes\r\n[ecs-deploy-runner][2023-09-14T23:27:35+0000] [INFO] [infrastructure-deploy-script] 2023-09-14 23:27:35  Successfully checked out f7085fa21f2640e7389801e1caa8e785c672c78e\r\n[ecs-deploy-runner][2023-09-14T23:27:35+0000] [INFO] [infrastructure-deploy-script] 2023-09-14 23:27:35  Running command \"terragrunt plan-all --terragrunt-non-interactive -input=false --terragrunt-modules-that-include=../_envcommon/services/rabbitmq.hcl\"\r\n[ecs-deploy-runner][2023-09-14T23:27:35+0000] time=2023-09-14T23:27:35Z level=warning msg='plan-all' is deprecated. Running 'terragrunt run-all plan -input=false' instead. Please update your workflows to use 'terragrunt run-all plan -input=false', as 'plan-all' may be removed in the future!\r\n[ecs-deploy-runner][2023-09-14T23:28:00+0000] time=2023-09-14T23:28:00Z level=info msg=The stack at /tmp/tmp4802kcvv/infrastructure-live/prod will be processed in the following order for command plan:\r\n[ecs-deploy-runner][2023-09-14T23:28:00+0000] Group 1\r\n[ecs-deploy-runner][2023-09-14T23:28:00+0000] - Module /tmp/tmp4802kcvv/infrastructure-live/prod/us-west-2/prod/services/rabbitmq\r\n[ecs-deploy-runner][2023-09-14T23:28:00+0000] - Module /tmp/tmp4802kcvv/infrastructure-live/prod/us-west-2/prod/services/rabbitmq-3-11\r\n[ecs-deploy-runner][2023-09-14T23:28:00+0000] - Module /tmp/tmp4802kcvv/infrastructure-live/prod/us-west-2/prod/services/internal-rabbitmq\r\n[ecs-deploy-runner][2023-09-14T23:28:00+0000] - Module /tmp/tmp4802kcvv/infrastructure-live/prod/us-west-2/prod/services/internal-rabbitmq-3-11\r\n[ecs-deploy-runner][2023-09-14T23:28:03+0000] time=2023-09-14T23:28:03Z level=error msg=Module /tmp/tmp4802kcvv/infrastructure-live/prod/us-west-2/prod/services/internal-rabbitmq has finished with an error: [/tmp/tmp4802kcvv/infrastructure-live/prod/us-west-2/prod/services/internal-rabbitmq] exit status 126 prefix=[/tmp/tmp4802kcvv/infrastructure-live/prod/us-west-2/prod/services/internal-rabbitmq]\r\n[ecs-deploy-runner][2023-09-14T23:28:03+0000] time=2023-09-14T23:28:03Z level=error msg=Module /tmp/tmp4802kcvv/infrastructure-live/prod/us-west-2/prod/services/internal-rabbitmq-3-11 has finished with an error: [/tmp/tmp4802kcvv/infrastructure-live/prod/us-west-2/prod/services/internal-rabbitmq-3-11] exit status 126 prefix=[/tmp/tmp4802kcvv/infrastructure-live/prod/us-west-2/prod/services/internal-rabbitmq-3-11]\r\n[ecs-deploy-runner][2023-09-14T23:28:03+0000] time=2023-09-14T23:28:03Z level=error msg=Module /tmp/tmp4802kcvv/infrastructure-live/prod/us-west-2/prod/services/rabbitmq-3-11 has finished with an error: [/tmp/tmp4802kcvv/infrastructure-live/prod/us-west-2/prod/services/rabbitmq-3-11] exit status 126 prefix=[/tmp/tmp4802kcvv/infrastructure-live/prod/us-west-2/prod/services/rabbitmq-3-11]\r\n[ecs-deploy-runner][2023-09-14T23:28:18+0000] Initializing modules...\r\n[ecs-deploy-runner][2023-09-14T23:28:19+0000] Downloading terraform-aws-modules/security-group/aws 4.17.2 for rmq_sg...\r\n[ecs-deploy-runner][2023-09-14T23:28:19+0000] - rmq_sg in .terraform/modules/rmq_sg\r\n[ecs-deploy-runner][2023-09-14T23:28:19+0000] Initializing the backend...\r\n[ecs-deploy-runner][2023-09-14T23:28:20+0000]\r\n[ecs-deploy-runner][2023-09-14T23:28:20+0000] Successfully configured the backend \"s3\"! Terraform will automatically\r\n[ecs-deploy-runner][2023-09-14T23:28:20+0000] use this backend unless the backend configuration changes.\r\n[ecs-deploy-runner][2023-09-14T23:28:20+0000] Initializing provider plugins...\r\n[ecs-deploy-runner][2023-09-14T23:28:20+0000] - Finding hashicorp/aws versions matching \">= 3.29.0, > 3.75.1, < 5.0.0\"...\r\n[ecs-deploy-runner][2023-09-14T23:28:20+0000] - Finding latest version of hashicorp/random...\r\n[ecs-deploy-runner][2023-09-14T23:28:20+0000] - Installing hashicorp/aws v4.67.0...\r\n[ecs-deploy-runner][2023-09-14T23:28:23+0000] - Installed hashicorp/aws v4.67.0 (signed by HashiCorp)\r\n[ecs-deploy-runner][2023-09-14T23:28:23+0000] - Installing hashicorp/random v3.5.1...\r\n[ecs-deploy-runner][2023-09-14T23:28:24+0000] - Installed hashicorp/random v3.5.1 (signed by HashiCorp)\r\n[ecs-deploy-runner][2023-09-14T23:28:24+0000] Terraform has created a lock file .terraform.lock.hcl to record the provider\r\n[ecs-deploy-runner][2023-09-14T23:28:24+0000] selections it made above. Include this file in your version control repository\r\n[ecs-deploy-runner][2023-09-14T23:28:24+0000] so that Terraform can guarantee to make the same selections by default when\r\n[ecs-deploy-runner][2023-09-14T23:28:24+0000] you run \"terraform init\" in the future.\r\n[ecs-deploy-runner][2023-09-14T23:28:24+0000] Terraform has been successfully initialized!\r\n[ecs-deploy-runner][2023-09-14T23:28:24+0000]\r\n[ecs-deploy-runner][2023-09-14T23:28:24+0000] You may now begin working with Terraform. Try running \"terraform plan\" to see\r\n[ecs-deploy-runner][2023-09-14T23:28:24+0000] any changes that are required for your infrastructure. All Terraform commands\r\n[ecs-deploy-runner][2023-09-14T23:28:24+0000] should now work.\r\n[ecs-deploy-runner][2023-09-14T23:28:24+0000] If you ever set or change modules or backend configuration for Terraform,\r\n[ecs-deploy-runner][2023-09-14T23:28:24+0000] rerun this command to reinitialize your working directory. If you forget, other\r\n[ecs-deploy-runner][2023-09-14T23:28:24+0000] commands will detect it and remind you to do so if necessary.\r\n[ecs-deploy-runner][2023-09-14T23:28:28+0000] random_password.password: Refreshing state... [id=none]\r\n[ecs-deploy-runner][2023-09-14T23:28:28+0000] random_uuid.id: Refreshing state... [id=xxx]\r\n[ecs-deploy-runner][2023-09-14T23:28:28+0000] random_pet.username: Refreshing state... [id=oxxx]\r\n[ecs-deploy-runner][2023-09-14T23:28:28+0000] aws_secretsmanager_secret.username[0]: Refreshing state... [id=xxx]\r\n[ecs-deploy-runner][2023-09-14T23:28:28+0000] aws_secretsmanager_secret.password[0]: Refreshing state... [id=xxx]\r\n[ecs-deploy-runner][2023-09-14T23:28:28+0000] aws_secretsmanager_secret_version.password[0]: Refreshing state... [id=xxx]\r\n[ecs-deploy-runner][2023-09-14T23:28:28+0000] aws_secretsmanager_secret_version.username[0]: Refreshing state... [id=xxx]\r\n[ecs-deploy-runner][2023-09-14T23:28:28+0000] module.rmq_sg.aws_security_group.this_name_prefix[0]: Refreshing state... [id=xxx]\r\n[ecs-deploy-runner][2023-09-14T23:28:29+0000] aws_mq_broker.rmq: Refreshing state... [id=xxx]\r\n[ecs-deploy-runner][2023-09-14T23:28:29+0000] module.rmq_sg.aws_security_group_rule.ingress_with_self[0]: Refreshing state... [id=xxx]\r\n[ecs-deploy-runner][2023-09-14T23:28:29+0000] module.rmq_sg.aws_security_group_rule.ingress_with_source_security_group_id[0]: Refreshing state... [id=xxx]\r\n[ecs-deploy-runner][2023-09-14T23:28:29+0000] module.rmq_sg.aws_security_group_rule.ingress_with_cidr_blocks[1]: Refreshing state... [id=xxx]\r\n[ecs-deploy-runner][2023-09-14T23:28:29+0000] module.rmq_sg.aws_security_group_rule.ingress_with_source_security_group_id[1]: Refreshing state... [id=xxx]\r\n[ecs-deploy-runner][2023-09-14T23:28:29+0000] module.rmq_sg.aws_security_group_rule.ingress_with_cidr_blocks[0]: Refreshing state... [id=xxx]\r\n[ecs-deploy-runner][2023-09-14T23:28:29+0000] module.rmq_sg.aws_security_group_rule.ingress_with_source_security_group_id[2]: Refreshing state... [id=xxx]\r\n[ecs-deploy-runner][2023-09-14T23:28:29+0000] module.rmq_sg.aws_security_group_rule.ingress_with_cidr_blocks[2]: Refreshing state... [id=xxx]\r\n[ecs-deploy-runner][2023-09-14T23:28:29+0000] No changes. Your infrastructure matches the configuration.\r\n[ecs-deploy-runner][2023-09-14T23:28:29+0000] Terraform has compared your real infrastructure against your configuration\r\n[ecs-deploy-runner][2023-09-14T23:28:29+0000] and found no differences, so no changes are needed.\r\n[ecs-deploy-runner][2023-09-14T23:28:29+0000] time=2023-09-14T23:28:29Z level=error msg=3 errors occurred:\r\n[ecs-deploy-runner][2023-09-14T23:28:29+0000] \t* [/tmp/tmp4802kcvv/infrastructure-live/prod/us-west-2/prod/services/rabbitmq-3-11] exit status 126\r\n[ecs-deploy-runner][2023-09-14T23:28:29+0000] \t* [/tmp/tmp4802kcvv/infrastructure-live/prod/us-west-2/prod/services/internal-rabbitmq] exit status 126\r\n[ecs-deploy-runner][2023-09-14T23:28:29+0000] \t* [/tmp/tmp4802kcvv/infrastructure-live/prod/us-west-2/prod/services/internal-rabbitmq-3-11] exit status 126\r\n[ecs-deploy-runner][2023-09-14T23:28:29+0000] [INFO] [infrastructure-deploy-script] 2023-09-14 23:28:29  \"terragrunt plan-all\" exited with code 126\r\n[ecs-deploy-runner][2023-09-14T23:28:29+0000] Error: Could not run \"terragrunt plan-all\". Error=time=2023-09-14T23:27:35Z level=warning msg='plan-all' is deprecated. Running 'terragrunt run-all plan -input=false' instead. Please update your workflows to use 'terragrunt run-all plan -input=false', as 'plan-all' may be removed in the future!\r\n[ecs-deploy-runner][2023-09-14T23:28:29+0000] time=2023-09-14T23:28:00Z level=info msg=The stack at /tmp/tmp4802kcvv/infrastructure-live/prod will be processed in the following order for command plan:\r\n[ecs-deploy-runner][2023-09-14T23:28:29+0000] Group 1\r\n[ecs-deploy-runner][2023-09-14T23:28:29+0000] - Module /tmp/tmp4802kcvv/infrastructure-live/prod/us-west-2/prod/services/rabbitmq\r\n[ecs-deploy-runner][2023-09-14T23:28:29+0000] - Module /tmp/tmp4802kcvv/infrastructure-live/prod/us-west-2/prod/services/rabbitmq-3-11\r\n[ecs-deploy-runner][2023-09-14T23:28:29+0000] - Module /tmp/tmp4802kcvv/infrastructure-live/prod/us-west-2/prod/services/internal-rabbitmq\r\n[ecs-deploy-runner][2023-09-14T23:28:29+0000] - Module /tmp/tmp4802kcvv/infrastructure-live/prod/us-west-2/prod/services/internal-rabbitmq-3-11\r\n[ecs-deploy-runner][2023-09-14T23:28:29+0000] time=2023-09-14T23:28:03Z level=error msg=Module /tmp/tmp4802kcvv/infrastructure-live/prod/us-west-2/prod/services/internal-rabbitmq has finished with an error: [/tmp/tmp4802kcvv/infrastructure-live/prod/us-west-2/prod/services/internal-rabbitmq] exit status 126 prefix=[/tmp/tmp4802kcvv/infrastructure-live/prod/us-west-2/prod/services/internal-rabbitmq]\r\n[ecs-deploy-runner][2023-09-14T23:28:29+0000] time=2023-09-14T23:28:03Z level=error msg=Module /tmp/tmp4802kcvv/infrastructure-live/prod/us-west-2/prod/services/internal-rabbitmq-3-11 has finished with an error: [/tmp/tmp4802kcvv/infrastructure-live/prod/us-west-2/prod/services/internal-rabbitmq-3-11] exit status 126 prefix=[/tmp/tmp4802kcvv/infrastructure-live/prod/us-west-2/prod/services/internal-rabbitmq-3-11]\r\n[ecs-deploy-runner][2023-09-14T23:28:29+0000] time=2023-09-14T23:28:03Z level=error msg=Module /tmp/tmp4802kcvv/infrastructure-live/prod/us-west-2/prod/services/rabbitmq-3-11 has finished with an error: [/tmp/tmp4802kcvv/infrastructure-live/prod/us-west-2/prod/services/rabbitmq-3-11] exit status 126 prefix=[/tmp/tmp4802kcvv/infrastructure-live/prod/us-west-2/prod/services/rabbitmq-3-11]\r\n[ecs-deploy-runner][2023-09-14T23:28:29+0000] time=2023-09-14T23:28:29Z level=error msg=3 errors occurred:\r\n[ecs-deploy-runner][2023-09-14T23:28:29+0000] \t* [/tmp/tmp4802kcvv/infrastructure-live/prod/us-west-2/prod/services/rabbitmq-3-11] exit status 126\r\n[ecs-deploy-runner][2023-09-14T23:28:29+0000] \t* [/tmp/tmp4802kcvv/infrastructure-live/prod/us-west-2/prod/services/internal-rabbitmq] exit status 126\r\n[ecs-deploy-runner][2023-09-14T23:28:29+0000] \t* [/tmp/tmp4802kcvv/infrastructure-live/prod/us-west-2/prod/services/internal-rabbitmq-3-11] exit status 126\r\n[ecs-deploy-runner][2023-09-14T23:28:29+0000] exit status 1\r\n[ecs-deploy-runner][2023-09-14T23:28:29+0000] time=\"2023-09-14T23:28:29Z\" level=error msg=\"exit status 1\" binary=deploy-runner-entrypoint version=latest\r\nERROR: Deployment failed\r\n/usr/bin/xargs: bash: exited with status 255; aborting\r\n```\r\n\r\nHere is the output of the `terragrunt plan-all` command when I run it locally:\r\n\r\n```\r\nterragrunt plan-all --terragrunt-non-interactive -input=false --terragrunt-modules-that-include=../_envcommon/services/rabbitmq.hcl\r\nWARN[0000] 'plan-all' is deprecated. Running 'terragrunt run-all plan -input=false' instead. Please update your workflows to use 'terragrunt run-all plan -input=false', as 'plan-all' may be removed in the future!\r\nINFO[0007] The stack at /xxx/infrastructure-live/prod will be processed in the following order for command plan:\r\nGroup 1\r\n- Module /xxx/infrastructure-live/prod/us-west-2/prod/services/rabbitmq\r\n- Module /xxx/infrastructure-live/prod/us-west-2/prod/services/rabbitmq-3-11\r\n- Module /xxx/infrastructure-live/prod/us-west-2/prod/services/internal-rabbitmq\r\n- Module /xxx/infrastructure-live/prod/us-west-2/prod/services/internal-rabbitmq-3-11\r\n\r\nrandom_password.password: Refreshing state... [id=none]\r\nrandom_uuid.id: Refreshing state... [id=xxx]\r\nrandom_pet.username: Refreshing state... [id=xxx]\r\nrandom_pet.username: Refreshing state... [id=xxx]\r\nrandom_password.password: Refreshing state... [id=none]\r\nrandom_uuid.id: Refreshing state... [id=xxx]\r\nrandom_password.password: Refreshing state... [id=none]\r\nrandom_uuid.id: Refreshing state... [id=xxx]\r\nrandom_pet.username: Refreshing state... [id=xxx]\r\nrandom_uuid.id: Refreshing state... [id=xxx]\r\nrandom_pet.username: Refreshing state... [id=xxx]\r\nrandom_password.password: Refreshing state... [id=none]\r\naws_secretsmanager_secret.password[0]: Refreshing state... [id=xxx]\r\naws_secretsmanager_secret.username[0]: Refreshing state... [id=xxx]\r\naws_secretsmanager_secret.username[0]: Refreshing state... [id=xxx]\r\naws_secretsmanager_secret.username[0]: Refreshing state... [id=xxx]\r\naws_secretsmanager_secret.password[0]: Refreshing state... [id=axxx]\r\naws_secretsmanager_secret.password[0]: Refreshing state... [id=xxx]\r\naws_secretsmanager_secret.username[0]: Refreshing state... [id=xxx]\r\naws_secretsmanager_secret.password[0]: Refreshing state... [id=xxx]\r\naws_secretsmanager_secret_version.username[0]: Refreshing state... [id=xxx]\r\naws_secretsmanager_secret_version.password[0]: Refreshing state... [id=xxx]\r\naws_secretsmanager_secret_version.password[0]: Refreshing state... [id=xxx]\r\naws_secretsmanager_secret_version.username[0]: Refreshing state... [id=xxx]\r\naws_secretsmanager_secret_version.password[0]: Refreshing state... [id=xxx]\r\naws_secretsmanager_secret_version.username[0]: Refreshing state... [id=xxx]\r\naws_secretsmanager_secret_version.username[0]: Refreshing state... [id=xxx]\r\nmodule.rmq_sg.aws_security_group.this_name_prefix[0]: Refreshing state... [id=xxx]\r\nmodule.rmq_sg.aws_security_group.this_name_prefix[0]: Refreshing state... [id=xxx]\r\naws_secretsmanager_secret_version.password[0]: Refreshing state... [id=xxx]\r\nmodule.rmq_sg.aws_security_group.this_name_prefix[0]: Refreshing state... [id=xxx]\r\nmodule.rmq_sg.aws_security_group.this_name_prefix[0]: Refreshing state... [id=xxx]\r\nmodule.rmq_sg.aws_security_group_rule.ingress_with_self[0]: Refreshing state... [id=xxx]\r\nmodule.rmq_sg.aws_security_group_rule.ingress_with_cidr_blocks[0]: Refreshing state... [id=xxx]\r\nmodule.rmq_sg.aws_security_group_rule.ingress_with_cidr_blocks[1]: Refreshing state... [id=xxx]\r\nmodule.rmq_sg.aws_security_group_rule.ingress_with_cidr_blocks[2]: Refreshing state... [id=xxx]\r\naws_mq_broker.rmq: Refreshing state... [id=xxx]\r\nmodule.rmq_sg.aws_security_group_rule.ingress_with_source_security_group_id[0]: Refreshing state... [id=xxx]\r\nmodule.rmq_sg.aws_security_group_rule.ingress_with_source_security_group_id[2]: Refreshing state... [id=xxx]\r\nmodule.rmq_sg.aws_security_group_rule.ingress_with_source_security_group_id[1]: Refreshing state... [id=xxx]\r\nmodule.rmq_sg.aws_security_group_rule.ingress_with_source_security_group_id[2]: Refreshing state... [id=xxx]\r\naws_mq_broker.rmq: Refreshing state... [id=xxx]\r\nmodule.rmq_sg.aws_security_group_rule.ingress_with_source_security_group_id[0]: Refreshing state... [id=xxx]\r\nmodule.rmq_sg.aws_security_group_rule.ingress_with_self[0]: Refreshing state... [id=xxx]\r\nmodule.rmq_sg.aws_security_group_rule.ingress_with_source_security_group_id[1]: Refreshing state... [id=xxx]\r\nmodule.rmq_sg.aws_security_group_rule.ingress_with_cidr_blocks[0]: Refreshing state... [id=xxx]\r\nmodule.rmq_sg.aws_security_group_rule.ingress_with_cidr_blocks[2]: Refreshing state... [id=xxx]\r\nmodule.rmq_sg.aws_security_group_rule.ingress_with_cidr_blocks[1]: Refreshing state... [id=xxx]\r\nmodule.rmq_sg.aws_security_group_rule.ingress_with_cidr_blocks[1]: Refreshing state... [id=xxx]\r\nmodule.rmq_sg.aws_security_group_rule.ingress_with_source_security_group_id[0]: Refreshing state... [id=xxx]\r\nmodule.rmq_sg.aws_security_group_rule.ingress_with_source_security_group_id[2]: Refreshing state... [id=xxx]\r\naws_mq_broker.rmq: Refreshing state... [id=xxx]\r\nmodule.rmq_sg.aws_security_group_rule.ingress_with_cidr_blocks[0]: Refreshing state... [id=sxxx]\r\nmodule.rmq_sg.aws_security_group_rule.ingress_with_cidr_blocks[2]: Refreshing state... [id=xxx]\r\nmodule.rmq_sg.aws_security_group_rule.ingress_with_cidr_blocks[2]: Refreshing state... [id=xxx]\r\nmodule.rmq_sg.aws_security_group_rule.ingress_with_source_security_group_id[2]: Refreshing state... [id=xxx]\r\nmodule.rmq_sg.aws_security_group_rule.ingress_with_source_security_group_id[1]: Refreshing state... [id=xxx]\r\nmodule.rmq_sg.aws_security_group_rule.ingress_with_source_security_group_id[0]: Refreshing state... [id=xxx]\r\nmodule.rmq_sg.aws_security_group_rule.ingress_with_source_security_group_id[1]: Refreshing state... [id=xxx]\r\naws_mq_broker.rmq: Refreshing state... [id=xxx]\r\nmodule.rmq_sg.aws_security_group_rule.ingress_with_cidr_blocks[1]: Refreshing state... [id=xxx]\r\nmodule.rmq_sg.aws_security_group_rule.ingress_with_self[0]: Refreshing state... [id=xxx]\r\nmodule.rmq_sg.aws_security_group_rule.ingress_with_cidr_blocks[0]: Refreshing state... [id=xxx]\r\nmodule.rmq_sg.aws_security_group_rule.ingress_with_self[0]: Refreshing state... [id=xxx]\r\n\r\nNo changes. Your infrastructure matches the configuration.\r\n\r\nTerraform has compared your real infrastructure against your configuration\r\nand found no differences, so no changes are needed.\r\n\r\nNo changes. Your infrastructure matches the configuration.\r\n\r\nTerraform has compared your real infrastructure against your configuration\r\nand found no differences, so no changes are needed.\r\n\r\nNo changes. Your infrastructure matches the configuration.\r\n\r\nTerraform has compared your real infrastructure against your configuration\r\nand found no differences, so no changes are needed.\r\n\r\nNo changes. Your infrastructure matches the configuration.\r\n\r\nTerraform has compared your real infrastructure against your configuration\r\nand found no differences, so no changes are needed.\r\nReleasing state lock. This may take a few moments...\r\nReleasing state lock. This may take a few moments...\r\nReleasing state lock. This may take a few moments...\r\nReleasing state lock. This may take a few moments...\r\n```\r\n\r\n---\r\n\r\n`terragrunt_version=v0.50.16`\r\n\r\nThe `gruntwork_installer` installs the following versions:\r\n* GRUNTWORK_INSTALLER_VERSION: v0.0.38\r\n* MODULE_CI_VERSION: v0.41.1\r\n* MODULE_SECURITY_VERSION: v0.61.0\r\n  \r\nThe `ecs-deploy-runner` container has the following versions:\r\n* module_ci_tag=v0.52.14\r\n* tfenv_version=v3.0.0\r\n* terraform_version=1.5.5\r\n* terragrunt_version=v0.50.16\r\n* packer_version=1.7.4\r\n* hcl2json_version=v0.5.0\r\n\r\n---\r\n\r\n<ins datetime=\"2023-09-15T00:18:49Z\">\r\n  <p><a href=\"https://support.gruntwork.io/hc/requests/110445\">Tracked in ticket #110445</a></p>\r\n</ins>\r\n","bodyHTML":"<p dir=\"auto\">I am having an issue reproducing an error when I run <code class=\"notranslate\">infrastructure-deployer</code>. It fails when it runs <code class=\"notranslate\">terragrunt plan-all</code>. I am able to run the same <code class=\"notranslate\">terragrunt</code> command from my local machine without an issue.</p>\n<p dir=\"auto\">I am asking for help on how I can best debug this issue. Any ideas would be greatly appreciated!</p>\n<hr>\n<p dir=\"auto\"><strong>Context</strong>:</p>\n<ul dir=\"auto\">\n<li>Our infrastructure live code is nested under <code class=\"notranslate\">infrastructure-live/</code>.</li>\n<li>We have a <code class=\"notranslate\">_envcommon/services/rabbitmq.hcl</code> file which is used in 4 modules under <code class=\"notranslate\">infrastructure-live/prod/us-west-2/prod/services/{rabbitmq,rabbitmq-3-11,internal-rabbitmq,internal-rabbitmq-3-11}</code></li>\n</ul>\n<p dir=\"auto\"><strong>Issue</strong>:</p>\n<p dir=\"auto\">Our CI calls this command:</p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"infrastructure-deployer --aws-region us-west-2 -- terraform-planner infrastructure-deploy-script --ref f7085fa21f2640e7389801e1caa8e785c672c78e --binary terragrunt --command plan-all --command-args --terragrunt-modules-that-include=../_envcommon/services/rabbitmq.hcl --deploy-path infrastructure-live/prod/ --repo xxx --force-https true\"><pre class=\"notranslate\"><code class=\"notranslate\">infrastructure-deployer --aws-region us-west-2 -- terraform-planner infrastructure-deploy-script --ref f7085fa21f2640e7389801e1caa8e785c672c78e --binary terragrunt --command plan-all --command-args --terragrunt-modules-that-include=../_envcommon/services/rabbitmq.hcl --deploy-path infrastructure-live/prod/ --repo xxx --force-https true\n</code></pre></div>\n<p dir=\"auto\">Which then calls this command:</p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"terragrunt plan-all --terragrunt-non-interactive -input=false --terragrunt-modules-that-include=../_envcommon/services/rabbitmq.hcl\"><pre class=\"notranslate\"><code class=\"notranslate\">terragrunt plan-all --terragrunt-non-interactive -input=false --terragrunt-modules-that-include=../_envcommon/services/rabbitmq.hcl\n</code></pre></div>\n<p dir=\"auto\">Here is the output from CI:</p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"Running infrastructure-deployer with args: --aws-region us-west-2 -- terraform-planner infrastructure-deploy-script --ref f7085fa21f2640e7389801e1caa8e785c672c78e --binary terragrunt --command plan-all --command-args --terragrunt-modules-that-include=../_envcommon/services/rabbitmq.hcl --deploy-path infrastructure-live/prod/ --repo xxx --force-https true\n[infrastructure-deployer] INFO[2023-09-14T23:26:11Z] Invoking Lambda function ecs-deploy-runner-invoker to trigger deployment.\n[infrastructure-deployer] INFO[2023-09-14T23:26:12Z] Successfully invoked Lambda function ecs-deploy-runner-invoker to trigger deployment.\n[infrastructure-deployer] INFO[2023-09-14T23:26:12Z] Waiting for ECS task arn:aws:ecs:xxx to start\n[infrastructure-deployer] INFO[2023-09-14T23:26:53Z] Deployment ECS Task arn:aws:ecs:xxx has started. Streaming logs.\nUpdating files: 100% (8923/8923), done.+0000] Updating files:  19% (1742/8923)\n[ecs-deploy-runner][2023-09-14T23:27:33+0000] [INFO] [infrastructure-deploy-script] 2023-09-14 23:27:33  Successfully cloned xxx to directory /tmp/tmp4802kcvv\n[ecs-deploy-runner][2023-09-14T23:27:33+0000] [INFO] [infrastructure-deploy-script] 2023-09-14 23:27:33  Checking out f7085fa21f2640e7389801e1caa8e785c672c78e\n[ecs-deploy-runner][2023-09-14T23:27:33+0000] [INFO] [infrastructure-deploy-script] 2023-09-14 23:27:33  Running command &quot;git checkout f7085fa21f2640e7389801e1caa8e785c672c78e&quot;\n[ecs-deploy-runner][2023-09-14T23:27:35+0000] Note: switching to 'f7085fa21f2640e7389801e1caa8e785c672c78e'.\n[ecs-deploy-runner][2023-09-14T23:27:35+0000] You are in 'detached HEAD' state. You can look around, make experimental\n[ecs-deploy-runner][2023-09-14T23:27:35+0000] changes and commit them, and you can discard any commits you make in this\n[ecs-deploy-runner][2023-09-14T23:27:35+0000] state without impacting any branches by switching back to a branch.\n[ecs-deploy-runner][2023-09-14T23:27:35+0000] If you want to create a new branch to retain commits you create, you may\n[ecs-deploy-runner][2023-09-14T23:27:35+0000] do so (now or later) by using -c with the switch command. Example:\n[ecs-deploy-runner][2023-09-14T23:27:35+0000]   git switch -c &lt;new-branch-name&gt;\n[ecs-deploy-runner][2023-09-14T23:27:35+0000] Or undo this operation with:\n[ecs-deploy-runner][2023-09-14T23:27:35+0000]   git switch -\n[ecs-deploy-runner][2023-09-14T23:27:35+0000] Turn off this advice by setting config variable advice.detachedHead to false\n[ecs-deploy-runner][2023-09-14T23:27:35+0000] HEAD is now at f7085fa21 Revert more changes\n[ecs-deploy-runner][2023-09-14T23:27:35+0000] [INFO] [infrastructure-deploy-script] 2023-09-14 23:27:35  Successfully checked out f7085fa21f2640e7389801e1caa8e785c672c78e\n[ecs-deploy-runner][2023-09-14T23:27:35+0000] [INFO] [infrastructure-deploy-script] 2023-09-14 23:27:35  Checking out f7085fa21f2640e7389801e1caa8e785c672c78e\n[ecs-deploy-runner][2023-09-14T23:27:35+0000] [INFO] [infrastructure-deploy-script] 2023-09-14 23:27:35  Running command &quot;git checkout f7085fa21f2640e7389801e1caa8e785c672c78e&quot;\n[ecs-deploy-runner][2023-09-14T23:27:35+0000] HEAD is now at f7085fa21 Revert more changes\n[ecs-deploy-runner][2023-09-14T23:27:35+0000] [INFO] [infrastructure-deploy-script] 2023-09-14 23:27:35  Successfully checked out f7085fa21f2640e7389801e1caa8e785c672c78e\n[ecs-deploy-runner][2023-09-14T23:27:35+0000] [INFO] [infrastructure-deploy-script] 2023-09-14 23:27:35  Running command &quot;terragrunt plan-all --terragrunt-non-interactive -input=false --terragrunt-modules-that-include=../_envcommon/services/rabbitmq.hcl&quot;\n[ecs-deploy-runner][2023-09-14T23:27:35+0000] time=2023-09-14T23:27:35Z level=warning msg='plan-all' is deprecated. Running 'terragrunt run-all plan -input=false' instead. Please update your workflows to use 'terragrunt run-all plan -input=false', as 'plan-all' may be removed in the future!\n[ecs-deploy-runner][2023-09-14T23:28:00+0000] time=2023-09-14T23:28:00Z level=info msg=The stack at /tmp/tmp4802kcvv/infrastructure-live/prod will be processed in the following order for command plan:\n[ecs-deploy-runner][2023-09-14T23:28:00+0000] Group 1\n[ecs-deploy-runner][2023-09-14T23:28:00+0000] - Module /tmp/tmp4802kcvv/infrastructure-live/prod/us-west-2/prod/services/rabbitmq\n[ecs-deploy-runner][2023-09-14T23:28:00+0000] - Module /tmp/tmp4802kcvv/infrastructure-live/prod/us-west-2/prod/services/rabbitmq-3-11\n[ecs-deploy-runner][2023-09-14T23:28:00+0000] - Module /tmp/tmp4802kcvv/infrastructure-live/prod/us-west-2/prod/services/internal-rabbitmq\n[ecs-deploy-runner][2023-09-14T23:28:00+0000] - Module /tmp/tmp4802kcvv/infrastructure-live/prod/us-west-2/prod/services/internal-rabbitmq-3-11\n[ecs-deploy-runner][2023-09-14T23:28:03+0000] time=2023-09-14T23:28:03Z level=error msg=Module /tmp/tmp4802kcvv/infrastructure-live/prod/us-west-2/prod/services/internal-rabbitmq has finished with an error: [/tmp/tmp4802kcvv/infrastructure-live/prod/us-west-2/prod/services/internal-rabbitmq] exit status 126 prefix=[/tmp/tmp4802kcvv/infrastructure-live/prod/us-west-2/prod/services/internal-rabbitmq]\n[ecs-deploy-runner][2023-09-14T23:28:03+0000] time=2023-09-14T23:28:03Z level=error msg=Module /tmp/tmp4802kcvv/infrastructure-live/prod/us-west-2/prod/services/internal-rabbitmq-3-11 has finished with an error: [/tmp/tmp4802kcvv/infrastructure-live/prod/us-west-2/prod/services/internal-rabbitmq-3-11] exit status 126 prefix=[/tmp/tmp4802kcvv/infrastructure-live/prod/us-west-2/prod/services/internal-rabbitmq-3-11]\n[ecs-deploy-runner][2023-09-14T23:28:03+0000] time=2023-09-14T23:28:03Z level=error msg=Module /tmp/tmp4802kcvv/infrastructure-live/prod/us-west-2/prod/services/rabbitmq-3-11 has finished with an error: [/tmp/tmp4802kcvv/infrastructure-live/prod/us-west-2/prod/services/rabbitmq-3-11] exit status 126 prefix=[/tmp/tmp4802kcvv/infrastructure-live/prod/us-west-2/prod/services/rabbitmq-3-11]\n[ecs-deploy-runner][2023-09-14T23:28:18+0000] Initializing modules...\n[ecs-deploy-runner][2023-09-14T23:28:19+0000] Downloading terraform-aws-modules/security-group/aws 4.17.2 for rmq_sg...\n[ecs-deploy-runner][2023-09-14T23:28:19+0000] - rmq_sg in .terraform/modules/rmq_sg\n[ecs-deploy-runner][2023-09-14T23:28:19+0000] Initializing the backend...\n[ecs-deploy-runner][2023-09-14T23:28:20+0000]\n[ecs-deploy-runner][2023-09-14T23:28:20+0000] Successfully configured the backend &quot;s3&quot;! Terraform will automatically\n[ecs-deploy-runner][2023-09-14T23:28:20+0000] use this backend unless the backend configuration changes.\n[ecs-deploy-runner][2023-09-14T23:28:20+0000] Initializing provider plugins...\n[ecs-deploy-runner][2023-09-14T23:28:20+0000] - Finding hashicorp/aws versions matching &quot;&gt;= 3.29.0, &gt; 3.75.1, &lt; 5.0.0&quot;...\n[ecs-deploy-runner][2023-09-14T23:28:20+0000] - Finding latest version of hashicorp/random...\n[ecs-deploy-runner][2023-09-14T23:28:20+0000] - Installing hashicorp/aws v4.67.0...\n[ecs-deploy-runner][2023-09-14T23:28:23+0000] - Installed hashicorp/aws v4.67.0 (signed by HashiCorp)\n[ecs-deploy-runner][2023-09-14T23:28:23+0000] - Installing hashicorp/random v3.5.1...\n[ecs-deploy-runner][2023-09-14T23:28:24+0000] - Installed hashicorp/random v3.5.1 (signed by HashiCorp)\n[ecs-deploy-runner][2023-09-14T23:28:24+0000] Terraform has created a lock file .terraform.lock.hcl to record the provider\n[ecs-deploy-runner][2023-09-14T23:28:24+0000] selections it made above. Include this file in your version control repository\n[ecs-deploy-runner][2023-09-14T23:28:24+0000] so that Terraform can guarantee to make the same selections by default when\n[ecs-deploy-runner][2023-09-14T23:28:24+0000] you run &quot;terraform init&quot; in the future.\n[ecs-deploy-runner][2023-09-14T23:28:24+0000] Terraform has been successfully initialized!\n[ecs-deploy-runner][2023-09-14T23:28:24+0000]\n[ecs-deploy-runner][2023-09-14T23:28:24+0000] You may now begin working with Terraform. Try running &quot;terraform plan&quot; to see\n[ecs-deploy-runner][2023-09-14T23:28:24+0000] any changes that are required for your infrastructure. All Terraform commands\n[ecs-deploy-runner][2023-09-14T23:28:24+0000] should now work.\n[ecs-deploy-runner][2023-09-14T23:28:24+0000] If you ever set or change modules or backend configuration for Terraform,\n[ecs-deploy-runner][2023-09-14T23:28:24+0000] rerun this command to reinitialize your working directory. If you forget, other\n[ecs-deploy-runner][2023-09-14T23:28:24+0000] commands will detect it and remind you to do so if necessary.\n[ecs-deploy-runner][2023-09-14T23:28:28+0000] random_password.password: Refreshing state... [id=none]\n[ecs-deploy-runner][2023-09-14T23:28:28+0000] random_uuid.id: Refreshing state... [id=xxx]\n[ecs-deploy-runner][2023-09-14T23:28:28+0000] random_pet.username: Refreshing state... [id=oxxx]\n[ecs-deploy-runner][2023-09-14T23:28:28+0000] aws_secretsmanager_secret.username[0]: Refreshing state... [id=xxx]\n[ecs-deploy-runner][2023-09-14T23:28:28+0000] aws_secretsmanager_secret.password[0]: Refreshing state... [id=xxx]\n[ecs-deploy-runner][2023-09-14T23:28:28+0000] aws_secretsmanager_secret_version.password[0]: Refreshing state... [id=xxx]\n[ecs-deploy-runner][2023-09-14T23:28:28+0000] aws_secretsmanager_secret_version.username[0]: Refreshing state... [id=xxx]\n[ecs-deploy-runner][2023-09-14T23:28:28+0000] module.rmq_sg.aws_security_group.this_name_prefix[0]: Refreshing state... [id=xxx]\n[ecs-deploy-runner][2023-09-14T23:28:29+0000] aws_mq_broker.rmq: Refreshing state... [id=xxx]\n[ecs-deploy-runner][2023-09-14T23:28:29+0000] module.rmq_sg.aws_security_group_rule.ingress_with_self[0]: Refreshing state... [id=xxx]\n[ecs-deploy-runner][2023-09-14T23:28:29+0000] module.rmq_sg.aws_security_group_rule.ingress_with_source_security_group_id[0]: Refreshing state... [id=xxx]\n[ecs-deploy-runner][2023-09-14T23:28:29+0000] module.rmq_sg.aws_security_group_rule.ingress_with_cidr_blocks[1]: Refreshing state... [id=xxx]\n[ecs-deploy-runner][2023-09-14T23:28:29+0000] module.rmq_sg.aws_security_group_rule.ingress_with_source_security_group_id[1]: Refreshing state... [id=xxx]\n[ecs-deploy-runner][2023-09-14T23:28:29+0000] module.rmq_sg.aws_security_group_rule.ingress_with_cidr_blocks[0]: Refreshing state... [id=xxx]\n[ecs-deploy-runner][2023-09-14T23:28:29+0000] module.rmq_sg.aws_security_group_rule.ingress_with_source_security_group_id[2]: Refreshing state... [id=xxx]\n[ecs-deploy-runner][2023-09-14T23:28:29+0000] module.rmq_sg.aws_security_group_rule.ingress_with_cidr_blocks[2]: Refreshing state... [id=xxx]\n[ecs-deploy-runner][2023-09-14T23:28:29+0000] No changes. Your infrastructure matches the configuration.\n[ecs-deploy-runner][2023-09-14T23:28:29+0000] Terraform has compared your real infrastructure against your configuration\n[ecs-deploy-runner][2023-09-14T23:28:29+0000] and found no differences, so no changes are needed.\n[ecs-deploy-runner][2023-09-14T23:28:29+0000] time=2023-09-14T23:28:29Z level=error msg=3 errors occurred:\n[ecs-deploy-runner][2023-09-14T23:28:29+0000] \t* [/tmp/tmp4802kcvv/infrastructure-live/prod/us-west-2/prod/services/rabbitmq-3-11] exit status 126\n[ecs-deploy-runner][2023-09-14T23:28:29+0000] \t* [/tmp/tmp4802kcvv/infrastructure-live/prod/us-west-2/prod/services/internal-rabbitmq] exit status 126\n[ecs-deploy-runner][2023-09-14T23:28:29+0000] \t* [/tmp/tmp4802kcvv/infrastructure-live/prod/us-west-2/prod/services/internal-rabbitmq-3-11] exit status 126\n[ecs-deploy-runner][2023-09-14T23:28:29+0000] [INFO] [infrastructure-deploy-script] 2023-09-14 23:28:29  &quot;terragrunt plan-all&quot; exited with code 126\n[ecs-deploy-runner][2023-09-14T23:28:29+0000] Error: Could not run &quot;terragrunt plan-all&quot;. Error=time=2023-09-14T23:27:35Z level=warning msg='plan-all' is deprecated. Running 'terragrunt run-all plan -input=false' instead. Please update your workflows to use 'terragrunt run-all plan -input=false', as 'plan-all' may be removed in the future!\n[ecs-deploy-runner][2023-09-14T23:28:29+0000] time=2023-09-14T23:28:00Z level=info msg=The stack at /tmp/tmp4802kcvv/infrastructure-live/prod will be processed in the following order for command plan:\n[ecs-deploy-runner][2023-09-14T23:28:29+0000] Group 1\n[ecs-deploy-runner][2023-09-14T23:28:29+0000] - Module /tmp/tmp4802kcvv/infrastructure-live/prod/us-west-2/prod/services/rabbitmq\n[ecs-deploy-runner][2023-09-14T23:28:29+0000] - Module /tmp/tmp4802kcvv/infrastructure-live/prod/us-west-2/prod/services/rabbitmq-3-11\n[ecs-deploy-runner][2023-09-14T23:28:29+0000] - Module /tmp/tmp4802kcvv/infrastructure-live/prod/us-west-2/prod/services/internal-rabbitmq\n[ecs-deploy-runner][2023-09-14T23:28:29+0000] - Module /tmp/tmp4802kcvv/infrastructure-live/prod/us-west-2/prod/services/internal-rabbitmq-3-11\n[ecs-deploy-runner][2023-09-14T23:28:29+0000] time=2023-09-14T23:28:03Z level=error msg=Module /tmp/tmp4802kcvv/infrastructure-live/prod/us-west-2/prod/services/internal-rabbitmq has finished with an error: [/tmp/tmp4802kcvv/infrastructure-live/prod/us-west-2/prod/services/internal-rabbitmq] exit status 126 prefix=[/tmp/tmp4802kcvv/infrastructure-live/prod/us-west-2/prod/services/internal-rabbitmq]\n[ecs-deploy-runner][2023-09-14T23:28:29+0000] time=2023-09-14T23:28:03Z level=error msg=Module /tmp/tmp4802kcvv/infrastructure-live/prod/us-west-2/prod/services/internal-rabbitmq-3-11 has finished with an error: [/tmp/tmp4802kcvv/infrastructure-live/prod/us-west-2/prod/services/internal-rabbitmq-3-11] exit status 126 prefix=[/tmp/tmp4802kcvv/infrastructure-live/prod/us-west-2/prod/services/internal-rabbitmq-3-11]\n[ecs-deploy-runner][2023-09-14T23:28:29+0000] time=2023-09-14T23:28:03Z level=error msg=Module /tmp/tmp4802kcvv/infrastructure-live/prod/us-west-2/prod/services/rabbitmq-3-11 has finished with an error: [/tmp/tmp4802kcvv/infrastructure-live/prod/us-west-2/prod/services/rabbitmq-3-11] exit status 126 prefix=[/tmp/tmp4802kcvv/infrastructure-live/prod/us-west-2/prod/services/rabbitmq-3-11]\n[ecs-deploy-runner][2023-09-14T23:28:29+0000] time=2023-09-14T23:28:29Z level=error msg=3 errors occurred:\n[ecs-deploy-runner][2023-09-14T23:28:29+0000] \t* [/tmp/tmp4802kcvv/infrastructure-live/prod/us-west-2/prod/services/rabbitmq-3-11] exit status 126\n[ecs-deploy-runner][2023-09-14T23:28:29+0000] \t* [/tmp/tmp4802kcvv/infrastructure-live/prod/us-west-2/prod/services/internal-rabbitmq] exit status 126\n[ecs-deploy-runner][2023-09-14T23:28:29+0000] \t* [/tmp/tmp4802kcvv/infrastructure-live/prod/us-west-2/prod/services/internal-rabbitmq-3-11] exit status 126\n[ecs-deploy-runner][2023-09-14T23:28:29+0000] exit status 1\n[ecs-deploy-runner][2023-09-14T23:28:29+0000] time=&quot;2023-09-14T23:28:29Z&quot; level=error msg=&quot;exit status 1&quot; binary=deploy-runner-entrypoint version=latest\nERROR: Deployment failed\n/usr/bin/xargs: bash: exited with status 255; aborting\"><pre class=\"notranslate\"><code class=\"notranslate\">Running infrastructure-deployer with args: --aws-region us-west-2 -- terraform-planner infrastructure-deploy-script --ref f7085fa21f2640e7389801e1caa8e785c672c78e --binary terragrunt --command plan-all --command-args --terragrunt-modules-that-include=../_envcommon/services/rabbitmq.hcl --deploy-path infrastructure-live/prod/ --repo xxx --force-https true\n[infrastructure-deployer] INFO[2023-09-14T23:26:11Z] Invoking Lambda function ecs-deploy-runner-invoker to trigger deployment.\n[infrastructure-deployer] INFO[2023-09-14T23:26:12Z] Successfully invoked Lambda function ecs-deploy-runner-invoker to trigger deployment.\n[infrastructure-deployer] INFO[2023-09-14T23:26:12Z] Waiting for ECS task arn:aws:ecs:xxx to start\n[infrastructure-deployer] INFO[2023-09-14T23:26:53Z] Deployment ECS Task arn:aws:ecs:xxx has started. Streaming logs.\nUpdating files: 100% (8923/8923), done.+0000] Updating files:  19% (1742/8923)\n[ecs-deploy-runner][2023-09-14T23:27:33+0000] [INFO] [infrastructure-deploy-script] 2023-09-14 23:27:33  Successfully cloned xxx to directory /tmp/tmp4802kcvv\n[ecs-deploy-runner][2023-09-14T23:27:33+0000] [INFO] [infrastructure-deploy-script] 2023-09-14 23:27:33  Checking out f7085fa21f2640e7389801e1caa8e785c672c78e\n[ecs-deploy-runner][2023-09-14T23:27:33+0000] [INFO] [infrastructure-deploy-script] 2023-09-14 23:27:33  Running command \"git checkout f7085fa21f2640e7389801e1caa8e785c672c78e\"\n[ecs-deploy-runner][2023-09-14T23:27:35+0000] Note: switching to 'f7085fa21f2640e7389801e1caa8e785c672c78e'.\n[ecs-deploy-runner][2023-09-14T23:27:35+0000] You are in 'detached HEAD' state. You can look around, make experimental\n[ecs-deploy-runner][2023-09-14T23:27:35+0000] changes and commit them, and you can discard any commits you make in this\n[ecs-deploy-runner][2023-09-14T23:27:35+0000] state without impacting any branches by switching back to a branch.\n[ecs-deploy-runner][2023-09-14T23:27:35+0000] If you want to create a new branch to retain commits you create, you may\n[ecs-deploy-runner][2023-09-14T23:27:35+0000] do so (now or later) by using -c with the switch command. Example:\n[ecs-deploy-runner][2023-09-14T23:27:35+0000]   git switch -c &lt;new-branch-name&gt;\n[ecs-deploy-runner][2023-09-14T23:27:35+0000] Or undo this operation with:\n[ecs-deploy-runner][2023-09-14T23:27:35+0000]   git switch -\n[ecs-deploy-runner][2023-09-14T23:27:35+0000] Turn off this advice by setting config variable advice.detachedHead to false\n[ecs-deploy-runner][2023-09-14T23:27:35+0000] HEAD is now at f7085fa21 Revert more changes\n[ecs-deploy-runner][2023-09-14T23:27:35+0000] [INFO] [infrastructure-deploy-script] 2023-09-14 23:27:35  Successfully checked out f7085fa21f2640e7389801e1caa8e785c672c78e\n[ecs-deploy-runner][2023-09-14T23:27:35+0000] [INFO] [infrastructure-deploy-script] 2023-09-14 23:27:35  Checking out f7085fa21f2640e7389801e1caa8e785c672c78e\n[ecs-deploy-runner][2023-09-14T23:27:35+0000] [INFO] [infrastructure-deploy-script] 2023-09-14 23:27:35  Running command \"git checkout f7085fa21f2640e7389801e1caa8e785c672c78e\"\n[ecs-deploy-runner][2023-09-14T23:27:35+0000] HEAD is now at f7085fa21 Revert more changes\n[ecs-deploy-runner][2023-09-14T23:27:35+0000] [INFO] [infrastructure-deploy-script] 2023-09-14 23:27:35  Successfully checked out f7085fa21f2640e7389801e1caa8e785c672c78e\n[ecs-deploy-runner][2023-09-14T23:27:35+0000] [INFO] [infrastructure-deploy-script] 2023-09-14 23:27:35  Running command \"terragrunt plan-all --terragrunt-non-interactive -input=false --terragrunt-modules-that-include=../_envcommon/services/rabbitmq.hcl\"\n[ecs-deploy-runner][2023-09-14T23:27:35+0000] time=2023-09-14T23:27:35Z level=warning msg='plan-all' is deprecated. Running 'terragrunt run-all plan -input=false' instead. Please update your workflows to use 'terragrunt run-all plan -input=false', as 'plan-all' may be removed in the future!\n[ecs-deploy-runner][2023-09-14T23:28:00+0000] time=2023-09-14T23:28:00Z level=info msg=The stack at /tmp/tmp4802kcvv/infrastructure-live/prod will be processed in the following order for command plan:\n[ecs-deploy-runner][2023-09-14T23:28:00+0000] Group 1\n[ecs-deploy-runner][2023-09-14T23:28:00+0000] - Module /tmp/tmp4802kcvv/infrastructure-live/prod/us-west-2/prod/services/rabbitmq\n[ecs-deploy-runner][2023-09-14T23:28:00+0000] - Module /tmp/tmp4802kcvv/infrastructure-live/prod/us-west-2/prod/services/rabbitmq-3-11\n[ecs-deploy-runner][2023-09-14T23:28:00+0000] - Module /tmp/tmp4802kcvv/infrastructure-live/prod/us-west-2/prod/services/internal-rabbitmq\n[ecs-deploy-runner][2023-09-14T23:28:00+0000] - Module /tmp/tmp4802kcvv/infrastructure-live/prod/us-west-2/prod/services/internal-rabbitmq-3-11\n[ecs-deploy-runner][2023-09-14T23:28:03+0000] time=2023-09-14T23:28:03Z level=error msg=Module /tmp/tmp4802kcvv/infrastructure-live/prod/us-west-2/prod/services/internal-rabbitmq has finished with an error: [/tmp/tmp4802kcvv/infrastructure-live/prod/us-west-2/prod/services/internal-rabbitmq] exit status 126 prefix=[/tmp/tmp4802kcvv/infrastructure-live/prod/us-west-2/prod/services/internal-rabbitmq]\n[ecs-deploy-runner][2023-09-14T23:28:03+0000] time=2023-09-14T23:28:03Z level=error msg=Module /tmp/tmp4802kcvv/infrastructure-live/prod/us-west-2/prod/services/internal-rabbitmq-3-11 has finished with an error: [/tmp/tmp4802kcvv/infrastructure-live/prod/us-west-2/prod/services/internal-rabbitmq-3-11] exit status 126 prefix=[/tmp/tmp4802kcvv/infrastructure-live/prod/us-west-2/prod/services/internal-rabbitmq-3-11]\n[ecs-deploy-runner][2023-09-14T23:28:03+0000] time=2023-09-14T23:28:03Z level=error msg=Module /tmp/tmp4802kcvv/infrastructure-live/prod/us-west-2/prod/services/rabbitmq-3-11 has finished with an error: [/tmp/tmp4802kcvv/infrastructure-live/prod/us-west-2/prod/services/rabbitmq-3-11] exit status 126 prefix=[/tmp/tmp4802kcvv/infrastructure-live/prod/us-west-2/prod/services/rabbitmq-3-11]\n[ecs-deploy-runner][2023-09-14T23:28:18+0000] Initializing modules...\n[ecs-deploy-runner][2023-09-14T23:28:19+0000] Downloading terraform-aws-modules/security-group/aws 4.17.2 for rmq_sg...\n[ecs-deploy-runner][2023-09-14T23:28:19+0000] - rmq_sg in .terraform/modules/rmq_sg\n[ecs-deploy-runner][2023-09-14T23:28:19+0000] Initializing the backend...\n[ecs-deploy-runner][2023-09-14T23:28:20+0000]\n[ecs-deploy-runner][2023-09-14T23:28:20+0000] Successfully configured the backend \"s3\"! Terraform will automatically\n[ecs-deploy-runner][2023-09-14T23:28:20+0000] use this backend unless the backend configuration changes.\n[ecs-deploy-runner][2023-09-14T23:28:20+0000] Initializing provider plugins...\n[ecs-deploy-runner][2023-09-14T23:28:20+0000] - Finding hashicorp/aws versions matching \"&gt;= 3.29.0, &gt; 3.75.1, &lt; 5.0.0\"...\n[ecs-deploy-runner][2023-09-14T23:28:20+0000] - Finding latest version of hashicorp/random...\n[ecs-deploy-runner][2023-09-14T23:28:20+0000] - Installing hashicorp/aws v4.67.0...\n[ecs-deploy-runner][2023-09-14T23:28:23+0000] - Installed hashicorp/aws v4.67.0 (signed by HashiCorp)\n[ecs-deploy-runner][2023-09-14T23:28:23+0000] - Installing hashicorp/random v3.5.1...\n[ecs-deploy-runner][2023-09-14T23:28:24+0000] - Installed hashicorp/random v3.5.1 (signed by HashiCorp)\n[ecs-deploy-runner][2023-09-14T23:28:24+0000] Terraform has created a lock file .terraform.lock.hcl to record the provider\n[ecs-deploy-runner][2023-09-14T23:28:24+0000] selections it made above. Include this file in your version control repository\n[ecs-deploy-runner][2023-09-14T23:28:24+0000] so that Terraform can guarantee to make the same selections by default when\n[ecs-deploy-runner][2023-09-14T23:28:24+0000] you run \"terraform init\" in the future.\n[ecs-deploy-runner][2023-09-14T23:28:24+0000] Terraform has been successfully initialized!\n[ecs-deploy-runner][2023-09-14T23:28:24+0000]\n[ecs-deploy-runner][2023-09-14T23:28:24+0000] You may now begin working with Terraform. Try running \"terraform plan\" to see\n[ecs-deploy-runner][2023-09-14T23:28:24+0000] any changes that are required for your infrastructure. All Terraform commands\n[ecs-deploy-runner][2023-09-14T23:28:24+0000] should now work.\n[ecs-deploy-runner][2023-09-14T23:28:24+0000] If you ever set or change modules or backend configuration for Terraform,\n[ecs-deploy-runner][2023-09-14T23:28:24+0000] rerun this command to reinitialize your working directory. If you forget, other\n[ecs-deploy-runner][2023-09-14T23:28:24+0000] commands will detect it and remind you to do so if necessary.\n[ecs-deploy-runner][2023-09-14T23:28:28+0000] random_password.password: Refreshing state... [id=none]\n[ecs-deploy-runner][2023-09-14T23:28:28+0000] random_uuid.id: Refreshing state... [id=xxx]\n[ecs-deploy-runner][2023-09-14T23:28:28+0000] random_pet.username: Refreshing state... [id=oxxx]\n[ecs-deploy-runner][2023-09-14T23:28:28+0000] aws_secretsmanager_secret.username[0]: Refreshing state... [id=xxx]\n[ecs-deploy-runner][2023-09-14T23:28:28+0000] aws_secretsmanager_secret.password[0]: Refreshing state... [id=xxx]\n[ecs-deploy-runner][2023-09-14T23:28:28+0000] aws_secretsmanager_secret_version.password[0]: Refreshing state... [id=xxx]\n[ecs-deploy-runner][2023-09-14T23:28:28+0000] aws_secretsmanager_secret_version.username[0]: Refreshing state... [id=xxx]\n[ecs-deploy-runner][2023-09-14T23:28:28+0000] module.rmq_sg.aws_security_group.this_name_prefix[0]: Refreshing state... [id=xxx]\n[ecs-deploy-runner][2023-09-14T23:28:29+0000] aws_mq_broker.rmq: Refreshing state... [id=xxx]\n[ecs-deploy-runner][2023-09-14T23:28:29+0000] module.rmq_sg.aws_security_group_rule.ingress_with_self[0]: Refreshing state... [id=xxx]\n[ecs-deploy-runner][2023-09-14T23:28:29+0000] module.rmq_sg.aws_security_group_rule.ingress_with_source_security_group_id[0]: Refreshing state... [id=xxx]\n[ecs-deploy-runner][2023-09-14T23:28:29+0000] module.rmq_sg.aws_security_group_rule.ingress_with_cidr_blocks[1]: Refreshing state... [id=xxx]\n[ecs-deploy-runner][2023-09-14T23:28:29+0000] module.rmq_sg.aws_security_group_rule.ingress_with_source_security_group_id[1]: Refreshing state... [id=xxx]\n[ecs-deploy-runner][2023-09-14T23:28:29+0000] module.rmq_sg.aws_security_group_rule.ingress_with_cidr_blocks[0]: Refreshing state... [id=xxx]\n[ecs-deploy-runner][2023-09-14T23:28:29+0000] module.rmq_sg.aws_security_group_rule.ingress_with_source_security_group_id[2]: Refreshing state... [id=xxx]\n[ecs-deploy-runner][2023-09-14T23:28:29+0000] module.rmq_sg.aws_security_group_rule.ingress_with_cidr_blocks[2]: Refreshing state... [id=xxx]\n[ecs-deploy-runner][2023-09-14T23:28:29+0000] No changes. Your infrastructure matches the configuration.\n[ecs-deploy-runner][2023-09-14T23:28:29+0000] Terraform has compared your real infrastructure against your configuration\n[ecs-deploy-runner][2023-09-14T23:28:29+0000] and found no differences, so no changes are needed.\n[ecs-deploy-runner][2023-09-14T23:28:29+0000] time=2023-09-14T23:28:29Z level=error msg=3 errors occurred:\n[ecs-deploy-runner][2023-09-14T23:28:29+0000] \t* [/tmp/tmp4802kcvv/infrastructure-live/prod/us-west-2/prod/services/rabbitmq-3-11] exit status 126\n[ecs-deploy-runner][2023-09-14T23:28:29+0000] \t* [/tmp/tmp4802kcvv/infrastructure-live/prod/us-west-2/prod/services/internal-rabbitmq] exit status 126\n[ecs-deploy-runner][2023-09-14T23:28:29+0000] \t* [/tmp/tmp4802kcvv/infrastructure-live/prod/us-west-2/prod/services/internal-rabbitmq-3-11] exit status 126\n[ecs-deploy-runner][2023-09-14T23:28:29+0000] [INFO] [infrastructure-deploy-script] 2023-09-14 23:28:29  \"terragrunt plan-all\" exited with code 126\n[ecs-deploy-runner][2023-09-14T23:28:29+0000] Error: Could not run \"terragrunt plan-all\". Error=time=2023-09-14T23:27:35Z level=warning msg='plan-all' is deprecated. Running 'terragrunt run-all plan -input=false' instead. Please update your workflows to use 'terragrunt run-all plan -input=false', as 'plan-all' may be removed in the future!\n[ecs-deploy-runner][2023-09-14T23:28:29+0000] time=2023-09-14T23:28:00Z level=info msg=The stack at /tmp/tmp4802kcvv/infrastructure-live/prod will be processed in the following order for command plan:\n[ecs-deploy-runner][2023-09-14T23:28:29+0000] Group 1\n[ecs-deploy-runner][2023-09-14T23:28:29+0000] - Module /tmp/tmp4802kcvv/infrastructure-live/prod/us-west-2/prod/services/rabbitmq\n[ecs-deploy-runner][2023-09-14T23:28:29+0000] - Module /tmp/tmp4802kcvv/infrastructure-live/prod/us-west-2/prod/services/rabbitmq-3-11\n[ecs-deploy-runner][2023-09-14T23:28:29+0000] - Module /tmp/tmp4802kcvv/infrastructure-live/prod/us-west-2/prod/services/internal-rabbitmq\n[ecs-deploy-runner][2023-09-14T23:28:29+0000] - Module /tmp/tmp4802kcvv/infrastructure-live/prod/us-west-2/prod/services/internal-rabbitmq-3-11\n[ecs-deploy-runner][2023-09-14T23:28:29+0000] time=2023-09-14T23:28:03Z level=error msg=Module /tmp/tmp4802kcvv/infrastructure-live/prod/us-west-2/prod/services/internal-rabbitmq has finished with an error: [/tmp/tmp4802kcvv/infrastructure-live/prod/us-west-2/prod/services/internal-rabbitmq] exit status 126 prefix=[/tmp/tmp4802kcvv/infrastructure-live/prod/us-west-2/prod/services/internal-rabbitmq]\n[ecs-deploy-runner][2023-09-14T23:28:29+0000] time=2023-09-14T23:28:03Z level=error msg=Module /tmp/tmp4802kcvv/infrastructure-live/prod/us-west-2/prod/services/internal-rabbitmq-3-11 has finished with an error: [/tmp/tmp4802kcvv/infrastructure-live/prod/us-west-2/prod/services/internal-rabbitmq-3-11] exit status 126 prefix=[/tmp/tmp4802kcvv/infrastructure-live/prod/us-west-2/prod/services/internal-rabbitmq-3-11]\n[ecs-deploy-runner][2023-09-14T23:28:29+0000] time=2023-09-14T23:28:03Z level=error msg=Module /tmp/tmp4802kcvv/infrastructure-live/prod/us-west-2/prod/services/rabbitmq-3-11 has finished with an error: [/tmp/tmp4802kcvv/infrastructure-live/prod/us-west-2/prod/services/rabbitmq-3-11] exit status 126 prefix=[/tmp/tmp4802kcvv/infrastructure-live/prod/us-west-2/prod/services/rabbitmq-3-11]\n[ecs-deploy-runner][2023-09-14T23:28:29+0000] time=2023-09-14T23:28:29Z level=error msg=3 errors occurred:\n[ecs-deploy-runner][2023-09-14T23:28:29+0000] \t* [/tmp/tmp4802kcvv/infrastructure-live/prod/us-west-2/prod/services/rabbitmq-3-11] exit status 126\n[ecs-deploy-runner][2023-09-14T23:28:29+0000] \t* [/tmp/tmp4802kcvv/infrastructure-live/prod/us-west-2/prod/services/internal-rabbitmq] exit status 126\n[ecs-deploy-runner][2023-09-14T23:28:29+0000] \t* [/tmp/tmp4802kcvv/infrastructure-live/prod/us-west-2/prod/services/internal-rabbitmq-3-11] exit status 126\n[ecs-deploy-runner][2023-09-14T23:28:29+0000] exit status 1\n[ecs-deploy-runner][2023-09-14T23:28:29+0000] time=\"2023-09-14T23:28:29Z\" level=error msg=\"exit status 1\" binary=deploy-runner-entrypoint version=latest\nERROR: Deployment failed\n/usr/bin/xargs: bash: exited with status 255; aborting\n</code></pre></div>\n<p dir=\"auto\">Here is the output of the <code class=\"notranslate\">terragrunt plan-all</code> command when I run it locally:</p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"terragrunt plan-all --terragrunt-non-interactive -input=false --terragrunt-modules-that-include=../_envcommon/services/rabbitmq.hcl\nWARN[0000] 'plan-all' is deprecated. Running 'terragrunt run-all plan -input=false' instead. Please update your workflows to use 'terragrunt run-all plan -input=false', as 'plan-all' may be removed in the future!\nINFO[0007] The stack at /xxx/infrastructure-live/prod will be processed in the following order for command plan:\nGroup 1\n- Module /xxx/infrastructure-live/prod/us-west-2/prod/services/rabbitmq\n- Module /xxx/infrastructure-live/prod/us-west-2/prod/services/rabbitmq-3-11\n- Module /xxx/infrastructure-live/prod/us-west-2/prod/services/internal-rabbitmq\n- Module /xxx/infrastructure-live/prod/us-west-2/prod/services/internal-rabbitmq-3-11\n\nrandom_password.password: Refreshing state... [id=none]\nrandom_uuid.id: Refreshing state... [id=xxx]\nrandom_pet.username: Refreshing state... [id=xxx]\nrandom_pet.username: Refreshing state... [id=xxx]\nrandom_password.password: Refreshing state... [id=none]\nrandom_uuid.id: Refreshing state... [id=xxx]\nrandom_password.password: Refreshing state... [id=none]\nrandom_uuid.id: Refreshing state... [id=xxx]\nrandom_pet.username: Refreshing state... [id=xxx]\nrandom_uuid.id: Refreshing state... [id=xxx]\nrandom_pet.username: Refreshing state... [id=xxx]\nrandom_password.password: Refreshing state... [id=none]\naws_secretsmanager_secret.password[0]: Refreshing state... [id=xxx]\naws_secretsmanager_secret.username[0]: Refreshing state... [id=xxx]\naws_secretsmanager_secret.username[0]: Refreshing state... [id=xxx]\naws_secretsmanager_secret.username[0]: Refreshing state... [id=xxx]\naws_secretsmanager_secret.password[0]: Refreshing state... [id=axxx]\naws_secretsmanager_secret.password[0]: Refreshing state... [id=xxx]\naws_secretsmanager_secret.username[0]: Refreshing state... [id=xxx]\naws_secretsmanager_secret.password[0]: Refreshing state... [id=xxx]\naws_secretsmanager_secret_version.username[0]: Refreshing state... [id=xxx]\naws_secretsmanager_secret_version.password[0]: Refreshing state... [id=xxx]\naws_secretsmanager_secret_version.password[0]: Refreshing state... [id=xxx]\naws_secretsmanager_secret_version.username[0]: Refreshing state... [id=xxx]\naws_secretsmanager_secret_version.password[0]: Refreshing state... [id=xxx]\naws_secretsmanager_secret_version.username[0]: Refreshing state... [id=xxx]\naws_secretsmanager_secret_version.username[0]: Refreshing state... [id=xxx]\nmodule.rmq_sg.aws_security_group.this_name_prefix[0]: Refreshing state... [id=xxx]\nmodule.rmq_sg.aws_security_group.this_name_prefix[0]: Refreshing state... [id=xxx]\naws_secretsmanager_secret_version.password[0]: Refreshing state... [id=xxx]\nmodule.rmq_sg.aws_security_group.this_name_prefix[0]: Refreshing state... [id=xxx]\nmodule.rmq_sg.aws_security_group.this_name_prefix[0]: Refreshing state... [id=xxx]\nmodule.rmq_sg.aws_security_group_rule.ingress_with_self[0]: Refreshing state... [id=xxx]\nmodule.rmq_sg.aws_security_group_rule.ingress_with_cidr_blocks[0]: Refreshing state... [id=xxx]\nmodule.rmq_sg.aws_security_group_rule.ingress_with_cidr_blocks[1]: Refreshing state... [id=xxx]\nmodule.rmq_sg.aws_security_group_rule.ingress_with_cidr_blocks[2]: Refreshing state... [id=xxx]\naws_mq_broker.rmq: Refreshing state... [id=xxx]\nmodule.rmq_sg.aws_security_group_rule.ingress_with_source_security_group_id[0]: Refreshing state... [id=xxx]\nmodule.rmq_sg.aws_security_group_rule.ingress_with_source_security_group_id[2]: Refreshing state... [id=xxx]\nmodule.rmq_sg.aws_security_group_rule.ingress_with_source_security_group_id[1]: Refreshing state... [id=xxx]\nmodule.rmq_sg.aws_security_group_rule.ingress_with_source_security_group_id[2]: Refreshing state... [id=xxx]\naws_mq_broker.rmq: Refreshing state... [id=xxx]\nmodule.rmq_sg.aws_security_group_rule.ingress_with_source_security_group_id[0]: Refreshing state... [id=xxx]\nmodule.rmq_sg.aws_security_group_rule.ingress_with_self[0]: Refreshing state... [id=xxx]\nmodule.rmq_sg.aws_security_group_rule.ingress_with_source_security_group_id[1]: Refreshing state... [id=xxx]\nmodule.rmq_sg.aws_security_group_rule.ingress_with_cidr_blocks[0]: Refreshing state... [id=xxx]\nmodule.rmq_sg.aws_security_group_rule.ingress_with_cidr_blocks[2]: Refreshing state... [id=xxx]\nmodule.rmq_sg.aws_security_group_rule.ingress_with_cidr_blocks[1]: Refreshing state... [id=xxx]\nmodule.rmq_sg.aws_security_group_rule.ingress_with_cidr_blocks[1]: Refreshing state... [id=xxx]\nmodule.rmq_sg.aws_security_group_rule.ingress_with_source_security_group_id[0]: Refreshing state... [id=xxx]\nmodule.rmq_sg.aws_security_group_rule.ingress_with_source_security_group_id[2]: Refreshing state... [id=xxx]\naws_mq_broker.rmq: Refreshing state... [id=xxx]\nmodule.rmq_sg.aws_security_group_rule.ingress_with_cidr_blocks[0]: Refreshing state... [id=sxxx]\nmodule.rmq_sg.aws_security_group_rule.ingress_with_cidr_blocks[2]: Refreshing state... [id=xxx]\nmodule.rmq_sg.aws_security_group_rule.ingress_with_cidr_blocks[2]: Refreshing state... [id=xxx]\nmodule.rmq_sg.aws_security_group_rule.ingress_with_source_security_group_id[2]: Refreshing state... [id=xxx]\nmodule.rmq_sg.aws_security_group_rule.ingress_with_source_security_group_id[1]: Refreshing state... [id=xxx]\nmodule.rmq_sg.aws_security_group_rule.ingress_with_source_security_group_id[0]: Refreshing state... [id=xxx]\nmodule.rmq_sg.aws_security_group_rule.ingress_with_source_security_group_id[1]: Refreshing state... [id=xxx]\naws_mq_broker.rmq: Refreshing state... [id=xxx]\nmodule.rmq_sg.aws_security_group_rule.ingress_with_cidr_blocks[1]: Refreshing state... [id=xxx]\nmodule.rmq_sg.aws_security_group_rule.ingress_with_self[0]: Refreshing state... [id=xxx]\nmodule.rmq_sg.aws_security_group_rule.ingress_with_cidr_blocks[0]: Refreshing state... [id=xxx]\nmodule.rmq_sg.aws_security_group_rule.ingress_with_self[0]: Refreshing state... [id=xxx]\n\nNo changes. Your infrastructure matches the configuration.\n\nTerraform has compared your real infrastructure against your configuration\nand found no differences, so no changes are needed.\n\nNo changes. Your infrastructure matches the configuration.\n\nTerraform has compared your real infrastructure against your configuration\nand found no differences, so no changes are needed.\n\nNo changes. Your infrastructure matches the configuration.\n\nTerraform has compared your real infrastructure against your configuration\nand found no differences, so no changes are needed.\n\nNo changes. Your infrastructure matches the configuration.\n\nTerraform has compared your real infrastructure against your configuration\nand found no differences, so no changes are needed.\nReleasing state lock. This may take a few moments...\nReleasing state lock. This may take a few moments...\nReleasing state lock. This may take a few moments...\nReleasing state lock. This may take a few moments...\"><pre class=\"notranslate\"><code class=\"notranslate\">terragrunt plan-all --terragrunt-non-interactive -input=false --terragrunt-modules-that-include=../_envcommon/services/rabbitmq.hcl\nWARN[0000] 'plan-all' is deprecated. Running 'terragrunt run-all plan -input=false' instead. Please update your workflows to use 'terragrunt run-all plan -input=false', as 'plan-all' may be removed in the future!\nINFO[0007] The stack at /xxx/infrastructure-live/prod will be processed in the following order for command plan:\nGroup 1\n- Module /xxx/infrastructure-live/prod/us-west-2/prod/services/rabbitmq\n- Module /xxx/infrastructure-live/prod/us-west-2/prod/services/rabbitmq-3-11\n- Module /xxx/infrastructure-live/prod/us-west-2/prod/services/internal-rabbitmq\n- Module /xxx/infrastructure-live/prod/us-west-2/prod/services/internal-rabbitmq-3-11\n\nrandom_password.password: Refreshing state... [id=none]\nrandom_uuid.id: Refreshing state... [id=xxx]\nrandom_pet.username: Refreshing state... [id=xxx]\nrandom_pet.username: Refreshing state... [id=xxx]\nrandom_password.password: Refreshing state... [id=none]\nrandom_uuid.id: Refreshing state... [id=xxx]\nrandom_password.password: Refreshing state... [id=none]\nrandom_uuid.id: Refreshing state... [id=xxx]\nrandom_pet.username: Refreshing state... [id=xxx]\nrandom_uuid.id: Refreshing state... [id=xxx]\nrandom_pet.username: Refreshing state... [id=xxx]\nrandom_password.password: Refreshing state... [id=none]\naws_secretsmanager_secret.password[0]: Refreshing state... [id=xxx]\naws_secretsmanager_secret.username[0]: Refreshing state... [id=xxx]\naws_secretsmanager_secret.username[0]: Refreshing state... [id=xxx]\naws_secretsmanager_secret.username[0]: Refreshing state... [id=xxx]\naws_secretsmanager_secret.password[0]: Refreshing state... [id=axxx]\naws_secretsmanager_secret.password[0]: Refreshing state... [id=xxx]\naws_secretsmanager_secret.username[0]: Refreshing state... [id=xxx]\naws_secretsmanager_secret.password[0]: Refreshing state... [id=xxx]\naws_secretsmanager_secret_version.username[0]: Refreshing state... [id=xxx]\naws_secretsmanager_secret_version.password[0]: Refreshing state... [id=xxx]\naws_secretsmanager_secret_version.password[0]: Refreshing state... [id=xxx]\naws_secretsmanager_secret_version.username[0]: Refreshing state... [id=xxx]\naws_secretsmanager_secret_version.password[0]: Refreshing state... [id=xxx]\naws_secretsmanager_secret_version.username[0]: Refreshing state... [id=xxx]\naws_secretsmanager_secret_version.username[0]: Refreshing state... [id=xxx]\nmodule.rmq_sg.aws_security_group.this_name_prefix[0]: Refreshing state... [id=xxx]\nmodule.rmq_sg.aws_security_group.this_name_prefix[0]: Refreshing state... [id=xxx]\naws_secretsmanager_secret_version.password[0]: Refreshing state... [id=xxx]\nmodule.rmq_sg.aws_security_group.this_name_prefix[0]: Refreshing state... [id=xxx]\nmodule.rmq_sg.aws_security_group.this_name_prefix[0]: Refreshing state... [id=xxx]\nmodule.rmq_sg.aws_security_group_rule.ingress_with_self[0]: Refreshing state... [id=xxx]\nmodule.rmq_sg.aws_security_group_rule.ingress_with_cidr_blocks[0]: Refreshing state... [id=xxx]\nmodule.rmq_sg.aws_security_group_rule.ingress_with_cidr_blocks[1]: Refreshing state... [id=xxx]\nmodule.rmq_sg.aws_security_group_rule.ingress_with_cidr_blocks[2]: Refreshing state... [id=xxx]\naws_mq_broker.rmq: Refreshing state... [id=xxx]\nmodule.rmq_sg.aws_security_group_rule.ingress_with_source_security_group_id[0]: Refreshing state... [id=xxx]\nmodule.rmq_sg.aws_security_group_rule.ingress_with_source_security_group_id[2]: Refreshing state... [id=xxx]\nmodule.rmq_sg.aws_security_group_rule.ingress_with_source_security_group_id[1]: Refreshing state... [id=xxx]\nmodule.rmq_sg.aws_security_group_rule.ingress_with_source_security_group_id[2]: Refreshing state... [id=xxx]\naws_mq_broker.rmq: Refreshing state... [id=xxx]\nmodule.rmq_sg.aws_security_group_rule.ingress_with_source_security_group_id[0]: Refreshing state... [id=xxx]\nmodule.rmq_sg.aws_security_group_rule.ingress_with_self[0]: Refreshing state... [id=xxx]\nmodule.rmq_sg.aws_security_group_rule.ingress_with_source_security_group_id[1]: Refreshing state... [id=xxx]\nmodule.rmq_sg.aws_security_group_rule.ingress_with_cidr_blocks[0]: Refreshing state... [id=xxx]\nmodule.rmq_sg.aws_security_group_rule.ingress_with_cidr_blocks[2]: Refreshing state... [id=xxx]\nmodule.rmq_sg.aws_security_group_rule.ingress_with_cidr_blocks[1]: Refreshing state... [id=xxx]\nmodule.rmq_sg.aws_security_group_rule.ingress_with_cidr_blocks[1]: Refreshing state... [id=xxx]\nmodule.rmq_sg.aws_security_group_rule.ingress_with_source_security_group_id[0]: Refreshing state... [id=xxx]\nmodule.rmq_sg.aws_security_group_rule.ingress_with_source_security_group_id[2]: Refreshing state... [id=xxx]\naws_mq_broker.rmq: Refreshing state... [id=xxx]\nmodule.rmq_sg.aws_security_group_rule.ingress_with_cidr_blocks[0]: Refreshing state... [id=sxxx]\nmodule.rmq_sg.aws_security_group_rule.ingress_with_cidr_blocks[2]: Refreshing state... [id=xxx]\nmodule.rmq_sg.aws_security_group_rule.ingress_with_cidr_blocks[2]: Refreshing state... [id=xxx]\nmodule.rmq_sg.aws_security_group_rule.ingress_with_source_security_group_id[2]: Refreshing state... [id=xxx]\nmodule.rmq_sg.aws_security_group_rule.ingress_with_source_security_group_id[1]: Refreshing state... [id=xxx]\nmodule.rmq_sg.aws_security_group_rule.ingress_with_source_security_group_id[0]: Refreshing state... [id=xxx]\nmodule.rmq_sg.aws_security_group_rule.ingress_with_source_security_group_id[1]: Refreshing state... [id=xxx]\naws_mq_broker.rmq: Refreshing state... [id=xxx]\nmodule.rmq_sg.aws_security_group_rule.ingress_with_cidr_blocks[1]: Refreshing state... [id=xxx]\nmodule.rmq_sg.aws_security_group_rule.ingress_with_self[0]: Refreshing state... [id=xxx]\nmodule.rmq_sg.aws_security_group_rule.ingress_with_cidr_blocks[0]: Refreshing state... [id=xxx]\nmodule.rmq_sg.aws_security_group_rule.ingress_with_self[0]: Refreshing state... [id=xxx]\n\nNo changes. Your infrastructure matches the configuration.\n\nTerraform has compared your real infrastructure against your configuration\nand found no differences, so no changes are needed.\n\nNo changes. Your infrastructure matches the configuration.\n\nTerraform has compared your real infrastructure against your configuration\nand found no differences, so no changes are needed.\n\nNo changes. Your infrastructure matches the configuration.\n\nTerraform has compared your real infrastructure against your configuration\nand found no differences, so no changes are needed.\n\nNo changes. Your infrastructure matches the configuration.\n\nTerraform has compared your real infrastructure against your configuration\nand found no differences, so no changes are needed.\nReleasing state lock. This may take a few moments...\nReleasing state lock. This may take a few moments...\nReleasing state lock. This may take a few moments...\nReleasing state lock. This may take a few moments...\n</code></pre></div>\n<hr>\n<p dir=\"auto\"><code class=\"notranslate\">terragrunt_version=v0.50.16</code></p>\n<p dir=\"auto\">The <code class=\"notranslate\">gruntwork_installer</code> installs the following versions:</p>\n<ul dir=\"auto\">\n<li>GRUNTWORK_INSTALLER_VERSION: v0.0.38</li>\n<li>MODULE_CI_VERSION: v0.41.1</li>\n<li>MODULE_SECURITY_VERSION: v0.61.0</li>\n</ul>\n<p dir=\"auto\">The <code class=\"notranslate\">ecs-deploy-runner</code> container has the following versions:</p>\n<ul dir=\"auto\">\n<li>module_ci_tag=v0.52.14</li>\n<li>tfenv_version=v3.0.0</li>\n<li>terraform_version=1.5.5</li>\n<li>terragrunt_version=v0.50.16</li>\n<li>packer_version=1.7.4</li>\n<li>hcl2json_version=v0.5.0</li>\n</ul>\n<hr>\n<ins datetime=\"2023-09-15T00:18:49Z\">\n  <p dir=\"auto\"><a href=\"https://support.gruntwork.io/hc/requests/110445\" rel=\"nofollow\">Tracked in ticket #110445</a></p>\n</ins>","answer":{"body":"Hi,\r\nlooks like fail deployment of `internal-rabbitmq-3-11`, `error: [/tmp/tmp4802kcvv/infrastructure-live/prod/us-west-2/prod/services/rabbitmq-3-11] exit status 126`\r\n\r\nCan be attempted to run `infrastructure-deployer` with `--terragrunt-log-level debug` to see what is failing inside\r\n\r\n```\r\n[ecs-deploy-runner][2023-09-14T23:28:29+0000] time=2023-09-14T23:28:03Z level=error msg=Module /tmp/tmp4802kcvv/infrastructure-live/prod/us-west-2/prod/services/internal-rabbitmq has finished with an error: [/tmp/tmp4802kcvv/infrastructure-live/prod/us-west-2/prod/services/internal-rabbitmq] exit status 126 prefix=[/tmp/tmp4802kcvv/infrastructure-live/prod/us-west-2/prod/services/internal-rabbitmq]\r\n[ecs-deploy-runner][2023-09-14T23:28:29+0000] time=2023-09-14T23:28:03Z level=error msg=Module /tmp/tmp4802kcvv/infrastructure-live/prod/us-west-2/prod/services/internal-rabbitmq-3-11 has finished with an error: [/tmp/tmp4802kcvv/infrastructure-live/prod/us-west-2/prod/services/internal-rabbitmq-3-11] exit status 126 prefix=[/tmp/tmp4802kcvv/infrastructure-live/prod/us-west-2/prod/services/internal-rabbitmq-3-11]\r\n[ecs-deploy-runner][2023-09-14T23:28:29+0000] time=2023-09-14T23:28:03Z level=error msg=Module /tmp/tmp4802kcvv/infrastructure-live/prod/us-west-2/prod/services/rabbitmq-3-11 has finished with an error: [/tmp/tmp4802kcvv/infrastructure-live/prod/us-west-2/prod/services/rabbitmq-3-11] exit status 126 prefix=[/tmp/tmp4802kcvv/infrastructure-live/prod/us-west-2/prod/services/rabbitmq-3-11]\r\n[ecs-deploy-runner][2023-09-14T23:28:29+0000] time=2023-09-14T23:28:29Z level=error msg=3 errors occurred:\r\n[ecs-deploy-runner][2023-09-14T23:28:29+0000] \t* [/tmp/tmp4802kcvv/infrastructure-live/prod/us-west-2/prod/services/rabbitmq-3-11] exit status 126\r\n[ecs-deploy-runner][2023-09-14T23:28:29+0000] \t* [/tmp/tmp4802kcvv/infrastructure-live/prod/us-west-2/prod/services/internal-rabbitmq] exit status 126\r\n[ecs-deploy-runner][2023-09-14T23:28:29+0000] \t* [/tmp/tmp4802kcvv/infrastructure-live/prod/us-west-2/prod/services/internal-rabbitmq-3-11] exit status 126\r\n[ecs-deploy-runner][2023-09-14T23:28:29+0000] exit status 1\r\n```\r\n\r\n```\r\n\r\n```","bodyHTML":"<p dir=\"auto\">Hi,<br>\nlooks like fail deployment of <code class=\"notranslate\">internal-rabbitmq-3-11</code>, <code class=\"notranslate\">error: [/tmp/tmp4802kcvv/infrastructure-live/prod/us-west-2/prod/services/rabbitmq-3-11] exit status 126</code></p>\n<p dir=\"auto\">Can be attempted to run <code class=\"notranslate\">infrastructure-deployer</code> with <code class=\"notranslate\">--terragrunt-log-level debug</code> to see what is failing inside</p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"[ecs-deploy-runner][2023-09-14T23:28:29+0000] time=2023-09-14T23:28:03Z level=error msg=Module /tmp/tmp4802kcvv/infrastructure-live/prod/us-west-2/prod/services/internal-rabbitmq has finished with an error: [/tmp/tmp4802kcvv/infrastructure-live/prod/us-west-2/prod/services/internal-rabbitmq] exit status 126 prefix=[/tmp/tmp4802kcvv/infrastructure-live/prod/us-west-2/prod/services/internal-rabbitmq]\n[ecs-deploy-runner][2023-09-14T23:28:29+0000] time=2023-09-14T23:28:03Z level=error msg=Module /tmp/tmp4802kcvv/infrastructure-live/prod/us-west-2/prod/services/internal-rabbitmq-3-11 has finished with an error: [/tmp/tmp4802kcvv/infrastructure-live/prod/us-west-2/prod/services/internal-rabbitmq-3-11] exit status 126 prefix=[/tmp/tmp4802kcvv/infrastructure-live/prod/us-west-2/prod/services/internal-rabbitmq-3-11]\n[ecs-deploy-runner][2023-09-14T23:28:29+0000] time=2023-09-14T23:28:03Z level=error msg=Module /tmp/tmp4802kcvv/infrastructure-live/prod/us-west-2/prod/services/rabbitmq-3-11 has finished with an error: [/tmp/tmp4802kcvv/infrastructure-live/prod/us-west-2/prod/services/rabbitmq-3-11] exit status 126 prefix=[/tmp/tmp4802kcvv/infrastructure-live/prod/us-west-2/prod/services/rabbitmq-3-11]\n[ecs-deploy-runner][2023-09-14T23:28:29+0000] time=2023-09-14T23:28:29Z level=error msg=3 errors occurred:\n[ecs-deploy-runner][2023-09-14T23:28:29+0000] \t* [/tmp/tmp4802kcvv/infrastructure-live/prod/us-west-2/prod/services/rabbitmq-3-11] exit status 126\n[ecs-deploy-runner][2023-09-14T23:28:29+0000] \t* [/tmp/tmp4802kcvv/infrastructure-live/prod/us-west-2/prod/services/internal-rabbitmq] exit status 126\n[ecs-deploy-runner][2023-09-14T23:28:29+0000] \t* [/tmp/tmp4802kcvv/infrastructure-live/prod/us-west-2/prod/services/internal-rabbitmq-3-11] exit status 126\n[ecs-deploy-runner][2023-09-14T23:28:29+0000] exit status 1\"><pre class=\"notranslate\"><code class=\"notranslate\">[ecs-deploy-runner][2023-09-14T23:28:29+0000] time=2023-09-14T23:28:03Z level=error msg=Module /tmp/tmp4802kcvv/infrastructure-live/prod/us-west-2/prod/services/internal-rabbitmq has finished with an error: [/tmp/tmp4802kcvv/infrastructure-live/prod/us-west-2/prod/services/internal-rabbitmq] exit status 126 prefix=[/tmp/tmp4802kcvv/infrastructure-live/prod/us-west-2/prod/services/internal-rabbitmq]\n[ecs-deploy-runner][2023-09-14T23:28:29+0000] time=2023-09-14T23:28:03Z level=error msg=Module /tmp/tmp4802kcvv/infrastructure-live/prod/us-west-2/prod/services/internal-rabbitmq-3-11 has finished with an error: [/tmp/tmp4802kcvv/infrastructure-live/prod/us-west-2/prod/services/internal-rabbitmq-3-11] exit status 126 prefix=[/tmp/tmp4802kcvv/infrastructure-live/prod/us-west-2/prod/services/internal-rabbitmq-3-11]\n[ecs-deploy-runner][2023-09-14T23:28:29+0000] time=2023-09-14T23:28:03Z level=error msg=Module /tmp/tmp4802kcvv/infrastructure-live/prod/us-west-2/prod/services/rabbitmq-3-11 has finished with an error: [/tmp/tmp4802kcvv/infrastructure-live/prod/us-west-2/prod/services/rabbitmq-3-11] exit status 126 prefix=[/tmp/tmp4802kcvv/infrastructure-live/prod/us-west-2/prod/services/rabbitmq-3-11]\n[ecs-deploy-runner][2023-09-14T23:28:29+0000] time=2023-09-14T23:28:29Z level=error msg=3 errors occurred:\n[ecs-deploy-runner][2023-09-14T23:28:29+0000] \t* [/tmp/tmp4802kcvv/infrastructure-live/prod/us-west-2/prod/services/rabbitmq-3-11] exit status 126\n[ecs-deploy-runner][2023-09-14T23:28:29+0000] \t* [/tmp/tmp4802kcvv/infrastructure-live/prod/us-west-2/prod/services/internal-rabbitmq] exit status 126\n[ecs-deploy-runner][2023-09-14T23:28:29+0000] \t* [/tmp/tmp4802kcvv/infrastructure-live/prod/us-west-2/prod/services/internal-rabbitmq-3-11] exit status 126\n[ecs-deploy-runner][2023-09-14T23:28:29+0000] exit status 1\n</code></pre></div>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"\"><pre class=\"notranslate\"><code class=\"notranslate\">\n</code></pre></div>"}}} />

</CenterLayout>
  

<!-- ##DOCS-SOURCER-START
{
  "sourcePlugin": "github-discussions",
  "hash": "bc96bc1794376445d512eee6a95f680d"
}
##DOCS-SOURCER-END -->
