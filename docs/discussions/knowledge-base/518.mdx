---
hide_table_of_contents: true
hide_title: true
custom_edit_url: null
---

import CenterLayout from "/src/components/CenterLayout"
import GitHub from "/src/components/GitHub"

<CenterLayout>
<span className="searchCategory">Knowledge Base</span>
<h1>How the generate bock get parsed ?</h1>
<GitHub discussion={{"id":"D_kwDOF8slf84AQMQq","number":518,"author":{"login":"nvanheuverzwijn"},"title":"How the generate bock get parsed ?","body":"\nHi,\r\n\r\nI have a fairly technical question about terragrunt. I am currently playing with it and I noticed a behavior that I am not sure if it is intended or not.\r\n\r\nSo I have this terragrunt file. I am not going to post it all, just the relevant part.\r\n```\r\nlocals {\r\n  project_id    = \"my-cool-project\"\r\n}\r\n\r\ngenerate \"main_providers\" {\r\n  path      = \"0001-providers.tf\"\r\n  if_exists = \"overwrite\"\r\n  contents  = <<EOF\r\nprovider \"google\" {\r\n  project = local.project_id\r\n}\r\nEOF\r\n}\r\n```\r\nWhen I use a file like that, I get this error :\r\n```\r\n│ Error: Reference to undeclared local value\r\n│\r\n│   on 0001-providers.tf line 3, in provider \"google\":\r\n│    3:   project = local.project_id\r\n│\r\n│ A local value with the name \"project_id\" has not been declared.\r\n```\r\nWhich make kind of sense, local.project_id does not exist yet when terragrunt parse it. However, if I change the offending line from `local.project_id` to `\"${local.project_id}\"`, the file correctly get generated using the local variable value.\r\n\r\nIs this an intended behavior and is it documented somewhere ?\r\n\r\nThanks!\n\n---\n\n<ins datetime=\"2022-07-25T17:19:56Z\">\n  <p><a href=\"https://support.gruntwork.io/hc/requests/109050\">Tracked in ticket #109050</a></p>\n</ins>\n","bodyHTML":"<p dir=\"auto\">Hi,</p>\n<p dir=\"auto\">I have a fairly technical question about terragrunt. I am currently playing with it and I noticed a behavior that I am not sure if it is intended or not.</p>\n<p dir=\"auto\">So I have this terragrunt file. I am not going to post it all, just the relevant part.</p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"locals {\n  project_id    = &quot;my-cool-project&quot;\n}\n\ngenerate &quot;main_providers&quot; {\n  path      = &quot;0001-providers.tf&quot;\n  if_exists = &quot;overwrite&quot;\n  contents  = &lt;&lt;EOF\nprovider &quot;google&quot; {\n  project = local.project_id\n}\nEOF\n}\"><pre class=\"notranslate\"><code>locals {\n  project_id    = \"my-cool-project\"\n}\n\ngenerate \"main_providers\" {\n  path      = \"0001-providers.tf\"\n  if_exists = \"overwrite\"\n  contents  = &lt;&lt;EOF\nprovider \"google\" {\n  project = local.project_id\n}\nEOF\n}\n</code></pre></div>\n<p dir=\"auto\">When I use a file like that, I get this error :</p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"│ Error: Reference to undeclared local value\n│\n│   on 0001-providers.tf line 3, in provider &quot;google&quot;:\n│    3:   project = local.project_id\n│\n│ A local value with the name &quot;project_id&quot; has not been declared.\"><pre class=\"notranslate\"><code>│ Error: Reference to undeclared local value\n│\n│   on 0001-providers.tf line 3, in provider \"google\":\n│    3:   project = local.project_id\n│\n│ A local value with the name \"project_id\" has not been declared.\n</code></pre></div>\n<p dir=\"auto\">Which make kind of sense, local.project_id does not exist yet when terragrunt parse it. However, if I change the offending line from <code class=\"notranslate\">local.project_id</code> to <code class=\"notranslate\">\"${local.project_id}\"</code>, the file correctly get generated using the local variable value.</p>\n<p dir=\"auto\">Is this an intended behavior and is it documented somewhere ?</p>\n<p dir=\"auto\">Thanks!</p>\n<hr>\n<ins datetime=\"2022-07-25T17:19:56Z\">\n  <p dir=\"auto\"><a href=\"https://support.gruntwork.io/hc/requests/109050\" rel=\"nofollow\">Tracked in ticket #109050</a></p>\n</ins>","answer":{"body":"This is intended behavior. It's sort of documented in that the `contents` is interpreted as a `string`, and in HCL, you need to interpolate values with `${}` to have it render values available in the `terragrunt` context. So it's more a feature/quirk of the HCL language and not necessarily specific to Terragrunt. But I can totally see that being confusing to beginners of Terragrunt.\r\n\r\nIf you have a suggestion on where it would make the most sense to highlight this in the Terragrunt docs, we can definitely update it to include some information about the templating aspects of `generate`!","bodyHTML":"<p dir=\"auto\">This is intended behavior. It's sort of documented in that the <code class=\"notranslate\">contents</code> is interpreted as a <code class=\"notranslate\">string</code>, and in HCL, you need to interpolate values with <code class=\"notranslate\">${}</code> to have it render values available in the <code class=\"notranslate\">terragrunt</code> context. So it's more a feature/quirk of the HCL language and not necessarily specific to Terragrunt. But I can totally see that being confusing to beginners of Terragrunt.</p>\n<p dir=\"auto\">If you have a suggestion on where it would make the most sense to highlight this in the Terragrunt docs, we can definitely update it to include some information about the templating aspects of <code class=\"notranslate\">generate</code>!</p>"}}} />

</CenterLayout>
  

<!-- ##DOCS-SOURCER-START
{
  "sourcePlugin": "github-discussions",
  "hash": "4fe790d9d100151c85ee77fa1bf1749f"
}
##DOCS-SOURCER-END -->
