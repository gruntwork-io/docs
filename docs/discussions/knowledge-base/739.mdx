---
hide_table_of_contents: true
hide_title: true
custom_edit_url: null
---

import CenterLayout from "/src/components/CenterLayout"
import GitHub from "/src/components/GitHub"

<head>
  <link rel="canonical" href="https://github.com/gruntwork-io/knowledge-base/discussions/739" />
</head>

<CenterLayout>
<span className="searchCategory">Knowledge Base</span>
<h1>run-all plan always reports &apos;Error: Backend initialization required&apos;</h1>
<GitHub discussion={{"id":"D_kwDOF8slf84AUOco","number":739,"author":{"login":"neilhwatson"},"title":"run-all plan always reports 'Error: Backend initialization required'","body":"\nHello. I have a simple setup of one root module calling one local module and two environments.\r\n\r\n```\r\n./terragrunt.hcl\r\n./env1/terragrunt.hcl\r\n./env2/terragrutn.hcl\r\n```\r\n\r\nenv1 works fine with run-all. env2 plan always returns `Error: Backend initialization required, please run \"terraform init\"` even after running run-all init successfully. Even after removing `.terraform.lock.hcl` and `.terragrunt-cache` and running run-all init successfully. I'm using terragrunt 0.46.3 and terraform 1.4.6. What might the problem be?\r\n\r\n```\r\n$ cat terragrunt.hcl\r\nterraform {\r\n  before_hook \"before_hook\" {\r\n    commands = [\"apply\", \"plan\", \"validate\"]\r\n    execute  = [\"tflint\", \"--minimum-failure-severity=error\", \"--config\", \"${get_path_to_repo_root()}/.tflint.hcl\"]\r\n  }\r\n}\r\n\r\ngenerate \"provider\" {\r\n  path      = \"provider.tf\"\r\n  if_exists = \"overwrite\"\r\n  contents  = <<EOF\r\nprovider \"azurerm\" {\r\n  features {}\r\n  subscription_id = \"xxxxxxxxx\"\r\n}\r\nEOF\r\n}\r\n\r\nremote_state {\r\n  backend      = \"s3\"\r\n  disable_init = true # Bucket is managed by another terraform root-module\r\n  # disable_dependency_optimization = true\r\n  config = {\r\n    bucket         = \"prod-azure-ece01-tf-state\"\r\n    dynamodb_table = \"prod-azure-ece01-tf-state\"\r\n    region         = \"eu-west-1\"\r\n    role_arn       = \"arn:aws:iam::xxxxxxxxx:role/OperatorAccess\"\r\n    encrypt        = true\r\n    profile        = \"terraform\"\r\n    key            = \"${path_relative_to_include()}\"\r\n    s3_bucket_tags = {\r\n      owner      = \"sre\"\r\n      maintainer = \"terraform\"\r\n      purpose    = \"ece environments\"\r\n      repo       = \"https://github.com/xxxxxxx\"\r\n    }\r\n  }\r\n  generate = {\r\n    path      = \"backend.tf\"\r\n    if_exists = \"overwrite\"\r\n  }\r\n}\r\n```\r\n\r\n```\r\ncat env2/terragrunt.hcl\r\ninclude \"dev\" {\r\n  path = find_in_parent_folders()\r\n}\r\n\r\nterraform {\r\n  source = \"../..//root-modules/ece_env\"\r\n}\r\n\r\ninputs = {\r\n ....\r\n}\r\n```\n\n---\n\n<ins datetime=\"2023-06-15T13:53:02Z\">\n  <p><a href=\"https://support.gruntwork.io/hc/requests/110258\">Tracked in ticket #110258</a></p>\n</ins>\n","bodyHTML":"<p dir=\"auto\">Hello. I have a simple setup of one root module calling one local module and two environments.</p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"./terragrunt.hcl\n./env1/terragrunt.hcl\n./env2/terragrutn.hcl\"><pre class=\"notranslate\"><code class=\"notranslate\">./terragrunt.hcl\n./env1/terragrunt.hcl\n./env2/terragrutn.hcl\n</code></pre></div>\n<p dir=\"auto\">env1 works fine with run-all. env2 plan always returns <code class=\"notranslate\">Error: Backend initialization required, please run \"terraform init\"</code> even after running run-all init successfully. Even after removing <code class=\"notranslate\">.terraform.lock.hcl</code> and <code class=\"notranslate\">.terragrunt-cache</code> and running run-all init successfully. I'm using terragrunt 0.46.3 and terraform 1.4.6. What might the problem be?</p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"$ cat terragrunt.hcl\nterraform {\n  before_hook &quot;before_hook&quot; {\n    commands = [&quot;apply&quot;, &quot;plan&quot;, &quot;validate&quot;]\n    execute  = [&quot;tflint&quot;, &quot;--minimum-failure-severity=error&quot;, &quot;--config&quot;, &quot;${get_path_to_repo_root()}/.tflint.hcl&quot;]\n  }\n}\n\ngenerate &quot;provider&quot; {\n  path      = &quot;provider.tf&quot;\n  if_exists = &quot;overwrite&quot;\n  contents  = &lt;&lt;EOF\nprovider &quot;azurerm&quot; {\n  features {}\n  subscription_id = &quot;xxxxxxxxx&quot;\n}\nEOF\n}\n\nremote_state {\n  backend      = &quot;s3&quot;\n  disable_init = true # Bucket is managed by another terraform root-module\n  # disable_dependency_optimization = true\n  config = {\n    bucket         = &quot;prod-azure-ece01-tf-state&quot;\n    dynamodb_table = &quot;prod-azure-ece01-tf-state&quot;\n    region         = &quot;eu-west-1&quot;\n    role_arn       = &quot;arn:aws:iam::xxxxxxxxx:role/OperatorAccess&quot;\n    encrypt        = true\n    profile        = &quot;terraform&quot;\n    key            = &quot;${path_relative_to_include()}&quot;\n    s3_bucket_tags = {\n      owner      = &quot;sre&quot;\n      maintainer = &quot;terraform&quot;\n      purpose    = &quot;ece environments&quot;\n      repo       = &quot;https://github.com/xxxxxxx&quot;\n    }\n  }\n  generate = {\n    path      = &quot;backend.tf&quot;\n    if_exists = &quot;overwrite&quot;\n  }\n}\"><pre class=\"notranslate\"><code class=\"notranslate\">$ cat terragrunt.hcl\nterraform {\n  before_hook \"before_hook\" {\n    commands = [\"apply\", \"plan\", \"validate\"]\n    execute  = [\"tflint\", \"--minimum-failure-severity=error\", \"--config\", \"${get_path_to_repo_root()}/.tflint.hcl\"]\n  }\n}\n\ngenerate \"provider\" {\n  path      = \"provider.tf\"\n  if_exists = \"overwrite\"\n  contents  = &lt;&lt;EOF\nprovider \"azurerm\" {\n  features {}\n  subscription_id = \"xxxxxxxxx\"\n}\nEOF\n}\n\nremote_state {\n  backend      = \"s3\"\n  disable_init = true # Bucket is managed by another terraform root-module\n  # disable_dependency_optimization = true\n  config = {\n    bucket         = \"prod-azure-ece01-tf-state\"\n    dynamodb_table = \"prod-azure-ece01-tf-state\"\n    region         = \"eu-west-1\"\n    role_arn       = \"arn:aws:iam::xxxxxxxxx:role/OperatorAccess\"\n    encrypt        = true\n    profile        = \"terraform\"\n    key            = \"${path_relative_to_include()}\"\n    s3_bucket_tags = {\n      owner      = \"sre\"\n      maintainer = \"terraform\"\n      purpose    = \"ece environments\"\n      repo       = \"https://github.com/xxxxxxx\"\n    }\n  }\n  generate = {\n    path      = \"backend.tf\"\n    if_exists = \"overwrite\"\n  }\n}\n</code></pre></div>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"cat env2/terragrunt.hcl\ninclude &quot;dev&quot; {\n  path = find_in_parent_folders()\n}\n\nterraform {\n  source = &quot;../..//root-modules/ece_env&quot;\n}\n\ninputs = {\n ....\n}\"><pre class=\"notranslate\"><code class=\"notranslate\">cat env2/terragrunt.hcl\ninclude \"dev\" {\n  path = find_in_parent_folders()\n}\n\nterraform {\n  source = \"../..//root-modules/ece_env\"\n}\n\ninputs = {\n ....\n}\n</code></pre></div>\n<hr>\n<ins datetime=\"2023-06-15T13:53:02Z\">\n  <p dir=\"auto\"><a href=\"https://support.gruntwork.io/hc/requests/110258\" rel=\"nofollow\">Tracked in ticket #110258</a></p>\n</ins>","answer":{"body":"From this bug https://github.com/gruntwork-io/terragrunt/issues/1422 it seems that `disable_init` means both don't generate the backend bucket *and* don't generate the state file in the bucket. Indeed if I set this to false (the default) I don't have the OP problem. I don't feel this setting should do what it does.","bodyHTML":"<p dir=\"auto\">From this bug <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"741081782\" data-permission-text=\"Title is private\" data-url=\"https://github.com/gruntwork-io/terragrunt/issues/1422\" data-hovercard-type=\"issue\" data-hovercard-url=\"/gruntwork-io/terragrunt/issues/1422/hovercard\" href=\"https://github.com/gruntwork-io/terragrunt/issues/1422\">gruntwork-io/terragrunt#1422</a> it seems that <code class=\"notranslate\">disable_init</code> means both don't generate the backend bucket <em>and</em> don't generate the state file in the bucket. Indeed if I set this to false (the default) I don't have the OP problem. I don't feel this setting should do what it does.</p>"}}} />

</CenterLayout>

<!-- ##DOCS-SOURCER-START
{
  "sourcePlugin": "github-discussions",
  "hash": "793755b6f0d582e7ec3e65f5a7b30e89"
}
##DOCS-SOURCER-END -->
