---
hide_table_of_contents: true
hide_title: true
custom_edit_url: null
---

import CenterLayout from "/src/components/CenterLayout"
import GitHub from "/src/components/GitHub"

<head>
  <link rel="canonical" href="https://github.com/gruntwork-io/knowledge-base/discussions/522" />
</head>

<CenterLayout>
<span className="searchCategory">Knowledge Base</span>
<h1>How do I destroy a single module in the Ref Arch with Terragrunt?</h1>
<GitHub discussion={{"id":"D_kwDOF8slf84AQP4N","number":522,"author":{"login":"zackproser"},"title":"How do I destroy a single module in the Ref Arch with Terragrunt?","body":"\nA customer asked: \r\n> How do I destroy a single module in the Ref Arch with Terragrunt?\n\n---\n\n<ins datetime=\"2022-07-28T17:00:42Z\">\n  <p><a href=\"https://support.gruntwork.io/hc/requests/109073\">Tracked in ticket #109073</a></p>\n</ins>\n","bodyHTML":"<p dir=\"auto\">A customer asked:</p>\n<blockquote>\n<p dir=\"auto\">How do I destroy a single module in the Ref Arch with Terragrunt?</p>\n</blockquote>\n<hr>\n<ins datetime=\"2022-07-28T17:00:42Z\">\n  <p dir=\"auto\"><a href=\"https://support.gruntwork.io/hc/requests/109073\" rel=\"nofollow\">Tracked in ticket #109073</a></p>\n</ins>","answer":{"body":"You can use `terragrunt destroy` with the `-target` option to specify a particular module whose resources you wish to destroy. \r\n\r\nFor example, let's say you have a deployed CIS-Benchmark compliant Gruntwork Reference Architecture and you wish to destroy only the [Cloudtrail module's](https://github.com/gruntwork-io/terraform-aws-cis-service-catalog/blob/1e259bb978b3565464f042a379a255c344022ffa/modules/observability/cloudtrail/main.tf#L67) benchmark_metric_filters` module, which looks like this: \r\n\r\n```hcl\r\n# -----------------------------------------------------------------------------------------------\r\n# CREATE LOG FILTERS FOR ALERTING\r\n# -----------------------------------------------------------------------------------------------\r\n\r\nmodule \"benchmark_metric_filters\" {\r\n  source = \"../cloudwatch-logs-metric-filters\"\r\n\r\n  cloudwatch_logs_group_name  = module.cloudtrail.cloudwatch_group_name\r\n  custom_metric_map           = var.benchmark_alarm_custom_metric_map\r\n  sns_topic_already_exists    = var.benchmark_alarm_sns_topic_already_exists\r\n  sns_topic_arn               = var.benchmark_alarm_sns_topic_arn\r\n  sns_topic_name              = var.benchmark_alarm_sns_topic_name\r\n  sns_topic_kms_master_key_id = var.benchmark_alarm_sns_topic_kms_master_key_id\r\n  is_root_account             = var.is_root_account\r\n}\r\n```\r\n\r\nYou would first `cd` into the `account-baseline` directory for your target environment. Let's start with the logs environment / account: \r\n\r\n`cd logs/_global/account-baseline`\r\n\r\n`terragrunt destroy -target module.cloudtrail.module.benchmark_metric_filters`\r\n\r\nWhen prompted for confirmation, enter `yes`: \r\n\r\n```bash\r\nDo you really want to destroy all resources?\r\n  Terraform will destroy all your managed infrastructure, as shown above.\r\n  There is no undo. Only 'yes' will be accepted to confirm.\r\n\r\n  Enter a value: yes\r\n```\r\n\r\nNote that you'll receive the following warning after destruction of your resources is complete: \r\n\r\n```bash \r\n╷\r\n│ Warning: Applied changes may be incomplete\r\n│\r\n│ The plan was created with the -target option in effect, so some changes\r\n│ requested in the configuration may have been ignored and the output values\r\n│ may not be fully updated. Run the following command to verify that no other\r\n│ changes are pending:\r\n│     terraform plan\r\n│\r\n│ Note that the -target option is not suitable for routine use, and is\r\n│ provided only for exceptional situations such as recovering from errors or\r\n│ mistakes, or when Terraform specifically suggests to use it as part of an\r\n│ error message.\r\n╵\r\n\r\nNote that, if your Ref Arch is configured with Gruntwork Pipelines for CI/CD, changes that you make via `terragrunt destroy -target` will be overwritten on subsequent applies. That said, it can still be useful in edge cases to be able to temporarily tear down a group of resources. \r\n\r\n```","bodyHTML":"<p dir=\"auto\">You can use <code class=\"notranslate\">terragrunt destroy</code> with the <code class=\"notranslate\">-target</code> option to specify a particular module whose resources you wish to destroy.</p>\n<p dir=\"auto\">For example, let's say you have a deployed CIS-Benchmark compliant Gruntwork Reference Architecture and you wish to destroy only the <a href=\"https://github.com/gruntwork-io/terraform-aws-cis-service-catalog/blob/1e259bb978b3565464f042a379a255c344022ffa/modules/observability/cloudtrail/main.tf#L67\">Cloudtrail module's</a> benchmark_metric_filters` module, which looks like this:</p>\n<div class=\"highlight highlight-source-hcl notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"# -----------------------------------------------------------------------------------------------\n# CREATE LOG FILTERS FOR ALERTING\n# -----------------------------------------------------------------------------------------------\n\nmodule &quot;benchmark_metric_filters&quot; {\n  source = &quot;../cloudwatch-logs-metric-filters&quot;\n\n  cloudwatch_logs_group_name  = module.cloudtrail.cloudwatch_group_name\n  custom_metric_map           = var.benchmark_alarm_custom_metric_map\n  sns_topic_already_exists    = var.benchmark_alarm_sns_topic_already_exists\n  sns_topic_arn               = var.benchmark_alarm_sns_topic_arn\n  sns_topic_name              = var.benchmark_alarm_sns_topic_name\n  sns_topic_kms_master_key_id = var.benchmark_alarm_sns_topic_kms_master_key_id\n  is_root_account             = var.is_root_account\n}\"><pre class=\"notranslate\"><span class=\"pl-c\"><span class=\"pl-c\">#</span> -----------------------------------------------------------------------------------------------<span class=\"pl-c\"></span></span>\n<span class=\"pl-c\"><span class=\"pl-c\">#</span> CREATE LOG FILTERS FOR ALERTING<span class=\"pl-c\"></span></span>\n<span class=\"pl-c\"><span class=\"pl-c\">#</span> -----------------------------------------------------------------------------------------------<span class=\"pl-c\"></span></span>\n\n<span class=\"pl-en\">module</span> <span class=\"pl-smi\">\"benchmark_metric_filters\"</span> {\n  <span class=\"pl-v\"><span class=\"pl-smi\">source</span> <span class=\"pl-k\">=</span> </span><span class=\"pl-s\"><span class=\"pl-pds\">\"</span>../cloudwatch-logs-metric-filters<span class=\"pl-pds\">\"</span></span>\n\n  <span class=\"pl-v\"><span class=\"pl-smi\">cloudwatch_logs_group_name</span>  <span class=\"pl-k\">=</span> </span>module<span class=\"pl-k\">.</span><span class=\"pl-smi\">cloudtrail</span><span class=\"pl-k\">.</span><span class=\"pl-smi\">cloudwatch_group_name</span>\n  <span class=\"pl-v\"><span class=\"pl-smi\">custom_metric_map</span>           <span class=\"pl-k\">=</span> </span>var<span class=\"pl-k\">.</span><span class=\"pl-smi\">benchmark_alarm_custom_metric_map</span>\n  <span class=\"pl-v\"><span class=\"pl-smi\">sns_topic_already_exists</span>    <span class=\"pl-k\">=</span> </span>var<span class=\"pl-k\">.</span><span class=\"pl-smi\">benchmark_alarm_sns_topic_already_exists</span>\n  <span class=\"pl-v\"><span class=\"pl-smi\">sns_topic_arn</span>               <span class=\"pl-k\">=</span> </span>var<span class=\"pl-k\">.</span><span class=\"pl-smi\">benchmark_alarm_sns_topic_arn</span>\n  <span class=\"pl-v\"><span class=\"pl-smi\">sns_topic_name</span>              <span class=\"pl-k\">=</span> </span>var<span class=\"pl-k\">.</span><span class=\"pl-smi\">benchmark_alarm_sns_topic_name</span>\n  <span class=\"pl-v\"><span class=\"pl-smi\">sns_topic_kms_master_key_id</span> <span class=\"pl-k\">=</span> </span>var<span class=\"pl-k\">.</span><span class=\"pl-smi\">benchmark_alarm_sns_topic_kms_master_key_id</span>\n  <span class=\"pl-v\"><span class=\"pl-smi\">is_root_account</span>             <span class=\"pl-k\">=</span> </span>var<span class=\"pl-k\">.</span><span class=\"pl-smi\">is_root_account</span>\n}</pre></div>\n<p dir=\"auto\">You would first <code class=\"notranslate\">cd</code> into the <code class=\"notranslate\">account-baseline</code> directory for your target environment. Let's start with the logs environment / account:</p>\n<p dir=\"auto\"><code class=\"notranslate\">cd logs/_global/account-baseline</code></p>\n<p dir=\"auto\"><code class=\"notranslate\">terragrunt destroy -target module.cloudtrail.module.benchmark_metric_filters</code></p>\n<p dir=\"auto\">When prompted for confirmation, enter <code class=\"notranslate\">yes</code>:</p>\n<div class=\"highlight highlight-source-shell notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"Do you really want to destroy all resources?\n  Terraform will destroy all your managed infrastructure, as shown above.\n  There is no undo. Only 'yes' will be accepted to confirm.\n\n  Enter a value: yes\"><pre class=\"notranslate\">Do you really want to destroy all resources<span class=\"pl-k\">?</span>\n  Terraform will destroy all your managed infrastructure, as shown above.\n  There is no undo. Only <span class=\"pl-s\"><span class=\"pl-pds\">'</span>yes<span class=\"pl-pds\">'</span></span> will be accepted to confirm.\n\n  Enter a value: yes</pre></div>\n<p dir=\"auto\">Note that you'll receive the following warning after destruction of your resources is complete:</p>\n<div class=\"highlight highlight-source-shell notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"╷\n│ Warning: Applied changes may be incomplete\n│\n│ The plan was created with the -target option in effect, so some changes\n│ requested in the configuration may have been ignored and the output values\n│ may not be fully updated. Run the following command to verify that no other\n│ changes are pending:\n│     terraform plan\n│\n│ Note that the -target option is not suitable for routine use, and is\n│ provided only for exceptional situations such as recovering from errors or\n│ mistakes, or when Terraform specifically suggests to use it as part of an\n│ error message.\n╵\n\nNote that, if your Ref Arch is configured with Gruntwork Pipelines for CI/CD, changes that you make via `terragrunt destroy -target` will be overwritten on subsequent applies. That said, it can still be useful in edge cases to be able to temporarily tear down a group of resources. \n\"><pre class=\"notranslate\">╷\n│ Warning: Applied changes may be incomplete\n│\n│ The plan was created with the -target option <span class=\"pl-k\">in</span> effect, so some changes\n│ requested <span class=\"pl-k\">in</span> the configuration may have been ignored and the output values\n│ may not be fully updated. Run the following <span class=\"pl-c1\">command</span> to verify that no other\n│ changes are pending:\n│     terraform plan\n│\n│ Note that the -target option is not suitable <span class=\"pl-k\">for</span> routine use, and is\n│ provided only <span class=\"pl-k\">for</span> exceptional situations such as recovering from errors or\n│ mistakes, or when Terraform specifically suggests to use it as part of an\n│ error message.\n╵\n\nNote that, <span class=\"pl-k\">if</span> your Ref Arch is configured with Gruntwork Pipelines <span class=\"pl-k\">for</span> <span class=\"pl-smi\">CI/CD, changes that you make via `terragrunt destroy -target` will be overwritten on subsequent applies. That said, it can still be useful</span> <span class=\"pl-k\">in</span> edge cases to be able to temporarily tear down a group of resources. \n</pre></div>"}}} />

</CenterLayout>

<!-- ##DOCS-SOURCER-START
{
  "sourcePlugin": "github-discussions",
  "hash": "87cbc5c9aa8a71fc829cb2e9579aa11f"
}
##DOCS-SOURCER-END -->
