---
hide_table_of_contents: true
hide_title: true
custom_edit_url: null
---

import CenterLayout from "/src/components/CenterLayout"
import GitHub from "/src/components/GitHub"

<head>
  <link rel="canonical" href="https://github.com/gruntwork-io/knowledge-base/discussions/539" />
</head>

<CenterLayout>
<span className="searchCategory">Knowledge Base</span>
<h1>Terratest as acceptance test framework in provider development</h1>
<GitHub discussion={{"id":"D_kwDOF8slf84AQdfB","number":539,"author":{"login":"SoorajBharadwaj07"},"title":"Terratest as acceptance test framework in provider development","body":"\nHi Team,\r\n\r\nWe are in a process of developing terraform provider for one of our internal products and plan to publish the provider to terraform registry. We are using terraform's latest plugin framework and we do not find any acceptance framework available in it. So we are planning to use terratest as our acceptance test framework.\r\n Could you please let us know if there are any restrictions in using terratest as acceptance framework for the providers to be published in terraform registry? Also it would be very helpful if we could get references of any providers published in terraform registry using terratest as the acceptance framework.\r\n \r\n Thanks in advance,\r\nSooraj\n\n---\n\n<ins datetime=\"2022-08-18T15:14:02Z\">\n  <p><a href=\"https://support.gruntwork.io/hc/requests/109145\">Tracked in ticket #109145</a></p>\n</ins>\n","bodyHTML":"<p dir=\"auto\">Hi Team,</p>\n<p dir=\"auto\">We are in a process of developing terraform provider for one of our internal products and plan to publish the provider to terraform registry. We are using terraform's latest plugin framework and we do not find any acceptance framework available in it. So we are planning to use terratest as our acceptance test framework.<br>\nCould you please let us know if there are any restrictions in using terratest as acceptance framework for the providers to be published in terraform registry? Also it would be very helpful if we could get references of any providers published in terraform registry using terratest as the acceptance framework.</p>\n<p dir=\"auto\">Thanks in advance,<br>\nSooraj</p>\n<hr>\n<ins datetime=\"2022-08-18T15:14:02Z\">\n  <p dir=\"auto\"><a href=\"https://support.gruntwork.io/hc/requests/109145\" rel=\"nofollow\">Tracked in ticket #109145</a></p>\n</ins>","answer":{"body":"As far as I know, none of the providers rely on Terratest for provider testing, as Terratest is more optimized for Terraform module testing. We don't offer first class support for provider acceptance testing, so you might find it rather limiting if you try to go down this route. That is, Terratest doesn't offer setup and teardown functions that spawn an in-dev provider - it relies on `terraform init` to pull down the providers, so you would need to write the test code that builds and installs the provider in a way that `terraform` can find it, which is an awkward setup process for provider testing.\r\n\r\nAs an alternative...\r\n\r\n> We are using terraform's latest plugin framework and we do not find any acceptance framework available in it\r\n\r\nIt's not well documented, but `terraform-plugin-sdk` does indeed have a framework for writing acceptance tests (the [helper/resource](https://github.com/hashicorp/terraform-plugin-sdk/tree/main/helper/resource) package). Here is a [simple example](https://github.com/hashicorp/terraform-provider-aws/blob/main/internal/service/sts/caller_identity_data_source_test.go) in the AWS Provider that uses that framework.\r\n\r\nI would recommend using the official framework for writing the provider tests, as the community is more used to using those framework for testing, and it maintains consistency [with the official documentation on testing providers](https://www.terraform.io/plugin/sdkv2/testing).\r\n\r\nUsing the official SDK as a framework, you could however consider using Terratest for the other aspects of testing, like validating the deployed resource within the provider acceptance testing framework (if you find it useful).\r\n","bodyHTML":"<p dir=\"auto\">As far as I know, none of the providers rely on Terratest for provider testing, as Terratest is more optimized for Terraform module testing. We don't offer first class support for provider acceptance testing, so you might find it rather limiting if you try to go down this route. That is, Terratest doesn't offer setup and teardown functions that spawn an in-dev provider - it relies on <code class=\"notranslate\">terraform init</code> to pull down the providers, so you would need to write the test code that builds and installs the provider in a way that <code class=\"notranslate\">terraform</code> can find it, which is an awkward setup process for provider testing.</p>\n<p dir=\"auto\">As an alternative...</p>\n<blockquote>\n<p dir=\"auto\">We are using terraform's latest plugin framework and we do not find any acceptance framework available in it</p>\n</blockquote>\n<p dir=\"auto\">It's not well documented, but <code class=\"notranslate\">terraform-plugin-sdk</code> does indeed have a framework for writing acceptance tests (the <a href=\"https://github.com/hashicorp/terraform-plugin-sdk/tree/main/helper/resource\">helper/resource</a> package). Here is a <a href=\"https://github.com/hashicorp/terraform-provider-aws/blob/main/internal/service/sts/caller_identity_data_source_test.go\">simple example</a> in the AWS Provider that uses that framework.</p>\n<p dir=\"auto\">I would recommend using the official framework for writing the provider tests, as the community is more used to using those framework for testing, and it maintains consistency <a href=\"https://www.terraform.io/plugin/sdkv2/testing\" rel=\"nofollow\">with the official documentation on testing providers</a>.</p>\n<p dir=\"auto\">Using the official SDK as a framework, you could however consider using Terratest for the other aspects of testing, like validating the deployed resource within the provider acceptance testing framework (if you find it useful).</p>"}}} />

</CenterLayout>

<!-- ##DOCS-SOURCER-START
{
  "sourcePlugin": "github-discussions",
  "hash": "2f27fed50496cc600ebc81c005c14f31"
}
##DOCS-SOURCER-END -->
