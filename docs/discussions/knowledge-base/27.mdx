---
hide_table_of_contents: true
hide_title: true
custom_edit_url: null
---

import CenterLayout from "/src/components/CenterLayout"
import GitHub from "/src/components/GitHub"

<head>
  <link rel="canonical" href="https://github.com/gruntwork-io/knowledge-base/discussions/27" />
</head>

<CenterLayout>
<span className="searchCategory">Knowledge Base</span>
<h1>How to deploy multiple containers on ECS?</h1>
<GitHub discussion={{"id":"MDEwOkRpc2N1c3Npb24zNTU0ODk3","number":27,"author":{"login":"gruntwork-support"},"title":"How to deploy multiple containers on ECS?","body":"_This message was extracted from a discussion that originally took place in Gruntwork Community Slack. Names and URLs have been removed where appropriate_\n\n\n**From a customer**\n\nHi,\n\nFor deploying to AWS ECS, we are using `/modules/ecs-service-with-alb?ref=v0.10.1` with the container definition attached below. This works for our own application because our app runs in a single docker container. However, we are experimenting with a 3rd party application that runs with docker-compose (4-5 containers). How can we deploy such an application stack to AWS ECS? Do we need a different module? Or if we can use different task definitions with the same module?\n\nThanks.\n\n```\n[\n  {\n    \"name\": \"${container_name}\",\n    \"image\": \"${image}:${version}\",\n    \"cpu\": ${cpu},\n    \"memory\": ${memory},\n    \"essential\": true,\n    \"portMappings\": ${port_mappings},\n    \"environment\": ${env_vars},\n    \"logConfiguration\": {\n      \"logDriver\": \"syslog\",\n      \"options\": {\n        \"tag\": \"${container_name} ({{.ID}})\"\n      }\n    }\n  }\n]\n```","bodyHTML":"<p dir=\"auto\"><em>This message was extracted from a discussion that originally took place in Gruntwork Community Slack. Names and URLs have been removed where appropriate</em></p>\n<p dir=\"auto\"><strong>From a customer</strong></p>\n<p dir=\"auto\">Hi,</p>\n<p dir=\"auto\">For deploying to AWS ECS, we are using <code class=\"notranslate\">/modules/ecs-service-with-alb?ref=v0.10.1</code> with the container definition attached below. This works for our own application because our app runs in a single docker container. However, we are experimenting with a 3rd party application that runs with docker-compose (4-5 containers). How can we deploy such an application stack to AWS ECS? Do we need a different module? Or if we can use different task definitions with the same module?</p>\n<p dir=\"auto\">Thanks.</p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"[\n  {\n    &quot;name&quot;: &quot;${container_name}&quot;,\n    &quot;image&quot;: &quot;${image}:${version}&quot;,\n    &quot;cpu&quot;: ${cpu},\n    &quot;memory&quot;: ${memory},\n    &quot;essential&quot;: true,\n    &quot;portMappings&quot;: ${port_mappings},\n    &quot;environment&quot;: ${env_vars},\n    &quot;logConfiguration&quot;: {\n      &quot;logDriver&quot;: &quot;syslog&quot;,\n      &quot;options&quot;: {\n        &quot;tag&quot;: &quot;${container_name} ({{.ID}})&quot;\n      }\n    }\n  }\n]\"><pre class=\"notranslate\"><code class=\"notranslate\">[\n  {\n    \"name\": \"${container_name}\",\n    \"image\": \"${image}:${version}\",\n    \"cpu\": ${cpu},\n    \"memory\": ${memory},\n    \"essential\": true,\n    \"portMappings\": ${port_mappings},\n    \"environment\": ${env_vars},\n    \"logConfiguration\": {\n      \"logDriver\": \"syslog\",\n      \"options\": {\n        \"tag\": \"${container_name} ({{.ID}})\"\n      }\n    }\n  }\n]\n</code></pre></div>","answer":{"body":"**From a grunt**\n\nSo, rather than multiple task definitions, the way to do this is by defining side cars in the container definition. How are you generating the container definition list? Maybe you can make it so that it supports multiple containers.","bodyHTML":"<p dir=\"auto\"><strong>From a grunt</strong></p>\n<p dir=\"auto\">So, rather than multiple task definitions, the way to do this is by defining side cars in the container definition. How are you generating the container definition list? Maybe you can make it so that it supports multiple containers.</p>"}}} />

</CenterLayout>

<!-- ##DOCS-SOURCER-START
{
  "sourcePlugin": "github-discussions",
  "hash": "6277fcc5635ba499b25c884f162066da"
}
##DOCS-SOURCER-END -->
