---
hide_table_of_contents: true
hide_title: true
custom_edit_url: null
---

import CenterLayout from "/src/components/CenterLayout"
import GitHub from "/src/components/GitHub"

<head>
  <link rel="canonical" href="https://github.com/gruntwork-io/knowledge-base/discussions/486" />
</head>

<CenterLayout>
<span className="searchCategory">Knowledge Base</span>
<h1>Virtual module for only applying dependencies</h1>
<GitHub discussion={{"id":"D_kwDOF8slf84AP7ns","number":486,"author":{"login":"zen"},"title":"Virtual module for only applying dependencies","body":"\nHi,\r\n\r\nI'm working on a \"virtual\" module to apply severa dependencies (exact use case is to manage aws-auth for multiple clusters)\r\nI'm trying something like that\r\n\r\n```\r\nterraform {\r\n}\r\n\r\nlocals {\r\n  c_vars = read_terragrunt_config(find_in_parent_folders(\"common.hcl\"))\r\n}\r\n\r\ninclude {\r\n  path = find_in_parent_folders()\r\n}\r\n\r\ndependencies {\r\n  paths = [\r\n    \"${get_parent_terragrunt_dir()}/prod/eu-central-1/eks\",\r\n    \"${get_parent_terragrunt_dir()}/prod/eu-west-1/eks\",\r\n  ]\r\n}\r\n\r\ndependency \"eks_prod_fra\" {\r\n  config_path = \"${get_parent_terragrunt_dir()}/prod/eu-central-1/eks\"\r\n}\r\n\r\ndependency \"eks_prod_irl\" {\r\n  config_path = \"${get_parent_terragrunt_dir()}/prod/eu-west-1/eks\"\r\n}\r\n\r\ninputs = {}\r\n\r\n```\r\n\r\n(note: dependency blocks were added out of desperations, they do not server any purpose)\r\n\r\nWhen running `terragrunt run-all plan --terragrunt-non-interactive` I'm only getting current module planned for execution:\r\n\r\n```\r\nINFO[0000] The stack at XXXinfra/tg/core/global/virtual-prod-eks-aws-auth will be processed in the following order for command plan:\r\nGroup 1\r\n- Module XXXinfra/tg/core/global/virtual-prod-eks-aws-auth\r\n\r\nAcquiring state lock. This may take a few moments...\r\n\r\nNo changes. Your infrastructure matches the configuration.\r\n\r\nTerraform has compared your real infrastructure against your configuration\r\nand found no differences, so no changes are needed.\r\nReleasing state lock. This may take a few moments...\r\n```\r\n\r\nAny idea how to force applying all dependencies?\n\n---\n\n<ins datetime=\"2022-06-27T14:43:46Z\">\n  <p><a href=\"https://support.gruntwork.io/hc/requests/108840\">Tracked in ticket #108840</a></p>\n</ins>\n","bodyHTML":"<p dir=\"auto\">Hi,</p>\n<p dir=\"auto\">I'm working on a \"virtual\" module to apply severa dependencies (exact use case is to manage aws-auth for multiple clusters)<br>\nI'm trying something like that</p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"terraform {\n}\n\nlocals {\n  c_vars = read_terragrunt_config(find_in_parent_folders(&quot;common.hcl&quot;))\n}\n\ninclude {\n  path = find_in_parent_folders()\n}\n\ndependencies {\n  paths = [\n    &quot;${get_parent_terragrunt_dir()}/prod/eu-central-1/eks&quot;,\n    &quot;${get_parent_terragrunt_dir()}/prod/eu-west-1/eks&quot;,\n  ]\n}\n\ndependency &quot;eks_prod_fra&quot; {\n  config_path = &quot;${get_parent_terragrunt_dir()}/prod/eu-central-1/eks&quot;\n}\n\ndependency &quot;eks_prod_irl&quot; {\n  config_path = &quot;${get_parent_terragrunt_dir()}/prod/eu-west-1/eks&quot;\n}\n\ninputs = {}\n\"><pre class=\"notranslate\"><code class=\"notranslate\">terraform {\n}\n\nlocals {\n  c_vars = read_terragrunt_config(find_in_parent_folders(\"common.hcl\"))\n}\n\ninclude {\n  path = find_in_parent_folders()\n}\n\ndependencies {\n  paths = [\n    \"${get_parent_terragrunt_dir()}/prod/eu-central-1/eks\",\n    \"${get_parent_terragrunt_dir()}/prod/eu-west-1/eks\",\n  ]\n}\n\ndependency \"eks_prod_fra\" {\n  config_path = \"${get_parent_terragrunt_dir()}/prod/eu-central-1/eks\"\n}\n\ndependency \"eks_prod_irl\" {\n  config_path = \"${get_parent_terragrunt_dir()}/prod/eu-west-1/eks\"\n}\n\ninputs = {}\n\n</code></pre></div>\n<p dir=\"auto\">(note: dependency blocks were added out of desperations, they do not server any purpose)</p>\n<p dir=\"auto\">When running <code class=\"notranslate\">terragrunt run-all plan --terragrunt-non-interactive</code> I'm only getting current module planned for execution:</p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"INFO[0000] The stack at XXXinfra/tg/core/global/virtual-prod-eks-aws-auth will be processed in the following order for command plan:\nGroup 1\n- Module XXXinfra/tg/core/global/virtual-prod-eks-aws-auth\n\nAcquiring state lock. This may take a few moments...\n\nNo changes. Your infrastructure matches the configuration.\n\nTerraform has compared your real infrastructure against your configuration\nand found no differences, so no changes are needed.\nReleasing state lock. This may take a few moments...\"><pre class=\"notranslate\"><code class=\"notranslate\">INFO[0000] The stack at XXXinfra/tg/core/global/virtual-prod-eks-aws-auth will be processed in the following order for command plan:\nGroup 1\n- Module XXXinfra/tg/core/global/virtual-prod-eks-aws-auth\n\nAcquiring state lock. This may take a few moments...\n\nNo changes. Your infrastructure matches the configuration.\n\nTerraform has compared your real infrastructure against your configuration\nand found no differences, so no changes are needed.\nReleasing state lock. This may take a few moments...\n</code></pre></div>\n<p dir=\"auto\">Any idea how to force applying all dependencies?</p>\n<hr>\n<ins datetime=\"2022-06-27T14:43:46Z\">\n  <p dir=\"auto\"><a href=\"https://support.gruntwork.io/hc/requests/108840\" rel=\"nofollow\">Tracked in ticket #108840</a></p>\n</ins>","answer":{"body":"As a safety mechanism, `terragrunt` by default ignores all external dependencies (dependencies located outside of the current folder) when using `--terragrunt-non-interactive`. If you wish to deploy external dependencies, then you need to also pass in [--terragrunt-include-external-dependencies](https://terragrunt.gruntwork.io/docs/reference/cli-options/#terragrunt-include-external-dependencies).","bodyHTML":"<p dir=\"auto\">As a safety mechanism, <code class=\"notranslate\">terragrunt</code> by default ignores all external dependencies (dependencies located outside of the current folder) when using <code class=\"notranslate\">--terragrunt-non-interactive</code>. If you wish to deploy external dependencies, then you need to also pass in <a href=\"https://terragrunt.gruntwork.io/docs/reference/cli-options/#terragrunt-include-external-dependencies\" rel=\"nofollow\">--terragrunt-include-external-dependencies</a>.</p>"}}} />

</CenterLayout>

<!-- ##DOCS-SOURCER-START
{
  "sourcePlugin": "github-discussions",
  "hash": "421972967fa4201f8ffe8a54ca3da495"
}
##DOCS-SOURCER-END -->
