---
hide_table_of_contents: true
hide_title: true
custom_edit_url: null
---

import CenterLayout from "/src/components/CenterLayout"
import GitHub from "/src/components/GitHub"

<head>
  <link rel="canonical" href="https://github.com/gruntwork-io/knowledge-base/discussions/336" />
</head>

<CenterLayout>
<span className="searchCategory">Knowledge Base</span>
<h1>Please add a place to annotate the kube-system namespace</h1>
<GitHub discussion={{"id":"D_kwDOF8slf84APN2T","number":336,"author":{"login":"BrianMusson"},"title":"Please add a place to annotate the kube-system namespace","body":"I need to add annotations and labels to the pre-existing kube-system namespace. I looked at using the k8s-namespace module and the k8s core services modules but did not see what I was looking for. In the route53 module, you did the \"created_outside_of_terraform\" bool. I think that would work well as an addition to the k8s-namespace module. Another idea would be to add namespace annotations and labels to the core services module so that it could apply them to cluster with the local-exec provisioner.\r\n\r\nrelated: https://github.com/hashicorp/terraform-provider-kubernetes/issues/692\r\n\r\n[r:terraform-aws-service-catalog](https://github.com/gruntwork-io/terraform-aws-service-catalog)\r\n[r:terraform-aws-eks](https://github.com/gruntwork-io/terraform-aws-eks)\r\nThanks!","bodyHTML":"<p dir=\"auto\">I need to add annotations and labels to the pre-existing kube-system namespace. I looked at using the k8s-namespace module and the k8s core services modules but did not see what I was looking for. In the route53 module, you did the \"created_outside_of_terraform\" bool. I think that would work well as an addition to the k8s-namespace module. Another idea would be to add namespace annotations and labels to the core services module so that it could apply them to cluster with the local-exec provisioner.</p>\n<p dir=\"auto\">related: <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"523219456\" data-permission-text=\"Title is private\" data-url=\"https://github.com/hashicorp/terraform-provider-kubernetes/issues/692\" data-hovercard-type=\"issue\" data-hovercard-url=\"/hashicorp/terraform-provider-kubernetes/issues/692/hovercard\" href=\"https://github.com/hashicorp/terraform-provider-kubernetes/issues/692\">hashicorp/terraform-provider-kubernetes#692</a></p>\n<p dir=\"auto\"><a href=\"https://github.com/gruntwork-io/terraform-aws-service-catalog\">r:terraform-aws-service-catalog</a><br>\n<a href=\"https://github.com/gruntwork-io/terraform-aws-eks\">r:terraform-aws-eks</a><br>\nThanks!</p>","answer":{"body":"I was able to work around this by using a new feature from the v2.10 EKS provider\r\n\r\nhttps://registry.terraform.io/providers/hashicorp/kubernetes/latest/docs/resources/labels\r\nhttps://registry.terraform.io/providers/hashicorp/kubernetes/latest/docs/resources/annotations\r\n```\r\nresource \"kubernetes_annotations\" \"kube-system\" {\r\n  depends_on = [\r\n    helm_release.linkerd2,\r\n    helm_release.linkerd2-cni\r\n  ]\r\n\r\n  force       = true\r\n  api_version = \"v1\"\r\n  kind        = \"Namespace\"\r\n  metadata {\r\n    name = \"kube-system\"\r\n  }\r\n  annotations = {\r\n    \"linkerd.io/inject\" = \"disabled\"\r\n  }\r\n}\r\n\r\nresource \"kubernetes_labels\" \"kube-system\" {\r\n  depends_on = [\r\n    helm_release.linkerd2,\r\n    helm_release.linkerd2-cni\r\n  ]\r\n\r\n  force       = true\r\n  api_version = \"v1\"\r\n  kind        = \"Namespace\"\r\n  metadata {\r\n    name = \"kube-system\"\r\n  }\r\n  labels = {\r\n    \"config.linkerd.io/admission-webhooks\" = \"disabled\"\r\n  }\r\n}\r\n```","bodyHTML":"<p dir=\"auto\">I was able to work around this by using a new feature from the v2.10 EKS provider</p>\n<p dir=\"auto\"><a href=\"https://registry.terraform.io/providers/hashicorp/kubernetes/latest/docs/resources/labels\" rel=\"nofollow\">https://registry.terraform.io/providers/hashicorp/kubernetes/latest/docs/resources/labels</a><br>\n<a href=\"https://registry.terraform.io/providers/hashicorp/kubernetes/latest/docs/resources/annotations\" rel=\"nofollow\">https://registry.terraform.io/providers/hashicorp/kubernetes/latest/docs/resources/annotations</a></p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"resource &quot;kubernetes_annotations&quot; &quot;kube-system&quot; {\n  depends_on = [\n    helm_release.linkerd2,\n    helm_release.linkerd2-cni\n  ]\n\n  force       = true\n  api_version = &quot;v1&quot;\n  kind        = &quot;Namespace&quot;\n  metadata {\n    name = &quot;kube-system&quot;\n  }\n  annotations = {\n    &quot;linkerd.io/inject&quot; = &quot;disabled&quot;\n  }\n}\n\nresource &quot;kubernetes_labels&quot; &quot;kube-system&quot; {\n  depends_on = [\n    helm_release.linkerd2,\n    helm_release.linkerd2-cni\n  ]\n\n  force       = true\n  api_version = &quot;v1&quot;\n  kind        = &quot;Namespace&quot;\n  metadata {\n    name = &quot;kube-system&quot;\n  }\n  labels = {\n    &quot;config.linkerd.io/admission-webhooks&quot; = &quot;disabled&quot;\n  }\n}\"><pre class=\"notranslate\"><code class=\"notranslate\">resource \"kubernetes_annotations\" \"kube-system\" {\n  depends_on = [\n    helm_release.linkerd2,\n    helm_release.linkerd2-cni\n  ]\n\n  force       = true\n  api_version = \"v1\"\n  kind        = \"Namespace\"\n  metadata {\n    name = \"kube-system\"\n  }\n  annotations = {\n    \"linkerd.io/inject\" = \"disabled\"\n  }\n}\n\nresource \"kubernetes_labels\" \"kube-system\" {\n  depends_on = [\n    helm_release.linkerd2,\n    helm_release.linkerd2-cni\n  ]\n\n  force       = true\n  api_version = \"v1\"\n  kind        = \"Namespace\"\n  metadata {\n    name = \"kube-system\"\n  }\n  labels = {\n    \"config.linkerd.io/admission-webhooks\" = \"disabled\"\n  }\n}\n</code></pre></div>"}}} />

</CenterLayout>

<!-- ##DOCS-SOURCER-START
{
  "sourcePlugin": "github-discussions",
  "hash": "bf847422717e713e06215fd78ae19f94"
}
##DOCS-SOURCER-END -->
