---
hide_table_of_contents: true
hide_title: true
custom_edit_url: null
---

import CenterLayout from "/src/components/CenterLayout"
import GitHub from "/src/components/GitHub"

<head>
  <link rel="canonical" href="https://github.com/gruntwork-io/knowledge-base/discussions/500" />
</head>

<CenterLayout>
<span className="searchCategory">Knowledge Base</span>
<h1>additional regions and ecs-deploy-runner</h1>
<GitHub discussion={{"id":"D_kwDOF8slf84AQE2F","number":500,"author":{"login":"moos3"},"title":"additional regions and ecs-deploy-runner","body":"\nWe have been building out changes to the Ref Arch that we bought from you guys to get multi-region completed. One of the things we have left do is get the ecs-deploy-runner working on the second region in our setup. When ever we run the terragrunt apply on our secondary region we are getting the following error:\r\n\r\n```\r\n│ Error: failed creating IAM Role (ecs-deploy-runner-docker-image-builder): EntityAlreadyExists: Role with name ecs-deploy-runner-docker-image-builder already exists.\r\n│ \tstatus code: 409, request id: 14253fc0-149d-4d3a-b7ef-94990075f050\r\n│\r\n│   with module.ecs_deploy_runner.aws_iam_role.ecs_task[\"docker-image-builder\"],\r\n│   on .terraform/modules/ecs_deploy_runner/modules/ecs-deploy-runner/main_ecs.tf line 139, in resource \"aws_iam_role\" \"ecs_task\":\r\n│  139: resource \"aws_iam_role\" \"ecs_task\" {\r\n│\r\n╵\r\n╷\r\n│ Error: failed creating IAM Role (ecs-deploy-runner-task-execution-role): EntityAlreadyExists: Role with name ecs-deploy-runner-task-execution-role already exists.\r\n│ \tstatus code: 409, request id: c223b48c-1695-4edd-b937-5771203dc0d9\r\n│\r\n│   with module.ecs_deploy_runner.aws_iam_role.ecs_task_execution_role,\r\n│   on .terraform/modules/ecs_deploy_runner/modules/ecs-deploy-runner/main_ecs.tf line 183, in resource \"aws_iam_role\" \"ecs_task_execution_role\":\r\n│  183: resource \"aws_iam_role\" \"ecs_task_execution_role\" {\r\n│```\r\n\r\nWhy does it try to remake that role given? It should already know that role exists. \n\n---\n\n<ins datetime=\"2022-07-13T17:33:57Z\">\n  <p><a href=\"https://support.gruntwork.io/hc/requests/108974\">Tracked in ticket #108974</a></p>\n</ins>\n","bodyHTML":"<p dir=\"auto\">We have been building out changes to the Ref Arch that we bought from you guys to get multi-region completed. One of the things we have left do is get the ecs-deploy-runner working on the second region in our setup. When ever we run the terragrunt apply on our secondary region we are getting the following error:</p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"│ Error: failed creating IAM Role (ecs-deploy-runner-docker-image-builder): EntityAlreadyExists: Role with name ecs-deploy-runner-docker-image-builder already exists.\n│ \tstatus code: 409, request id: 14253fc0-149d-4d3a-b7ef-94990075f050\n│\n│   with module.ecs_deploy_runner.aws_iam_role.ecs_task[&quot;docker-image-builder&quot;],\n│   on .terraform/modules/ecs_deploy_runner/modules/ecs-deploy-runner/main_ecs.tf line 139, in resource &quot;aws_iam_role&quot; &quot;ecs_task&quot;:\n│  139: resource &quot;aws_iam_role&quot; &quot;ecs_task&quot; {\n│\n╵\n╷\n│ Error: failed creating IAM Role (ecs-deploy-runner-task-execution-role): EntityAlreadyExists: Role with name ecs-deploy-runner-task-execution-role already exists.\n│ \tstatus code: 409, request id: c223b48c-1695-4edd-b937-5771203dc0d9\n│\n│   with module.ecs_deploy_runner.aws_iam_role.ecs_task_execution_role,\n│   on .terraform/modules/ecs_deploy_runner/modules/ecs-deploy-runner/main_ecs.tf line 183, in resource &quot;aws_iam_role&quot; &quot;ecs_task_execution_role&quot;:\n│  183: resource &quot;aws_iam_role&quot; &quot;ecs_task_execution_role&quot; {\n│```\n\nWhy does it try to remake that role given? It should already know that role exists. \n\n---\n\n&lt;ins datetime=&quot;2022-07-13T17:33:57Z&quot;&gt;\n  &lt;p&gt;&lt;a href=&quot;https://support.gruntwork.io/hc/requests/108974&quot;&gt;Tracked in ticket #108974&lt;/a&gt;&lt;/p&gt;\n&lt;/ins&gt;\"><pre class=\"notranslate\"><code class=\"notranslate\">│ Error: failed creating IAM Role (ecs-deploy-runner-docker-image-builder): EntityAlreadyExists: Role with name ecs-deploy-runner-docker-image-builder already exists.\n│ \tstatus code: 409, request id: 14253fc0-149d-4d3a-b7ef-94990075f050\n│\n│   with module.ecs_deploy_runner.aws_iam_role.ecs_task[\"docker-image-builder\"],\n│   on .terraform/modules/ecs_deploy_runner/modules/ecs-deploy-runner/main_ecs.tf line 139, in resource \"aws_iam_role\" \"ecs_task\":\n│  139: resource \"aws_iam_role\" \"ecs_task\" {\n│\n╵\n╷\n│ Error: failed creating IAM Role (ecs-deploy-runner-task-execution-role): EntityAlreadyExists: Role with name ecs-deploy-runner-task-execution-role already exists.\n│ \tstatus code: 409, request id: c223b48c-1695-4edd-b937-5771203dc0d9\n│\n│   with module.ecs_deploy_runner.aws_iam_role.ecs_task_execution_role,\n│   on .terraform/modules/ecs_deploy_runner/modules/ecs-deploy-runner/main_ecs.tf line 183, in resource \"aws_iam_role\" \"ecs_task_execution_role\":\n│  183: resource \"aws_iam_role\" \"ecs_task_execution_role\" {\n│```\n\nWhy does it try to remake that role given? It should already know that role exists. \n\n---\n\n&lt;ins datetime=\"2022-07-13T17:33:57Z\"&gt;\n  &lt;p&gt;&lt;a href=\"https://support.gruntwork.io/hc/requests/108974\"&gt;Tracked in ticket #108974&lt;/a&gt;&lt;/p&gt;\n&lt;/ins&gt;\n</code></pre></div>","answer":{"body":"This is because the design is for each ECS Deploy Runner deployment to have different permission sets so that you can properly account for the ACLs and authorization policies of your CI/CD workflows. Since there is no performance advantage to having multiple regional ECS Deploy Runners, the advantage of another ECS Deploy Runner is segregating the permission set for the deployment. As such, it doesn't make much sense to deploy another ECS Deploy Runner if you find yourself wanting to reuse the IAM Role and permissions - it gives you no advantage operationally, and only adds overhead to the process.\r\n\r\nIn general, we recommend having a single ECS Deploy Runner per account, instead of one per region. This manages the right sweet spot between access control and operational overhead. Deploying more than that usually leads to diminishing returns unless you have strict access control policies such as ensuring a team only has access to a single VPC in the account.\r\n\r\n---\r\n\r\nWith that said, if you would like to operate another ECS Deploy Runner in the secondary region, you can do so by selecting a different name for the deploy runner (using the `name` input variable), so that all the IAM Roles and Policies will use a different name that doesn't clash with the existing deploy runner.","bodyHTML":"<p dir=\"auto\">This is because the design is for each ECS Deploy Runner deployment to have different permission sets so that you can properly account for the ACLs and authorization policies of your CI/CD workflows. Since there is no performance advantage to having multiple regional ECS Deploy Runners, the advantage of another ECS Deploy Runner is segregating the permission set for the deployment. As such, it doesn't make much sense to deploy another ECS Deploy Runner if you find yourself wanting to reuse the IAM Role and permissions - it gives you no advantage operationally, and only adds overhead to the process.</p>\n<p dir=\"auto\">In general, we recommend having a single ECS Deploy Runner per account, instead of one per region. This manages the right sweet spot between access control and operational overhead. Deploying more than that usually leads to diminishing returns unless you have strict access control policies such as ensuring a team only has access to a single VPC in the account.</p>\n<hr>\n<p dir=\"auto\">With that said, if you would like to operate another ECS Deploy Runner in the secondary region, you can do so by selecting a different name for the deploy runner (using the <code class=\"notranslate\">name</code> input variable), so that all the IAM Roles and Policies will use a different name that doesn't clash with the existing deploy runner.</p>"}}} />

</CenterLayout>

<!-- ##DOCS-SOURCER-START
{
  "sourcePlugin": "github-discussions",
  "hash": "057071564fc18bfaac51e99ba6944ba9"
}
##DOCS-SOURCER-END -->
