---
hide_table_of_contents: true
hide_title: true
custom_edit_url: null
---

import CenterLayout from "/src/components/CenterLayout"
import GitHub from "/src/components/GitHub"

<head>
  <link rel="canonical" href="https://github.com/gruntwork-io/knowledge-base/discussions/437" />
</head>

<CenterLayout>
<span className="searchCategory">Knowledge Base</span>
<h1>Getting too many arguments in call to spdy.NewRoundTripperWithProxy error when i try to run my terratest go code which deploys, validates and un-deploys k8s pod to/from AWS EKS</h1>
<GitHub discussion={{"id":"D_kwDOF8slf84APpsV","number":437,"author":{"login":"pandu-bhojaraj-mf"},"title":"Getting too many arguments in call to spdy.NewRoundTripperWithProxy error when i try to run my terratest go code which deploys, validates and un-deploys k8s pod to/from AWS EKS","body":"\r\n**Problem :**\r\nGetting too many arguments in call to spdy.NewRoundTripperWithProxy error when i try to run my terratest go code which deploys, validates and un-deploys k8s pod to/from AWS EKS\r\n\r\n**Problem description** \r\n\r\nHi All I am getting the error as mentioned in subject when i run my terratest go code. **Actually my scripts were perfectly working fine around 3 months back** but **looks like some library change happened** in between these 3 months in **k8s side which is affecting my scripts** \r\n\r\nMost problematic part is **i am unable to find out at which line number my script is failing** \r\n\r\ngo mod init  and go go mod tidy are working fine but as soon as i run go test command getting the error as attached in the screen shot\r\n<img width=\"960\" alt=\"Issue\" src=\"https://user-images.githubusercontent.com/73541850/170688549-0f2cc749-dc70-4a33-b9b0-a2f731affa75.png\">\r\n\r\nMy code is present in drop box  , here is the link  https://www.dropbox.com/s/qre9zq8jqj9vfmf/ig_data_loader_test.go?dl=0\r\n\r\nPlease do the **needful as it is blocking me from running my automated tests** \r\n\r\nMy go version \r\n\r\n`go version go1.17.8 linux/amd64`\r\n\r\nBelow are the commands i used for deploying \r\n\r\n`go mod init <folder name under which .go script is present>`\r\n`go mod tidy -compat=1.17`\r\n`go test -v -timeout 120m`\r\n\r\n\r\n---\r\n\r\n<ins datetime=\"2022-05-27T11:12:44Z\">\r\n  <p><a href=\"https://support.gruntwork.io/hc/requests/108669\">Tracked in ticket #108669</a></p>\r\n</ins>\r\n","bodyHTML":"<p dir=\"auto\"><strong>Problem :</strong><br>\nGetting too many arguments in call to spdy.NewRoundTripperWithProxy error when i try to run my terratest go code which deploys, validates and un-deploys k8s pod to/from AWS EKS</p>\n<p dir=\"auto\"><strong>Problem description</strong></p>\n<p dir=\"auto\">Hi All I am getting the error as mentioned in subject when i run my terratest go code. <strong>Actually my scripts were perfectly working fine around 3 months back</strong> but <strong>looks like some library change happened</strong> in between these 3 months in <strong>k8s side which is affecting my scripts</strong></p>\n<p dir=\"auto\">Most problematic part is <strong>i am unable to find out at which line number my script is failing</strong></p>\n<p dir=\"auto\">go mod init  and go go mod tidy are working fine but as soon as i run go test command getting the error as attached in the screen shot<br>\n<a target=\"_blank\" rel=\"noopener noreferrer nofollow\" href=\"https://user-images.githubusercontent.com/73541850/170688549-0f2cc749-dc70-4a33-b9b0-a2f731affa75.png\"><img width=\"960\" alt=\"Issue\" src=\"https://user-images.githubusercontent.com/73541850/170688549-0f2cc749-dc70-4a33-b9b0-a2f731affa75.png\" style=\"max-width: 100%;\"></a></p>\n<p dir=\"auto\">My code is present in drop box  , here is the link  <a href=\"https://www.dropbox.com/s/qre9zq8jqj9vfmf/ig_data_loader_test.go?dl=0\" rel=\"nofollow\">https://www.dropbox.com/s/qre9zq8jqj9vfmf/ig_data_loader_test.go?dl=0</a></p>\n<p dir=\"auto\">Please do the <strong>needful as it is blocking me from running my automated tests</strong></p>\n<p dir=\"auto\">My go version</p>\n<p dir=\"auto\"><code class=\"notranslate\">go version go1.17.8 linux/amd64</code></p>\n<p dir=\"auto\">Below are the commands i used for deploying</p>\n<p dir=\"auto\"><code class=\"notranslate\">go mod init &lt;folder name under which .go script is present&gt;</code><br>\n<code class=\"notranslate\">go mod tidy -compat=1.17</code><br>\n<code class=\"notranslate\">go test -v -timeout 120m</code></p>\n<hr>\n<ins datetime=\"2022-05-27T11:12:44Z\">\n  <p dir=\"auto\"><a href=\"https://support.gruntwork.io/hc/requests/108669\" rel=\"nofollow\">Tracked in ticket #108669</a></p>\n</ins>","answer":{"body":"The k8s library versions need to be in sync with Terratest. You can do the following to ensure they are in sync:\r\n\r\n1. Remove your current `go.sum`\r\n2. In your `go.mod`, make sure the following 3 k8s libraries are locked to the same version as terratest: https://github.com/gruntwork-io/terratest/blob/master/go.mod#L46-L48\r\n3. Run `go mod tidy -compat=1.17`\r\n4. Resolve any compile errors in your current code.\r\n","bodyHTML":"<p dir=\"auto\">The k8s library versions need to be in sync with Terratest. You can do the following to ensure they are in sync:</p>\n<ol dir=\"auto\">\n<li>Remove your current <code class=\"notranslate\">go.sum</code></li>\n<li>In your <code class=\"notranslate\">go.mod</code>, make sure the following 3 k8s libraries are locked to the same version as terratest: <a href=\"https://github.com/gruntwork-io/terratest/blob/master/go.mod#L46-L48\">https://github.com/gruntwork-io/terratest/blob/master/go.mod#L46-L48</a></li>\n<li>Run <code class=\"notranslate\">go mod tidy -compat=1.17</code></li>\n<li>Resolve any compile errors in your current code.</li>\n</ol>"}}} />

</CenterLayout>

<!-- ##DOCS-SOURCER-START
{
  "sourcePlugin": "github-discussions",
  "hash": "25a4fb5ed956457480405143bca21d34"
}
##DOCS-SOURCER-END -->
