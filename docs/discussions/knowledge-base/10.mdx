---
hide_table_of_contents: true
hide_title: true
custom_edit_url: null
---

import CenterLayout from "/src/components/CenterLayout"
import GitHub from "/src/components/GitHub"

<head>
  <link rel="canonical" href="https://github.com/gruntwork-io/knowledge-base/discussions/10" />
</head>

<CenterLayout>
<span className="searchCategory">Knowledge Base</span>
<h1>The requested &#x7B;CPU|MEMORY&#x7D; configuration is above your limit</h1>
<GitHub discussion={{"id":"MDEwOkRpc2N1c3Npb24zNTM5Mzg0","number":10,"author":{"login":"zackproser"},"title":"The requested {CPU|MEMORY} configuration is above your limit","body":"_A few users with EKS Fargate reference architectures began encountering the same or similar error messages the week of August 9th 2021:_\r\n\r\n`The requested CPU configuration is above your limit` or `The requested MEMORY configuration is above your limit`. ","bodyHTML":"<p dir=\"auto\"><em>A few users with EKS Fargate reference architectures began encountering the same or similar error messages the week of August 9th 2021:</em></p>\n<p dir=\"auto\"><code class=\"notranslate\">The requested CPU configuration is above your limit</code> or <code class=\"notranslate\">The requested MEMORY configuration is above your limit</code>.</p>","answer":{"body":"We've determined that AWS is applying an artificial ECS resource limit to newer accounts - and it appears to be set to 2 vCPU and 4GB of RAM. There are further clues pointing to this limit in [this thread](https://forum.numer.ai/t/some-troubleshooting-for-setting-up-numerai-compute/3623/8).\r\n\r\nThis is lower than what we tend to specify for the Elastic Deploy Runner - especially so that it can handle larger module deployments and the more resource intensive run-all command, which explains the error message. \r\n\r\nThis means that if you recently had a ref arch deployed that uses Fargate for the ECS Deploy Runner and are encountering this error, you have two main workarounds available right now:\r\n\r\n- Change your memory requests in your ECS Deploy Runner terragrunt.hcl configs to 4096 down from any value that is currently higher (container_memory = 4096). Ensure you are not requesting any more than 2 vCPU. Plan and apply your changes in each account to rebuild the EDR with lower memory requests and then resume building / planning from there.\r\n- Go through AWS Support. If you want to go through AWS Support - follow these instructions:\r\n\r\n1. Go to support center\r\n2. Create a new case in category “Service limit increase”\r\n3. Set “Limit type” to “Fargate”\r\n4. Set Request fields by choosing the region you operate in, the “Limit” field to “Concurrent Task Limit”, and set “New limit value” to 500\r\n5. In the use case description, say: \"NOTE: We actually want to increase the Fargate resource limits to allow tasks using 4 vCPUs and 8GB of RAM, but there is no option to do this. Right now, anything above 2 vCPUs and 4GB of RAM actually results in the error message “The requested MEMORY configuration is above your limit” even though the AWS documentation at https://docs.aws.amazon.com/AmazonECS/latest/developerguide/AWS_Fargate.html mentions that Fargate supports tasks up to 4vCPUs and 30GB of RAM. Please increase our limits to allow the full range of Fargate task resources.\"\r\n","bodyHTML":"<p dir=\"auto\">We've determined that AWS is applying an artificial ECS resource limit to newer accounts - and it appears to be set to 2 vCPU and 4GB of RAM. There are further clues pointing to this limit in <a href=\"https://forum.numer.ai/t/some-troubleshooting-for-setting-up-numerai-compute/3623/8\" rel=\"nofollow\">this thread</a>.</p>\n<p dir=\"auto\">This is lower than what we tend to specify for the Elastic Deploy Runner - especially so that it can handle larger module deployments and the more resource intensive run-all command, which explains the error message.</p>\n<p dir=\"auto\">This means that if you recently had a ref arch deployed that uses Fargate for the ECS Deploy Runner and are encountering this error, you have two main workarounds available right now:</p>\n<ul dir=\"auto\">\n<li>Change your memory requests in your ECS Deploy Runner terragrunt.hcl configs to 4096 down from any value that is currently higher (container_memory = 4096). Ensure you are not requesting any more than 2 vCPU. Plan and apply your changes in each account to rebuild the EDR with lower memory requests and then resume building / planning from there.</li>\n<li>Go through AWS Support. If you want to go through AWS Support - follow these instructions:</li>\n</ul>\n<ol dir=\"auto\">\n<li>Go to support center</li>\n<li>Create a new case in category “Service limit increase”</li>\n<li>Set “Limit type” to “Fargate”</li>\n<li>Set Request fields by choosing the region you operate in, the “Limit” field to “Concurrent Task Limit”, and set “New limit value” to 500</li>\n<li>In the use case description, say: \"NOTE: We actually want to increase the Fargate resource limits to allow tasks using 4 vCPUs and 8GB of RAM, but there is no option to do this. Right now, anything above 2 vCPUs and 4GB of RAM actually results in the error message “The requested MEMORY configuration is above your limit” even though the AWS documentation at <a href=\"https://docs.aws.amazon.com/AmazonECS/latest/developerguide/AWS_Fargate.html\" rel=\"nofollow\">https://docs.aws.amazon.com/AmazonECS/latest/developerguide/AWS_Fargate.html</a> mentions that Fargate supports tasks up to 4vCPUs and 30GB of RAM. Please increase our limits to allow the full range of Fargate task resources.\"</li>\n</ol>"}}} />

</CenterLayout>

<!-- ##DOCS-SOURCER-START
{
  "sourcePlugin": "github-discussions",
  "hash": "027ad7a5df6cd87f95456bdaf61843c4"
}
##DOCS-SOURCER-END -->
