---
hide_table_of_contents: true
hide_title: true
custom_edit_url: null
---

import CenterLayout from "/src/components/CenterLayout"
import GitHub from "/src/components/GitHub"

<head>
  <link rel="canonical" href="https://github.com/gruntwork-io/knowledge-base/discussions/617" />
</head>

<CenterLayout>
<span className="searchCategory">Knowledge Base</span>
<h1>terragrunt reference architecture s3 bucket permissions</h1>
<GitHub discussion={{"id":"D_kwDOF8slf84ARy1U","number":617,"author":{"login":"drafie"},"title":"terragrunt reference architecture s3 bucket permissions","body":"\nWe recently had our RA deployed and I am attempting to add users, but when running terragrunt apply I get an error: \r\n\r\nRemote state S3 bucket xxxx-us-east-1-tf-state does not exist or you don't have permissions to access it. Would you like Terragrunt to create it? (y/n) \r\n\r\nThe bucket does exist. \r\n\r\nI've configured aws-vault and am able to authenticate using commands like: \r\n\r\naws-vault exec dev --no-session -- aws sts get-caller-identity\r\n\r\nIs there a way to tell what role or user Terragrunt is assuming when executing these commands?\r\n\r\n\r\n\r\n\r\n\n\n---\n\n<ins datetime=\"2022-12-14T23:58:19Z\">\n  <p><a href=\"https://support.gruntwork.io/hc/requests/109728\">Tracked in ticket #109728</a></p>\n</ins>\n","bodyHTML":"<p dir=\"auto\">We recently had our RA deployed and I am attempting to add users, but when running terragrunt apply I get an error:</p>\n<p dir=\"auto\">Remote state S3 bucket xxxx-us-east-1-tf-state does not exist or you don't have permissions to access it. Would you like Terragrunt to create it? (y/n)</p>\n<p dir=\"auto\">The bucket does exist.</p>\n<p dir=\"auto\">I've configured aws-vault and am able to authenticate using commands like:</p>\n<p dir=\"auto\">aws-vault exec dev --no-session -- aws sts get-caller-identity</p>\n<p dir=\"auto\">Is there a way to tell what role or user Terragrunt is assuming when executing these commands?</p>\n<hr>\n<ins datetime=\"2022-12-14T23:58:19Z\">\n  <p dir=\"auto\"><a href=\"https://support.gruntwork.io/hc/requests/109728\" rel=\"nofollow\">Tracked in ticket #109728</a></p>\n</ins>","answer":{"body":"I think I figured out what happened here - I did not properly authenticate with the CLI.   I needed to call:\r\n\r\naws-vault exec security \r\n\r\nI think it would be helpful if this was called out in the documentation more explicitly, because the [documentation ](https://github.com/gruntwork-clients/infrastructure-live-campaign-sidekick/blob/main/docs/02-authenticate.md#authenticate-to-aws-via-the-cli) doesn't mention it. \r\n\r\nIncidentally, there is a small chronological error in the documentation in that section - it suggests running `aws-vault add security `before adding new profiles for each of the accounts to ~/.aws/config.   I believe you need to add the profiles first. \r\n\r\nOtherwise the documentation is great, just leaving this behind in case anyone else encounters it. \r\n\r\n\r\n","bodyHTML":"<p dir=\"auto\">I think I figured out what happened here - I did not properly authenticate with the CLI.   I needed to call:</p>\n<p dir=\"auto\">aws-vault exec security</p>\n<p dir=\"auto\">I think it would be helpful if this was called out in the documentation more explicitly, because the <a href=\"https://github.com/gruntwork-clients/infrastructure-live-campaign-sidekick/blob/main/docs/02-authenticate.md#authenticate-to-aws-via-the-cli\">documentation </a> doesn't mention it.</p>\n<p dir=\"auto\">Incidentally, there is a small chronological error in the documentation in that section - it suggests running <code class=\"notranslate\">aws-vault add security </code>before adding new profiles for each of the accounts to ~/.aws/config.   I believe you need to add the profiles first.</p>\n<p dir=\"auto\">Otherwise the documentation is great, just leaving this behind in case anyone else encounters it.</p>"}}} />

</CenterLayout>

<!-- ##DOCS-SOURCER-START
{
  "sourcePlugin": "github-discussions",
  "hash": "7848fc11ebcb4217c790d477f6ea5589"
}
##DOCS-SOURCER-END -->
