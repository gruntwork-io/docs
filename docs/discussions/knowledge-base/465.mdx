---
hide_table_of_contents: true
hide_title: true
custom_edit_url: null
---

import CenterLayout from "/src/components/CenterLayout"
import GitHub from "/src/components/GitHub"

<head>
  <link rel="canonical" href="https://github.com/gruntwork-io/knowledge-base/discussions/465" />
</head>

<CenterLayout>
<span className="searchCategory">Knowledge Base</span>
<h1>How to deploy argocd using the Gruntwork EKS cluster modules?</h1>
<GitHub discussion={{"id":"D_kwDOF8slf84APzIm","number":465,"author":{"login":"yorinasub17"},"title":"How to deploy argocd using the Gruntwork EKS cluster modules?","body":"\nI'm trying to deploy an ArgoCD instance in our ref-infrastructure-live using either their:\r\n\r\n- [helm chart](https://github.com/argoproj/argo-helm/tree/main/charts/argo-cd)\r\n- [their docker image](https://hub.docker.com/r/argoproj/argocd)\r\n\r\nI'm wondering what the correct way to deploy this would be. \r\n\r\nI successfully deployed it using a custom `infrastructure-module` of type `helm_release`, and it worked, but I could never get access to the server without opening the security group manually.\r\n\r\nI assumed I should be using ECS or K8s frontend applications, both of which were taken from here: https://github.com/gruntwork-io/terraform-aws-service-catalog/tree/master/examples/for-production/infrastructure-live/dev/us-west-2/dev/services.\r\n\r\nI've hit more errors using the ECS backend, and the K8's backend than with my custom infrastructure-module, so I'm wondering what the correct method should be?  I can give more info on the specific errors I've been hitting, once I know which method I should be targeting.\r\n\r\n\n\n---\n\n<ins datetime=\"2022-06-13T19:35:02Z\">\n  <p><a href=\"https://support.gruntwork.io/hc/requests/108761\">Tracked in ticket #108761</a></p>\n</ins>\n","bodyHTML":"<p dir=\"auto\">I'm trying to deploy an ArgoCD instance in our ref-infrastructure-live using either their:</p>\n<ul dir=\"auto\">\n<li><a href=\"https://github.com/argoproj/argo-helm/tree/main/charts/argo-cd\">helm chart</a></li>\n<li><a href=\"https://hub.docker.com/r/argoproj/argocd\" rel=\"nofollow\">their docker image</a></li>\n</ul>\n<p dir=\"auto\">I'm wondering what the correct way to deploy this would be.</p>\n<p dir=\"auto\">I successfully deployed it using a custom <code class=\"notranslate\">infrastructure-module</code> of type <code class=\"notranslate\">helm_release</code>, and it worked, but I could never get access to the server without opening the security group manually.</p>\n<p dir=\"auto\">I assumed I should be using ECS or K8s frontend applications, both of which were taken from here: <a href=\"https://github.com/gruntwork-io/terraform-aws-service-catalog/tree/master/examples/for-production/infrastructure-live/dev/us-west-2/dev/services\">https://github.com/gruntwork-io/terraform-aws-service-catalog/tree/master/examples/for-production/infrastructure-live/dev/us-west-2/dev/services</a>.</p>\n<p dir=\"auto\">I've hit more errors using the ECS backend, and the K8's backend than with my custom infrastructure-module, so I'm wondering what the correct method should be?  I can give more info on the specific errors I've been hitting, once I know which method I should be targeting.</p>\n<hr>\n<ins datetime=\"2022-06-13T19:35:02Z\">\n  <p dir=\"auto\"><a href=\"https://support.gruntwork.io/hc/requests/108761\" rel=\"nofollow\">Tracked in ticket #108761</a></p>\n</ins>","answer":{"body":"We don't offer support for Argo CD specifically yet, but we can provide some general pointers here.\r\n\r\nThe main issue is that the `Ingress` resource is not configured with the proper annotations to be picked up by the ALB Ingress Controller, and is thus not mapping to an ALB that exposes access to the service outside the cluster. You want to find the corresponding input value in the helm chart for annotating the `Ingress` resource, and then apply the [same annotations as k8s-service](https://github.com/gruntwork-io/terraform-aws-service-catalog/blob/master/modules/services/k8s-service/main.tf#L153) in `expose_type = \"external\"` mode.\r\n\r\nYou can also refer to the [AWS Load Balancer Controller documentation](https://kubernetes-sigs.github.io/aws-load-balancer-controller/v2.4/guide/ingress/annotations/) for other annotations you can apply to further customize the ALB.","bodyHTML":"<p dir=\"auto\">We don't offer support for Argo CD specifically yet, but we can provide some general pointers here.</p>\n<p dir=\"auto\">The main issue is that the <code class=\"notranslate\">Ingress</code> resource is not configured with the proper annotations to be picked up by the ALB Ingress Controller, and is thus not mapping to an ALB that exposes access to the service outside the cluster. You want to find the corresponding input value in the helm chart for annotating the <code class=\"notranslate\">Ingress</code> resource, and then apply the <a href=\"https://github.com/gruntwork-io/terraform-aws-service-catalog/blob/master/modules/services/k8s-service/main.tf#L153\">same annotations as k8s-service</a> in <code class=\"notranslate\">expose_type = \"external\"</code> mode.</p>\n<p dir=\"auto\">You can also refer to the <a href=\"https://kubernetes-sigs.github.io/aws-load-balancer-controller/v2.4/guide/ingress/annotations/\" rel=\"nofollow\">AWS Load Balancer Controller documentation</a> for other annotations you can apply to further customize the ALB.</p>"}}} />

</CenterLayout>

<!-- ##DOCS-SOURCER-START
{
  "sourcePlugin": "github-discussions",
  "hash": "36e8044b27044f965f7d83db807e81c2"
}
##DOCS-SOURCER-END -->
