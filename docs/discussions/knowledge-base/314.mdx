---
hide_table_of_contents: true
hide_title: true
custom_edit_url: null
---

import CenterLayout from "/src/components/CenterLayout"
import GitHub from "/src/components/GitHub"

<head>
  <link rel="canonical" href="https://github.com/gruntwork-io/knowledge-base/discussions/314" />
</head>

<CenterLayout>
<span className="searchCategory">Knowledge Base</span>
<h1>How do you debug errors with ssh-grunt?</h1>
<GitHub discussion={{"id":"D_kwDOF8slf84APGR6","number":314,"author":{"login":"yorinasub17"},"title":"How do you debug errors with ssh-grunt?","body":"We recently had an issue in one of our dev instances resulting in the crash of the kubelet service. When trying to do the root cause analysis we found it unusual that we couldn't access them trough ssh.\r\n\r\nContext:\r\n\r\n- We have a user in the group `ssh-grunt-sudo-users`\r\n- We have setup the ssh keys in aws\r\n- We have changed the security group to allow ssh access from the associated bastion instance.\r\n\r\nExpectations:\r\n\r\n- `ssh-grunt` runs in all ec2 instances\r\n- we would login the same way we do with other instances `user_name@instance_name`\r\n\r\nResult:\r\n\r\n- Permission denied (publickey,gssapi-keyex,gssapi-with-mic).","bodyHTML":"<p dir=\"auto\">We recently had an issue in one of our dev instances resulting in the crash of the kubelet service. When trying to do the root cause analysis we found it unusual that we couldn't access them trough ssh.</p>\n<p dir=\"auto\">Context:</p>\n<ul dir=\"auto\">\n<li>We have a user in the group <code class=\"notranslate\">ssh-grunt-sudo-users</code></li>\n<li>We have setup the ssh keys in aws</li>\n<li>We have changed the security group to allow ssh access from the associated bastion instance.</li>\n</ul>\n<p dir=\"auto\">Expectations:</p>\n<ul dir=\"auto\">\n<li><code class=\"notranslate\">ssh-grunt</code> runs in all ec2 instances</li>\n<li>we would login the same way we do with other instances <code class=\"notranslate\">user_name@instance_name</code></li>\n</ul>\n<p dir=\"auto\">Result:</p>\n<ul dir=\"auto\">\n<li>Permission denied (publickey,gssapi-keyex,gssapi-with-mic).</li>\n</ul>","answer":{"body":"There are a few possibilities here, but the best way to debug this would be to introspect the server logs. You should be able to inspect the syslog either from the EC2 console, or in CloudWatch Logs. In this scenario, I would expect there to be an error at boot time of the server that prevented it from syncing with ssh-grunt (which you should be able to see in the EC2 console, or the [cli](https://docs.aws.amazon.com/cli/latest/reference/ec2/get-console-output.html)). If you can't identify any root cause errors in there, then the next step would be to observe the system logs in CloudWatch Logs for potential error messages.","bodyHTML":"<p dir=\"auto\">There are a few possibilities here, but the best way to debug this would be to introspect the server logs. You should be able to inspect the syslog either from the EC2 console, or in CloudWatch Logs. In this scenario, I would expect there to be an error at boot time of the server that prevented it from syncing with ssh-grunt (which you should be able to see in the EC2 console, or the <a href=\"https://docs.aws.amazon.com/cli/latest/reference/ec2/get-console-output.html\" rel=\"nofollow\">cli</a>). If you can't identify any root cause errors in there, then the next step would be to observe the system logs in CloudWatch Logs for potential error messages.</p>"}}} />

</CenterLayout>

<!-- ##DOCS-SOURCER-START
{
  "sourcePlugin": "github-discussions",
  "hash": "2f69808ab6fd891ea9c40abbab853e19"
}
##DOCS-SOURCER-END -->
