---
hide_table_of_contents: true
hide_title: true
custom_edit_url: null
---

import CenterLayout from "/src/components/CenterLayout"
import GitHub from "/src/components/GitHub"

<head>
  <link rel="canonical" href="https://github.com/gruntwork-io/knowledge-base/discussions/734" />
</head>

<CenterLayout>
<span className="searchCategory">Knowledge Base</span>
<h1>Pass child local to parent local?</h1>
<GitHub discussion={{"id":"D_kwDOF8slf84AUI11","number":734,"author":{"login":"tracphil"},"title":"Pass child local to parent local?","body":"\r\nThe subject is the best way to describe what I am trying to do.\r\n\r\nI am trying to merge a local that appears down in the filesystem into a local that is in `_common/common.hcl`.\r\n\r\nThe error that I am getting is:\r\n\r\n```\r\naws_account_alias [REASON: Can't evaluate expression at (filesystem_path)/_common/common.hcl:4,22-66 because local reference 'environment' is not evaluated.\r\n```\r\n\r\nThis is how I have things setup.\r\n\r\n`_common/common.hcl`\r\n\r\n```hcl\r\nlocals {\r\n  aws_account_alias= \"networking-${local.environment}-01\"\r\n}\r\n```\r\n\r\n`environments/account-dev/account.hcl`\r\n\r\n```hcl\r\nlocals {\r\n  account_id = \"12345678901\"\r\n  environment = \"dev\"\r\n}\r\n```\r\n\r\n`environments/networking-dev/us-east-1/terragrunt.hcl`\r\n\r\n```hcl\r\nlocals {\r\n  aws_region = \"us-east-1\"\r\n}\r\ninclude \"root\" {\r\n  path = find_in_parent_folders()\r\n}\r\n```\r\n\r\n`terragrunt.hcl`\r\n\r\nThis is the relevant part of `terragrunt.hcl`:\r\n\r\n```hcl\r\nlocals {\r\n  account_vars = read_terragrunt_config(find_in_parent_folders(\"account.hcl\"))\r\n  common_vars = read_terragrunt_config(find_in_parent_folders(\"_common/common.hcl\"))\r\n}\r\n```\r\n\r\nAre locals evaluated in the order they are included?\r\n\r\nThanks for any help you can provide.\r\n\r\n---\r\n\r\n<ins datetime=\"2023-06-08T19:41:19Z\">\r\n  <p><a href=\"https://support.gruntwork.io/hc/requests/110244\">Tracked in ticket #110244</a></p>\r\n</ins>\r\n","bodyHTML":"<p dir=\"auto\">The subject is the best way to describe what I am trying to do.</p>\n<p dir=\"auto\">I am trying to merge a local that appears down in the filesystem into a local that is in <code class=\"notranslate\">_common/common.hcl</code>.</p>\n<p dir=\"auto\">The error that I am getting is:</p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"aws_account_alias [REASON: Can't evaluate expression at (filesystem_path)/_common/common.hcl:4,22-66 because local reference 'environment' is not evaluated.\"><pre class=\"notranslate\"><code class=\"notranslate\">aws_account_alias [REASON: Can't evaluate expression at (filesystem_path)/_common/common.hcl:4,22-66 because local reference 'environment' is not evaluated.\n</code></pre></div>\n<p dir=\"auto\">This is how I have things setup.</p>\n<p dir=\"auto\"><code class=\"notranslate\">_common/common.hcl</code></p>\n<div class=\"highlight highlight-source-hcl notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"locals {\n  aws_account_alias= &quot;networking-${local.environment}-01&quot;\n}\"><pre class=\"notranslate\"><span class=\"pl-en\">locals</span> {\n  <span class=\"pl-v\"><span class=\"pl-smi\">aws_account_alias</span><span class=\"pl-k\">=</span> </span><span class=\"pl-s\"><span class=\"pl-pds\">\"</span>networking-<span class=\"pl-k\">${</span><span class=\"pl-smi\">local</span><span class=\"pl-k\">.</span><span class=\"pl-smi\">environment</span><span class=\"pl-k\">}</span>-01<span class=\"pl-pds\">\"</span></span>\n}</pre></div>\n<p dir=\"auto\"><code class=\"notranslate\">environments/account-dev/account.hcl</code></p>\n<div class=\"highlight highlight-source-hcl notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"locals {\n  account_id = &quot;12345678901&quot;\n  environment = &quot;dev&quot;\n}\"><pre class=\"notranslate\"><span class=\"pl-en\">locals</span> {\n  <span class=\"pl-v\"><span class=\"pl-smi\">account_id</span> <span class=\"pl-k\">=</span> </span><span class=\"pl-s\"><span class=\"pl-pds\">\"</span>12345678901<span class=\"pl-pds\">\"</span></span>\n  <span class=\"pl-v\"><span class=\"pl-smi\">environment</span> <span class=\"pl-k\">=</span> </span><span class=\"pl-s\"><span class=\"pl-pds\">\"</span>dev<span class=\"pl-pds\">\"</span></span>\n}</pre></div>\n<p dir=\"auto\"><code class=\"notranslate\">environments/networking-dev/us-east-1/terragrunt.hcl</code></p>\n<div class=\"highlight highlight-source-hcl notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"locals {\n  aws_region = &quot;us-east-1&quot;\n}\ninclude &quot;root&quot; {\n  path = find_in_parent_folders()\n}\"><pre class=\"notranslate\"><span class=\"pl-en\">locals</span> {\n  <span class=\"pl-v\"><span class=\"pl-smi\">aws_region</span> <span class=\"pl-k\">=</span> </span><span class=\"pl-s\"><span class=\"pl-pds\">\"</span>us-east-1<span class=\"pl-pds\">\"</span></span>\n}\n<span class=\"pl-en\">include</span> <span class=\"pl-smi\">\"root\"</span> {\n  <span class=\"pl-v\"><span class=\"pl-smi\">path</span> <span class=\"pl-k\">=</span> </span><span class=\"pl-c1\">find_in_parent_folders</span>()\n}</pre></div>\n<p dir=\"auto\"><code class=\"notranslate\">terragrunt.hcl</code></p>\n<p dir=\"auto\">This is the relevant part of <code class=\"notranslate\">terragrunt.hcl</code>:</p>\n<div class=\"highlight highlight-source-hcl notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"locals {\n  account_vars = read_terragrunt_config(find_in_parent_folders(&quot;account.hcl&quot;))\n  common_vars = read_terragrunt_config(find_in_parent_folders(&quot;_common/common.hcl&quot;))\n}\"><pre class=\"notranslate\"><span class=\"pl-en\">locals</span> {\n  <span class=\"pl-v\"><span class=\"pl-smi\">account_vars</span> <span class=\"pl-k\">=</span> </span><span class=\"pl-c1\">read_terragrunt_config</span>(<span class=\"pl-c1\">find_in_parent_folders</span>(<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>account.hcl<span class=\"pl-pds\">\"</span></span>))\n  <span class=\"pl-v\"><span class=\"pl-smi\">common_vars</span> <span class=\"pl-k\">=</span> </span><span class=\"pl-c1\">read_terragrunt_config</span>(<span class=\"pl-c1\">find_in_parent_folders</span>(<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>_common/common.hcl<span class=\"pl-pds\">\"</span></span>))\n}</pre></div>\n<p dir=\"auto\">Are locals evaluated in the order they are included?</p>\n<p dir=\"auto\">Thanks for any help you can provide.</p>\n<hr>\n<ins datetime=\"2023-06-08T19:41:19Z\">\n  <p dir=\"auto\"><a href=\"https://support.gruntwork.io/hc/requests/110244\" rel=\"nofollow\">Tracked in ticket #110244</a></p>\n</ins>","answer":{"body":"Hello,\r\nconfiguration can be extracted to separated HCL file and loaded in parent file through `read_terragrunt_config()` using functions to get paths `get_terragrunt_dir()` or `path_relative_to_include()`\r\n\r\nI also prepared simplified example in https://github.com/denis256/terragrunt-tests/tree/master/discussion-734\r\n\r\nReferences:\r\n\r\nhttps://terragrunt.gruntwork.io/docs/reference/built-in-functions/#read_terragrunt_config\r\nhttps://terragrunt.gruntwork.io/docs/reference/built-in-functions/#get_terragrunt_dir\r\nhttps://terragrunt.gruntwork.io/docs/reference/built-in-functions/#path_relative_to_include\r\n","bodyHTML":"<p dir=\"auto\">Hello,<br>\nconfiguration can be extracted to separated HCL file and loaded in parent file through <code class=\"notranslate\">read_terragrunt_config()</code> using functions to get paths <code class=\"notranslate\">get_terragrunt_dir()</code> or <code class=\"notranslate\">path_relative_to_include()</code></p>\n<p dir=\"auto\">I also prepared simplified example in <a href=\"https://github.com/denis256/terragrunt-tests/tree/master/discussion-734\">https://github.com/denis256/terragrunt-tests/tree/master/discussion-734</a></p>\n<p dir=\"auto\">References:</p>\n<p dir=\"auto\"><a href=\"https://terragrunt.gruntwork.io/docs/reference/built-in-functions/#read_terragrunt_config\" rel=\"nofollow\">https://terragrunt.gruntwork.io/docs/reference/built-in-functions/#read_terragrunt_config</a><br>\n<a href=\"https://terragrunt.gruntwork.io/docs/reference/built-in-functions/#get_terragrunt_dir\" rel=\"nofollow\">https://terragrunt.gruntwork.io/docs/reference/built-in-functions/#get_terragrunt_dir</a><br>\n<a href=\"https://terragrunt.gruntwork.io/docs/reference/built-in-functions/#path_relative_to_include\" rel=\"nofollow\">https://terragrunt.gruntwork.io/docs/reference/built-in-functions/#path_relative_to_include</a></p>"}}} />

</CenterLayout>
  

<!-- ##DOCS-SOURCER-START
{
  "sourcePlugin": "github-discussions",
  "hash": "6f71b26105021d80b2985217eb3d8cf2"
}
##DOCS-SOURCER-END -->
