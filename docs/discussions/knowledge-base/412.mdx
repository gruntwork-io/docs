---
hide_table_of_contents: true
hide_title: true
custom_edit_url: null
---

import CenterLayout from "/src/components/CenterLayout"
import GitHub from "/src/components/GitHub"

<head>
  <link rel="canonical" href="https://github.com/gruntwork-io/knowledge-base/discussions/412" />
</head>

<CenterLayout>
<span className="searchCategory">Knowledge Base</span>
<h1>Help! Terraform Cloud have removed `python` from their worker image</h1>
<GitHub discussion={{"id":"D_kwDOF8slf84APhB-","number":412,"author":{"login":"KOConchobhair"},"title":"Help! Terraform Cloud have removed `python` from their worker image","body":"\nI have been using Gruntwork modules in conjunction with Terraform Cloud for over a year. Last night, when I went to change my AMI ID to trigger a rolling deployment in the ASG module, I got the following errors:\r\n![image](https://user-images.githubusercontent.com/2014215/167910290-8bcb3c10-53ad-4c14-a062-aa6ca6ae410b.png)\r\n\r\nSo it appears they have removed `python` executable from their TF cloud worker/runner. As far as I can tell, there was no notice, no documentation or release notes on this - they just changed it without warning and now my deployment is completely blocked. I contacted HashiCorp support and they simply said\r\n> You are correct that there were some changes made to the workers' image.\r\n> Currently, python3 is available on the image.\r\n> Would it work for you to substitute python with python3?\r\n\r\nSo I ask the grunts, is it possible to use `python3` instead of `python` for this script?\r\nhttps://github.com/gruntwork-io/terraform-aws-asg/blob/457efad3ea8a0682c8bc01d0696f4b75cfeb3314/modules/server-group/main.tf#L635\r\n\r\nAnd update the version of join-path module used to get support for `python3`?\r\nhttps://github.com/gruntwork-io/terraform-aws-ecs/blob/4d156d23ccfd672532d3c7ed323fbc4cdf97df5f/modules/ecs-service/deployment_check.tf#L78\r\nhttps://github.com/gruntwork-io/terraform-aws-asg/blob/457efad3ea8a0682c8bc01d0696f4b75cfeb3314/modules/server-group/main.tf#L668\r\n\r\nI know Gruntwork may not provide explicit support for running on Terraform Cloud but I would think it benefits everyone if the awesome Gruntwork modules work in that environment as well. \r\n\r\nP.S. There's an additional error (same cause) due to python usage in the ecs_deployment_check module as well:\r\n![image](https://user-images.githubusercontent.com/2014215/167910418-253b386b-6ada-47ae-951c-3d499460f355.png)\r\nIn this case, I even have `enable_ecs_deployment_check = false` but it still runs the python code.\r\n\n\n---\n\n<ins datetime=\"2022-05-11T17:49:20Z\">\n  <p><a href=\"https://support.gruntwork.io/hc/requests/108578\">Tracked in ticket #108578</a></p>\n</ins>\n","bodyHTML":"<p dir=\"auto\">I have been using Gruntwork modules in conjunction with Terraform Cloud for over a year. Last night, when I went to change my AMI ID to trigger a rolling deployment in the ASG module, I got the following errors:<br>\n<a target=\"_blank\" rel=\"noopener noreferrer nofollow\" href=\"https://user-images.githubusercontent.com/2014215/167910290-8bcb3c10-53ad-4c14-a062-aa6ca6ae410b.png\"><img src=\"https://user-images.githubusercontent.com/2014215/167910290-8bcb3c10-53ad-4c14-a062-aa6ca6ae410b.png\" alt=\"image\" style=\"max-width: 100%;\"></a></p>\n<p dir=\"auto\">So it appears they have removed <code class=\"notranslate\">python</code> executable from their TF cloud worker/runner. As far as I can tell, there was no notice, no documentation or release notes on this - they just changed it without warning and now my deployment is completely blocked. I contacted HashiCorp support and they simply said</p>\n<blockquote>\n<p dir=\"auto\">You are correct that there were some changes made to the workers' image.<br>\nCurrently, python3 is available on the image.<br>\nWould it work for you to substitute python with python3?</p>\n</blockquote>\n<p dir=\"auto\">So I ask the grunts, is it possible to use <code class=\"notranslate\">python3</code> instead of <code class=\"notranslate\">python</code> for this script?<br>\n<a href=\"https://github.com/gruntwork-io/terraform-aws-asg/blob/457efad3ea8a0682c8bc01d0696f4b75cfeb3314/modules/server-group/main.tf#L635\">https://github.com/gruntwork-io/terraform-aws-asg/blob/457efad3ea8a0682c8bc01d0696f4b75cfeb3314/modules/server-group/main.tf#L635</a></p>\n<p dir=\"auto\">And update the version of join-path module used to get support for <code class=\"notranslate\">python3</code>?<br>\n<a href=\"https://github.com/gruntwork-io/terraform-aws-ecs/blob/4d156d23ccfd672532d3c7ed323fbc4cdf97df5f/modules/ecs-service/deployment_check.tf#L78\">https://github.com/gruntwork-io/terraform-aws-ecs/blob/4d156d23ccfd672532d3c7ed323fbc4cdf97df5f/modules/ecs-service/deployment_check.tf#L78</a><br>\n<a href=\"https://github.com/gruntwork-io/terraform-aws-asg/blob/457efad3ea8a0682c8bc01d0696f4b75cfeb3314/modules/server-group/main.tf#L668\">https://github.com/gruntwork-io/terraform-aws-asg/blob/457efad3ea8a0682c8bc01d0696f4b75cfeb3314/modules/server-group/main.tf#L668</a></p>\n<p dir=\"auto\">I know Gruntwork may not provide explicit support for running on Terraform Cloud but I would think it benefits everyone if the awesome Gruntwork modules work in that environment as well.</p>\n<p dir=\"auto\">P.S. There's an additional error (same cause) due to python usage in the ecs_deployment_check module as well:<br>\n<a target=\"_blank\" rel=\"noopener noreferrer nofollow\" href=\"https://user-images.githubusercontent.com/2014215/167910418-253b386b-6ada-47ae-951c-3d499460f355.png\"><img src=\"https://user-images.githubusercontent.com/2014215/167910418-253b386b-6ada-47ae-951c-3d499460f355.png\" alt=\"image\" style=\"max-width: 100%;\"></a><br>\nIn this case, I even have <code class=\"notranslate\">enable_ecs_deployment_check = false</code> but it still runs the python code.</p>\n<hr>\n<ins datetime=\"2022-05-11T17:49:20Z\">\n  <p dir=\"auto\"><a href=\"https://support.gruntwork.io/hc/requests/108578\" rel=\"nofollow\">Tracked in ticket #108578</a></p>\n</ins>","answer":{"body":"Hi we are in the process of implementing this. We recently updated `terraform-aws-utilities` to use `python3` instead of `python`, and are working towards flowing that update through the system. We can't make commitments on when that would be done, but please be on the look out for releases on the relevant repos where we will mention that this change has been done.","bodyHTML":"<p dir=\"auto\">Hi we are in the process of implementing this. We recently updated <code class=\"notranslate\">terraform-aws-utilities</code> to use <code class=\"notranslate\">python3</code> instead of <code class=\"notranslate\">python</code>, and are working towards flowing that update through the system. We can't make commitments on when that would be done, but please be on the look out for releases on the relevant repos where we will mention that this change has been done.</p>"}}} />

</CenterLayout>

<!-- ##DOCS-SOURCER-START
{
  "sourcePlugin": "github-discussions",
  "hash": "48b88dc46473604a365604f4c8810913"
}
##DOCS-SOURCER-END -->
