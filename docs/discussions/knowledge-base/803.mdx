---
hide_table_of_contents: true
hide_title: true
custom_edit_url: null
---

import CenterLayout from "/src/components/CenterLayout"
import GitHub from "/src/components/GitHub"

<head>
  <link rel="canonical" href="https://github.com/gruntwork-io/knowledge-base/discussions/803" />
</head>

<CenterLayout>
<span className="searchCategory">Knowledge Base</span>
<h1>How do I enroll a new account, not created with Gruntwork Pipelines, into the Gruntwork Pipelines?</h1>
<GitHub discussion={{"id":"D_kwDOF8slf84AXuSq","number":803,"author":{"login":"oredavids"},"title":"How do I enroll a new account, not created with Gruntwork Pipelines, into the Gruntwork Pipelines?","body":"\r\nFrequently asked customer question.\r\n\r\n---\r\n\r\n<ins datetime=\"2024-02-14T19:07:19Z\">\r\n  <p><a href=\"https://support.gruntwork.io/hc/requests/110768\">Tracked in ticket #110768</a></p>\r\n</ins>\r\n","bodyHTML":"<p dir=\"auto\">Frequently asked customer question.</p>\n<hr>\n<ins datetime=\"2024-02-14T19:07:19Z\">\n  <p dir=\"auto\"><a href=\"https://support.gruntwork.io/hc/requests/110768\" rel=\"nofollow\">Tracked in ticket #110768</a></p>\n</ins>","answer":{"body":"## Pre-requisites\r\n- Latest version of Terragrunt\r\n- v1.5.7 of Terraform\r\n- AWS Admin credentials for the account\r\n- Configured GitHub user with access to the Gruntwork Library\r\n\r\n## Steps\r\n\r\n1. Checkout your `infrastructure-live` repository locally\r\n2. Create a git branch\r\n3. Modify the placeholders below and add to the `accounts.yml` file located in the root of your repository:\r\n    ```\r\n    ACCOUNT_NAME:\r\n      email: ACCOUNT_EMAIL\r\n      id: \"ACCOUNT_ID\"\r\n    ```\r\n4. Duplicate an existing account's folder(example `logs`) and rename the root directory as the name of your account. The only resources we want to keep will be the GitHub OIDC roles required for Pipelines to run i.e in the `account-name/_global` directory, keep the following folders:\r\n  - central-pipelines-apply-role\r\n  - central-pipelines-plan-role\r\n  - github-actions-openid-connect-provider\r\n  - pipelines-policy-apply-update-role\r\n  - pipelines-policy-plan-update-role\r\n  - pipelines-pre-auth-role\r\n  \r\n  **and delete any other regional resources you copied**.\r\n5. **VERY IMPORTANT**: Update the `account.hcl` in the account's directory to use the new `account_name`\r\n6. Update the `tags.yml` in the account's directory as you see fit\r\n7. Obtain AWS Admin console credentials for the account\r\n8. Using the AWS credentials from the previous step, run the following commands sequentially to bootstrap the account with the OIDC roles Pipelines needs(these steps normally happen automatically for accounts provisioned using the Pipelines)\r\n   ```\r\n   cd ACCOUNT-NAME/_global/github-actions-openid-connect-provider\r\n   terragrunt init\r\n   cd ../..\r\n   terragrunt run-all plan\r\n   terragrunt run-all apply\r\n   ```\r\n9. Commit your changes with a`[skip ci]` directive included in your commit message. This prevents Pipelines from running on this PR since all the changes have just been manually applied.\r\n10. Open a Pull Request, review and merge.\r\n11. Test that Gruntwork pipelines works. You can make a trivial change or add a comment to any of the `terragrunt.hcl` files in the new account's folder and open a Pull Request to trigger a Gruntwork Pipelines run.","bodyHTML":"<h2 dir=\"auto\">Pre-requisites</h2>\n<ul dir=\"auto\">\n<li>Latest version of Terragrunt</li>\n<li>v1.5.7 of Terraform</li>\n<li>AWS Admin credentials for the account</li>\n<li>Configured GitHub user with access to the Gruntwork Library</li>\n</ul>\n<h2 dir=\"auto\">Steps</h2>\n<ol dir=\"auto\">\n<li>Checkout your <code class=\"notranslate\">infrastructure-live</code> repository locally</li>\n<li>Create a git branch</li>\n<li>Modify the placeholders below and add to the <code class=\"notranslate\">accounts.yml</code> file located in the root of your repository:\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"ACCOUNT_NAME:\n  email: ACCOUNT_EMAIL\n  id: &quot;ACCOUNT_ID&quot;\"><pre class=\"notranslate\"><code class=\"notranslate\">ACCOUNT_NAME:\n  email: ACCOUNT_EMAIL\n  id: \"ACCOUNT_ID\"\n</code></pre></div>\n</li>\n<li>Duplicate an existing account's folder(example <code class=\"notranslate\">logs</code>) and rename the root directory as the name of your account. The only resources we want to keep will be the GitHub OIDC roles required for Pipelines to run i.e in the <code class=\"notranslate\">account-name/_global</code> directory, keep the following folders:</li>\n</ol>\n<ul dir=\"auto\">\n<li>central-pipelines-apply-role</li>\n<li>central-pipelines-plan-role</li>\n<li>github-actions-openid-connect-provider</li>\n<li>pipelines-policy-apply-update-role</li>\n<li>pipelines-policy-plan-update-role</li>\n<li>pipelines-pre-auth-role</li>\n</ul>\n<p dir=\"auto\"><strong>and delete any other regional resources you copied</strong>.<br>\n5. <strong>VERY IMPORTANT</strong>: Update the <code class=\"notranslate\">account.hcl</code> in the account's directory to use the new <code class=\"notranslate\">account_name</code><br>\n6. Update the <code class=\"notranslate\">tags.yml</code> in the account's directory as you see fit<br>\n7. Obtain AWS Admin console credentials for the account<br>\n8. Using the AWS credentials from the previous step, run the following commands sequentially to bootstrap the account with the OIDC roles Pipelines needs(these steps normally happen automatically for accounts provisioned using the Pipelines)</p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"cd ACCOUNT-NAME/_global/github-actions-openid-connect-provider\nterragrunt init\ncd ../..\nterragrunt run-all plan\nterragrunt run-all apply\"><pre class=\"notranslate\"><code class=\"notranslate\">cd ACCOUNT-NAME/_global/github-actions-openid-connect-provider\nterragrunt init\ncd ../..\nterragrunt run-all plan\nterragrunt run-all apply\n</code></pre></div>\n<ol start=\"9\" dir=\"auto\">\n<li>Commit your changes with a<code class=\"notranslate\">[skip ci]</code> directive included in your commit message. This prevents Pipelines from running on this PR since all the changes have just been manually applied.</li>\n<li>Open a Pull Request, review and merge.</li>\n<li>Test that Gruntwork pipelines works. You can make a trivial change or add a comment to any of the <code class=\"notranslate\">terragrunt.hcl</code> files in the new account's folder and open a Pull Request to trigger a Gruntwork Pipelines run.</li>\n</ol>"}}} />

</CenterLayout>
  

<!-- ##DOCS-SOURCER-START
{
  "sourcePlugin": "github-discussions",
  "hash": "98ee7354a42d704a52d965ed05cdfb19"
}
##DOCS-SOURCER-END -->
