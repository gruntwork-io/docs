---
hide_table_of_contents: true
hide_title: true
custom_edit_url: null
---

import CenterLayout from "/src/components/CenterLayout"
import GitHub from "/src/components/GitHub"

<CenterLayout>
<span className="searchCategory">Knowledge Base</span>
<h1>Gruntwork Pipelines: What are my options for optimizations?</h1>
<GitHub discussion={{"id":"D_kwDOF8slf84AQs-_","number":553,"author":{"login":"yorinasub17"},"title":"Gruntwork Pipelines: What are my options for optimizations?","body":"\nOur Ref Arch pipeline takes about 20 minutes or more to run through all the deployments, especially when rolling out to multiple accounts. What if we need to apply a critical change asap to production?\n\n---\n\n<ins datetime=\"2022-09-09T14:56:25Z\">\n  <p><a href=\"https://support.gruntwork.io/hc/requests/109228\">Tracked in ticket #109228</a></p>\n</ins>\n","bodyHTML":"<p dir=\"auto\">Our Ref Arch pipeline takes about 20 minutes or more to run through all the deployments, especially when rolling out to multiple accounts. What if we need to apply a critical change asap to production?</p>\n<hr>\n<ins datetime=\"2022-09-09T14:56:25Z\">\n  <p dir=\"auto\"><a href=\"https://support.gruntwork.io/hc/requests/109228\" rel=\"nofollow\">Tracked in ticket #109228</a></p>\n</ins>","answer":{"body":"There are a few things you can do to speed up the pipeline:\r\n\r\n- The pipeline is setup to only apply changes for modules that have been touched in the commit. This means that you can try to narrow the scope of your changes instead of batching them all into one PR, avoiding the need to tie all the updates together in one push.\r\n- ECS Fargate can add latency to the deployment process, due to the way Fargate provisioning works. We have observed that many tasks take 1-2 minutes to boot up and start, especially since AWS has to do a fresh pull of the ECR images when running the task. Switching to [EC2 based ECS Deploy Runner](https://github.com/gruntwork-io/knowledge-base/discussions/353#discussioncomment-2560116) can help with increasing the speed of the tasks to start as it can take advantage of the local docker cache.\r\n\r\nHowever, in general, keep in mind that the pipeline will be bound by the limitations of Terraform and AWS. That is, if it takes 1 hour to roll out a change in AWS (e.g., updating a CloudFront distribution), nothing in the pipeline will be able to speed it up. Thus it is important to be aware of where all the time is being spent. If there are any time inefficiencies you notice in any part of the Gruntwork product (e.g., in the ECS Deploy Runner or Terragrunt), we may be able to help optimize those pieces, but other aspects of the pipeline (e.g., GitHub Actions reaction time) are out of our control.","bodyHTML":"<p dir=\"auto\">There are a few things you can do to speed up the pipeline:</p>\n<ul dir=\"auto\">\n<li>The pipeline is setup to only apply changes for modules that have been touched in the commit. This means that you can try to narrow the scope of your changes instead of batching them all into one PR, avoiding the need to tie all the updates together in one push.</li>\n<li>ECS Fargate can add latency to the deployment process, due to the way Fargate provisioning works. We have observed that many tasks take 1-2 minutes to boot up and start, especially since AWS has to do a fresh pull of the ECR images when running the task. Switching to <a href=\"https://github.com/gruntwork-io/knowledge-base/discussions/353#discussioncomment-2560116\" data-hovercard-type=\"discussion\" data-hovercard-url=\"/gruntwork-io/knowledge-base/discussions/353/hovercard?comment_id=2560116\">EC2 based ECS Deploy Runner</a> can help with increasing the speed of the tasks to start as it can take advantage of the local docker cache.</li>\n</ul>\n<p dir=\"auto\">However, in general, keep in mind that the pipeline will be bound by the limitations of Terraform and AWS. That is, if it takes 1 hour to roll out a change in AWS (e.g., updating a CloudFront distribution), nothing in the pipeline will be able to speed it up. Thus it is important to be aware of where all the time is being spent. If there are any time inefficiencies you notice in any part of the Gruntwork product (e.g., in the ECS Deploy Runner or Terragrunt), we may be able to help optimize those pieces, but other aspects of the pipeline (e.g., GitHub Actions reaction time) are out of our control.</p>"}}} />

</CenterLayout>
  

<!-- ##DOCS-SOURCER-START
{
  "sourcePlugin": "github-discussions",
  "hash": "9539d8c3425d4f66d05b0b217d823d7b"
}
##DOCS-SOURCER-END -->
