---
hide_table_of_contents: true
hide_title: true
custom_edit_url: null
---

import CenterLayout from "/src/components/CenterLayout"
import GitHub from "/src/components/GitHub"

<CenterLayout>
<span className="searchCategory">Knowledge Base</span>
<h1>s3-static-website redirect_rule syntax example isn&apos;t doing it for me.</h1>
<GitHub discussion={{"id":"D_kwDOF8slf84AP0mc","number":469,"author":{"login":"CarltonHenderson"},"title":"s3-static-website redirect_rule syntax example isn't doing it for me.","body":"\nHi, I'm trying to spin up a static s3 site with some redirect rules and just can't figure out the right syntax.\r\n\r\nThe gruntworks example I'm using is [this one](https://github.com/gruntwork-io/terraform-aws-static-assets/blob/v0.15.3/modules/s3-static-website/variables.tf#L88-L99) in the variables file of the right version of the module I'm using.\r\n\r\n```hcl\r\n  routing_rule = {\r\n    condition = {\r\n      key_prefix_equals  = \"docs/\"\r\n    }\r\n\r\n    redirect = {\r\n      hostname = \"example\"\r\n      http_redirect_code = \"403\"\r\n      protocol = \"https\"\r\n      replace_key_prefix_with = \"documents/\"\r\n    }\r\n  }\r\n```\r\n\r\nHowever, I'm getting this error\r\n\r\n```\r\n╷\r\n│ Error: Insufficient redirect blocks\r\n│ \r\n│   on .terraform/modules/static_website.static_website/modules/s3-static-website/main.tf line 78, in resource \"aws_s3_bucket_website_configuration\" \"website\":\r\n│   78:     content {\r\n│ \r\n│ At least 1 \"redirect\" blocks are required.\r\n╵\r\n╷\r\n│ Error: Insufficient redirect blocks\r\n│ \r\n│   on .terraform/modules/static_website.static_website/modules/s3-static-website/main.tf line 78, in resource \"aws_s3_bucket_website_configuration\" \"website\":\r\n│   78:     content {\r\n│ \r\n│ At least 1 \"redirect\" blocks are required.\r\n╵\r\n```\r\n\r\nI feel like I'm missing something small, but it's small so I can't find it. Sadly I also can't find a gruntworks example except the one in the commented out hcl.\r\n\r\nThanks,\r\n\r\nCarl\n\n---\n\n<ins datetime=\"2022-06-15T17:11:22Z\">\n  <p><a href=\"https://support.gruntwork.io/hc/requests/108782\">Tracked in ticket #108782</a></p>\n</ins>\n","bodyHTML":"<p dir=\"auto\">Hi, I'm trying to spin up a static s3 site with some redirect rules and just can't figure out the right syntax.</p>\n<p dir=\"auto\">The gruntworks example I'm using is <a href=\"https://github.com/gruntwork-io/terraform-aws-static-assets/blob/v0.15.3/modules/s3-static-website/variables.tf#L88-L99\">this one</a> in the variables file of the right version of the module I'm using.</p>\n<div class=\"highlight highlight-source-terraform notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"  routing_rule = {\n    condition = {\n      key_prefix_equals  = &quot;docs/&quot;\n    }\n\n    redirect = {\n      hostname = &quot;example&quot;\n      http_redirect_code = &quot;403&quot;\n      protocol = &quot;https&quot;\n      replace_key_prefix_with = &quot;documents/&quot;\n    }\n  }\"><pre>  <span class=\"pl-v\"><span class=\"pl-smi\">routing_rule</span> <span class=\"pl-k\">= </span></span>{\n    condition <span class=\"pl-k\">=</span> {\n      key_prefix_equals  <span class=\"pl-k\">=</span> <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>docs/<span class=\"pl-pds\">\"</span></span>\n    }\n\n    redirect <span class=\"pl-k\">=</span> {\n      hostname <span class=\"pl-k\">=</span> <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>example<span class=\"pl-pds\">\"</span></span>\n      http_redirect_code <span class=\"pl-k\">=</span> <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>403<span class=\"pl-pds\">\"</span></span>\n      protocol <span class=\"pl-k\">=</span> <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>https<span class=\"pl-pds\">\"</span></span>\n      replace_key_prefix_with <span class=\"pl-k\">=</span> <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>documents/<span class=\"pl-pds\">\"</span></span>\n    }\n  }</pre></div>\n<p dir=\"auto\">However, I'm getting this error</p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"╷\n│ Error: Insufficient redirect blocks\n│ \n│   on .terraform/modules/static_website.static_website/modules/s3-static-website/main.tf line 78, in resource &quot;aws_s3_bucket_website_configuration&quot; &quot;website&quot;:\n│   78:     content {\n│ \n│ At least 1 &quot;redirect&quot; blocks are required.\n╵\n╷\n│ Error: Insufficient redirect blocks\n│ \n│   on .terraform/modules/static_website.static_website/modules/s3-static-website/main.tf line 78, in resource &quot;aws_s3_bucket_website_configuration&quot; &quot;website&quot;:\n│   78:     content {\n│ \n│ At least 1 &quot;redirect&quot; blocks are required.\n╵\"><pre class=\"notranslate\"><code>╷\n│ Error: Insufficient redirect blocks\n│ \n│   on .terraform/modules/static_website.static_website/modules/s3-static-website/main.tf line 78, in resource \"aws_s3_bucket_website_configuration\" \"website\":\n│   78:     content {\n│ \n│ At least 1 \"redirect\" blocks are required.\n╵\n╷\n│ Error: Insufficient redirect blocks\n│ \n│   on .terraform/modules/static_website.static_website/modules/s3-static-website/main.tf line 78, in resource \"aws_s3_bucket_website_configuration\" \"website\":\n│   78:     content {\n│ \n│ At least 1 \"redirect\" blocks are required.\n╵\n</code></pre></div>\n<p dir=\"auto\">I feel like I'm missing something small, but it's small so I can't find it. Sadly I also can't find a gruntworks example except the one in the commented out hcl.</p>\n<p dir=\"auto\">Thanks,</p>\n<p dir=\"auto\">Carl</p>\n<hr>\n<ins datetime=\"2022-06-15T17:11:22Z\">\n  <p dir=\"auto\"><a href=\"https://support.gruntwork.io/hc/requests/108782\" rel=\"nofollow\">Tracked in ticket #108782</a></p>\n</ins>","answer":{"body":"I have a potential fix for this in our module code [here](https://github.com/gruntwork-io/terraform-aws-static-assets/pull/111). We're waiting for tests to pass, and also for a review to make sure we didn't miss something. ","bodyHTML":"<p dir=\"auto\">I have a potential fix for this in our module code <a href=\"https://github.com/gruntwork-io/terraform-aws-static-assets/pull/111\">here</a>. We're waiting for tests to pass, and also for a review to make sure we didn't miss something.</p>"}}} />

</CenterLayout>
  

<!-- ##DOCS-SOURCER-START
{
  "sourcePlugin": "github-discussions",
  "hash": "b5254c5f344a17ce76d188a76cce9136"
}
##DOCS-SOURCER-END -->
