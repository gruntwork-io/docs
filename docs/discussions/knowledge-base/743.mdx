---
hide_table_of_contents: true
hide_title: true
custom_edit_url: null
---

import CenterLayout from "/src/components/CenterLayout"
import GitHub from "/src/components/GitHub"

<head>
  <link rel="canonical" href="https://github.com/gruntwork-io/knowledge-base/discussions/743" />
</head>

<CenterLayout>
<span className="searchCategory">Knowledge Base</span>
<h1>How do I expose new variables in the CIS Service Catalog?</h1>
<GitHub discussion={{"id":"D_kwDOF8slf84AUVj5","number":743,"author":{"login":"pete0emerson"},"title":"How do I expose new variables in the CIS Service Catalog?","body":"\nIn the [CIS Service Catalog](https://github.com/gruntwork-io/terraform-aws-cis-service-catalog/), I would like to be able to have a few variables available for me to configure:\r\n\r\n1) `retention_in_days` for the `aws_cloudwatch_log_group` resource\r\n\r\nThe default value is 731 and doesn't make sense for us in our dev and stage accounts\r\n\r\n2) `max_aggregation_interval` for the `aws_flow_log` resource\r\n\r\nThe default value is 600, and we need to change this to 60 four our prod account\r\n\r\nWhat is the best way to move forward quickly? What are the alternatives (with pros and cons)?\n\n---\n\n<ins datetime=\"2023-06-23T20:01:24Z\">\n  <p><a href=\"https://support.gruntwork.io/hc/requests/110299\">Tracked in ticket #110299</a></p>\n</ins>\n","bodyHTML":"<p dir=\"auto\">In the <a href=\"https://github.com/gruntwork-io/terraform-aws-cis-service-catalog/\">CIS Service Catalog</a>, I would like to be able to have a few variables available for me to configure:</p>\n<ol dir=\"auto\">\n<li><code class=\"notranslate\">retention_in_days</code> for the <code class=\"notranslate\">aws_cloudwatch_log_group</code> resource</li>\n</ol>\n<p dir=\"auto\">The default value is 731 and doesn't make sense for us in our dev and stage accounts</p>\n<ol start=\"2\" dir=\"auto\">\n<li><code class=\"notranslate\">max_aggregation_interval</code> for the <code class=\"notranslate\">aws_flow_log</code> resource</li>\n</ol>\n<p dir=\"auto\">The default value is 600, and we need to change this to 60 four our prod account</p>\n<p dir=\"auto\">What is the best way to move forward quickly? What are the alternatives (with pros and cons)?</p>\n<hr>\n<ins datetime=\"2023-06-23T20:01:24Z\">\n  <p dir=\"auto\"><a href=\"https://support.gruntwork.io/hc/requests/110299\" rel=\"nofollow\">Tracked in ticket #110299</a></p>\n</ins>","answer":{"body":"I'll address the question generally, and then dive into this specific example.\r\n\r\n# Options\r\n\r\n## Pull Requests\r\n\r\nFirst, we appreciate PRs. When talking about the [CIS Service Catalog](https://github.com/gruntwork-io/terraform-aws-cis-service-catalog/), that is a wrapper around the [non-CIS Service Catalog](https://github.com/gruntwork-io/terraform-aws-service-catalog/), which in turn brings together modules from our [IaC Library](https://docs.gruntwork.io/library/reference/).\r\n\r\nIn some cases, variables may be exposed at the lowest module level but not propagated up to the Service Catalog (and therefore not up to the CIS Service Catalog). In those cases, the variables would need to be propagated up the chain.\r\n\r\nIn other cases, variables may not be exposed at all at the lowest module level. In those cases, the variable would need to be added at all levels (module, Service Catalog, CIS Service Catalog).\r\n\r\nIn most cases, we'll review your PRs, make sure that it passes our standards (tests, et cetera), and then merge them in and release.\r\n\r\n## Feature Request\r\n\r\nYou can ask us to do this. We'll put it into our queue and triage it and then, if we decide that it merits inclusion in our code base, we'll build it out, issue pull requests, approve, merge, and release. We do not strive to include every single variable for every single resource in our modules. But we also want to suit the needs of our customers, so we'll usually help you out.\r\n\r\n## Fork the repo(s)\r\n\r\nYou can fork the repo(s) (at any or all levels) and make your own changes.\r\n\r\n## Write your own module\r\n\r\nYou could also write your own module or directly put the resources you need in your code base, with the features you need.\r\n\r\n## Comparing the options\r\n\r\nForking may seem like the fastest way to get this done. Indeed, if you need this yesterday, it may be. But now your code base drifts away from ours, and you won't be able to take advantage of our updates as easily. You'd need to manage the differences between our code and yours.\r\n\r\nWriting your own module faces the same problems as forking; you'll need to maintain it.\r\n\r\nIssuing a PR is the second fastest method, and as long as your PRs get merged, then the beauty is that we continue to maintain the code base moving forward, and you don't have to point your code base at your forks. You will have to update your code base to point at the newest version of the repo.\r\n\r\n# Your specific case\r\n\r\n## `retention_in_days` for the `aws_cloudwatch_log_group` resource\r\n\r\n1. `retention_in_days` is not exposed in the CIS Service Catalog.\r\n1. `retention_in_days` is not exposed in the non-CIS Service Catalog.\r\n1. `retention_in_days` _is_ exposed [here](https://github.com/gruntwork-io/terraform-aws-vpc/blob/17e71779b8f04d6e6b6a3e92ba4157d96f85cd83/modules/vpc-flow-logs/main.tf#L59) in the `vpc-flow-logs` module in the `terraform-aws-vpc` repository. It is configured by the `cloudwatch_log_retention` variable.\r\n\r\nThis variable would need to be plumbed up to the non-CIS Service Catalog and passed on to the CIS Service Catalog.\r\n\r\n## `max_aggregation_interval` for the `aws_flow_log` resource\r\n\r\n1. `max_aggregation_interval` is not exposed in either Service Catalog, and it is also not exposed in the `vpc-flow-logs` module in the `terraform-aws-vpc` repository. It is an [optional parameter](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/flow_log#max_aggregation_interval) for the `aws_flow_log` resource, we're just not currently leveraging it.\r\n\r\nThis variable would need to be added to in all three places (terraform-aws-vpc/modules/vpc-flow-logs, non-CIS Service Catalog, and CIS Service Catalog).\r\n","bodyHTML":"<p dir=\"auto\">I'll address the question generally, and then dive into this specific example.</p>\n<h1 dir=\"auto\">Options</h1>\n<h2 dir=\"auto\">Pull Requests</h2>\n<p dir=\"auto\">First, we appreciate PRs. When talking about the <a href=\"https://github.com/gruntwork-io/terraform-aws-cis-service-catalog/\">CIS Service Catalog</a>, that is a wrapper around the <a href=\"https://github.com/gruntwork-io/terraform-aws-service-catalog/\">non-CIS Service Catalog</a>, which in turn brings together modules from our <a href=\"https://docs.gruntwork.io/library/reference/\" rel=\"nofollow\">IaC Library</a>.</p>\n<p dir=\"auto\">In some cases, variables may be exposed at the lowest module level but not propagated up to the Service Catalog (and therefore not up to the CIS Service Catalog). In those cases, the variables would need to be propagated up the chain.</p>\n<p dir=\"auto\">In other cases, variables may not be exposed at all at the lowest module level. In those cases, the variable would need to be added at all levels (module, Service Catalog, CIS Service Catalog).</p>\n<p dir=\"auto\">In most cases, we'll review your PRs, make sure that it passes our standards (tests, et cetera), and then merge them in and release.</p>\n<h2 dir=\"auto\">Feature Request</h2>\n<p dir=\"auto\">You can ask us to do this. We'll put it into our queue and triage it and then, if we decide that it merits inclusion in our code base, we'll build it out, issue pull requests, approve, merge, and release. We do not strive to include every single variable for every single resource in our modules. But we also want to suit the needs of our customers, so we'll usually help you out.</p>\n<h2 dir=\"auto\">Fork the repo(s)</h2>\n<p dir=\"auto\">You can fork the repo(s) (at any or all levels) and make your own changes.</p>\n<h2 dir=\"auto\">Write your own module</h2>\n<p dir=\"auto\">You could also write your own module or directly put the resources you need in your code base, with the features you need.</p>\n<h2 dir=\"auto\">Comparing the options</h2>\n<p dir=\"auto\">Forking may seem like the fastest way to get this done. Indeed, if you need this yesterday, it may be. But now your code base drifts away from ours, and you won't be able to take advantage of our updates as easily. You'd need to manage the differences between our code and yours.</p>\n<p dir=\"auto\">Writing your own module faces the same problems as forking; you'll need to maintain it.</p>\n<p dir=\"auto\">Issuing a PR is the second fastest method, and as long as your PRs get merged, then the beauty is that we continue to maintain the code base moving forward, and you don't have to point your code base at your forks. You will have to update your code base to point at the newest version of the repo.</p>\n<h1 dir=\"auto\">Your specific case</h1>\n<h2 dir=\"auto\"><code class=\"notranslate\">retention_in_days</code> for the <code class=\"notranslate\">aws_cloudwatch_log_group</code> resource</h2>\n<ol dir=\"auto\">\n<li><code class=\"notranslate\">retention_in_days</code> is not exposed in the CIS Service Catalog.</li>\n<li><code class=\"notranslate\">retention_in_days</code> is not exposed in the non-CIS Service Catalog.</li>\n<li><code class=\"notranslate\">retention_in_days</code> <em>is</em> exposed <a href=\"https://github.com/gruntwork-io/terraform-aws-vpc/blob/17e71779b8f04d6e6b6a3e92ba4157d96f85cd83/modules/vpc-flow-logs/main.tf#L59\">here</a> in the <code class=\"notranslate\">vpc-flow-logs</code> module in the <code class=\"notranslate\">terraform-aws-vpc</code> repository. It is configured by the <code class=\"notranslate\">cloudwatch_log_retention</code> variable.</li>\n</ol>\n<p dir=\"auto\">This variable would need to be plumbed up to the non-CIS Service Catalog and passed on to the CIS Service Catalog.</p>\n<h2 dir=\"auto\"><code class=\"notranslate\">max_aggregation_interval</code> for the <code class=\"notranslate\">aws_flow_log</code> resource</h2>\n<ol dir=\"auto\">\n<li><code class=\"notranslate\">max_aggregation_interval</code> is not exposed in either Service Catalog, and it is also not exposed in the <code class=\"notranslate\">vpc-flow-logs</code> module in the <code class=\"notranslate\">terraform-aws-vpc</code> repository. It is an <a href=\"https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/flow_log#max_aggregation_interval\" rel=\"nofollow\">optional parameter</a> for the <code class=\"notranslate\">aws_flow_log</code> resource, we're just not currently leveraging it.</li>\n</ol>\n<p dir=\"auto\">This variable would need to be added to in all three places (terraform-aws-vpc/modules/vpc-flow-logs, non-CIS Service Catalog, and CIS Service Catalog).</p>"}}} />

</CenterLayout>
  

<!-- ##DOCS-SOURCER-START
{
  "sourcePlugin": "github-discussions",
  "hash": "0e966b84fe67cd118dad34c59f4a67ec"
}
##DOCS-SOURCER-END -->
