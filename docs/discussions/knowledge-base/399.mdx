---
hide_table_of_contents: true
hide_title: true
custom_edit_url: null
---

import CenterLayout from "/src/components/CenterLayout"
import GitHub from "/src/components/GitHub"

<head>
  <link rel="canonical" href="https://github.com/gruntwork-io/knowledge-base/discussions/399" />
</head>

<CenterLayout>
<span className="searchCategory">Knowledge Base</span>
<h1>security hub errors about regions not opted in</h1>
<GitHub discussion={{"id":"D_kwDOF8slf84APanv","number":399,"author":{"login":"moos3"},"title":"security hub errors about regions not opted in","body":"\nSo we are seeing errors from security hub, for regions that we haven't opted into for the reference arch. \r\n\r\n```\r\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │ Error: Cannot find InvitationId for MasterId ********************\r\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │ \r\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │   with module.security_hub.aws_securityhub_invite_accepter.invitee_ap_northeast_1[0],\r\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │   on ../../security/aws-securityhub/main.tf line 200, in resource \"aws_securityhub_invite_accepter\" \"invitee_ap_northeast_1\":\r\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │  200: resource \"aws_securityhub_invite_accepter\" \"invitee_ap_northeast_1\" {\r\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │ \r\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] ╵\r\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] ╷\r\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │ Error: Cannot find InvitationId for MasterId ********************\r\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │ \r\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │   with module.security_hub.aws_securityhub_invite_accepter.invitee_ap_northeast_2[0],\r\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │   on ../../security/aws-securityhub/main.tf line 258, in resource \"aws_securityhub_invite_accepter\" \"invitee_ap_northeast_2\":\r\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │  258: resource \"aws_securityhub_invite_accepter\" \"invitee_ap_northeast_2\" {\r\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │ \r\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] ╵\r\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] ╷\r\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │ Error: Cannot find InvitationId for MasterId ********************\r\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │ \r\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │   with module.security_hub.aws_securityhub_invite_accepter.invitee_ap_south_1[0],\r\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │   on ../../security/aws-securityhub/main.tf line 374, in resource \"aws_securityhub_invite_accepter\" \"invitee_ap_south_1\":\r\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │  374: resource \"aws_securityhub_invite_accepter\" \"invitee_ap_south_1\" {\r\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │ \r\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] ╵\r\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] ╷\r\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │ Error: Cannot find InvitationId for MasterId ********************\r\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │ \r\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │   with module.security_hub.aws_securityhub_invite_accepter.invitee_ap_southeast_1[0],\r\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │   on ../../security/aws-securityhub/main.tf line 432, in resource \"aws_securityhub_invite_accepter\" \"invitee_ap_southeast_1\":\r\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │  432: resource \"aws_securityhub_invite_accepter\" \"invitee_ap_southeast_1\" {\r\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │ \r\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] ╵\r\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] ╷\r\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │ Error: Cannot find InvitationId for MasterId ********************\r\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │ \r\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │   with module.security_hub.aws_securityhub_invite_accepter.invitee_ap_southeast_2[0],\r\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │   on ../../security/aws-securityhub/main.tf line 490, in resource \"aws_securityhub_invite_accepter\" \"invitee_ap_southeast_2\":\r\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │  490: resource \"aws_securityhub_invite_accepter\" \"invitee_ap_southeast_2\" {\r\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │ \r\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] ╵\r\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] ╷\r\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │ Error: Cannot find InvitationId for MasterId ********************\r\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │ \r\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │   with module.security_hub.aws_securityhub_invite_accepter.invitee_ca_central_1[0],\r\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │   on ../../security/aws-securityhub/main.tf line 606, in resource \"aws_securityhub_invite_accepter\" \"invitee_ca_central_1\":\r\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │  606: resource \"aws_securityhub_invite_accepter\" \"invitee_ca_central_1\" {\r\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │ \r\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] ╵\r\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] ╷\r\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │ Error: Cannot find InvitationId for MasterId ********************\r\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │ \r\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │   with module.security_hub.aws_securityhub_invite_accepter.invitee_eu_central_1[0],\r\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │   on ../../security/aws-securityhub/main.tf line 664, in resource \"aws_securityhub_invite_accepter\" \"invitee_eu_central_1\":\r\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │  664: resource \"aws_securityhub_invite_accepter\" \"invitee_eu_central_1\" {\r\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │ \r\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] ╵\r\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] ╷\r\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │ Error: Cannot find InvitationId for MasterId ********************\r\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │ \r\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │   with module.security_hub.aws_securityhub_invite_accepter.invitee_eu_north_1[0],\r\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │   on ../../security/aws-securityhub/main.tf line 722, in resource \"aws_securityhub_invite_accepter\" \"invitee_eu_north_1\":\r\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │  722: resource \"aws_securityhub_invite_accepter\" \"invitee_eu_north_1\" {\r\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │ \r\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] ╵\r\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] ╷\r\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │ Error: Cannot find InvitationId for MasterId ********************\r\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │ \r\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │   with module.security_hub.aws_securityhub_invite_accepter.invitee_eu_west_1[0],\r\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │   on ../../security/aws-securityhub/main.tf line 838, in resource \"aws_securityhub_invite_accepter\" \"invitee_eu_west_1\":\r\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │  838: resource \"aws_securityhub_invite_accepter\" \"invitee_eu_west_1\" {\r\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │ \r\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] ╵\r\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] ╷\r\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │ Error: Cannot find InvitationId for MasterId ********************\r\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │ \r\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │   with module.security_hub.aws_securityhub_invite_accepter.invitee_eu_west_2[0],\r\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │   on ../../security/aws-securityhub/main.tf line 896, in resource \"aws_securityhub_invite_accepter\" \"invitee_eu_west_2\":\r\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │  896: resource \"aws_securityhub_invite_accepter\" \"invitee_eu_west_2\" {\r\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │ \r\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] ╵\r\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] ╷\r\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │ Error: Cannot find InvitationId for MasterId ********************\r\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │ \r\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │   with module.security_hub.aws_securityhub_invite_accepter.invitee_eu_west_3[0],\r\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │   on ../../security/aws-securityhub/main.tf line 954, in resource \"aws_securityhub_invite_accepter\" \"invitee_eu_west_3\":\r\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │  954: resource \"aws_securityhub_invite_accepter\" \"invitee_eu_west_3\" {\r\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │ \r\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] ╵\r\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] ╷\r\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │ Error: Cannot find InvitationId for MasterId ********************\r\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │ \r\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │   with module.security_hub.aws_securityhub_invite_accepter.invitee_sa_east_1[0],\r\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │   on ../../security/aws-securityhub/main.tf line 1070, in resource \"aws_securityhub_invite_accepter\" \"invitee_sa_east_1\":\r\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │ 1070: resource \"aws_securityhub_invite_accepter\" \"invitee_sa_east_1\" {\r\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │ \r\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] ╵\r\n\r\n```\r\n\r\nOur regions are configured as such in multi_region_common.hcl\r\n```\r\n# ----------------------------------------------------------------------------------------------------------------\r\n# MULTIREGION CONVENIENCE LOCALS\r\n# The following locals are used for constructing multi region provider configurations for the underlying module.\r\n# ----------------------------------------------------------------------------------------------------------------\r\nlocals {\r\n  # A list of all AWS regions\r\n  all_aws_regions = [\r\n    \"af-south-1\",\r\n    \"ap-east-1\",\r\n    \"ap-northeast-1\",\r\n    \"ap-northeast-2\",\r\n    \"ap-northeast-3\",\r\n    \"ap-south-1\",\r\n    \"ap-southeast-1\",\r\n    \"ap-southeast-2\",\r\n    \"ap-southeast-3\",\r\n    \"ca-central-1\",\r\n    \"cn-north-1\",\r\n    \"cn-northwest-1\",\r\n    \"eu-central-1\",\r\n    \"eu-north-1\",\r\n    \"eu-south-1\",\r\n    \"eu-west-1\",\r\n    \"eu-west-2\",\r\n    \"eu-west-3\",\r\n    \"me-south-1\",\r\n    \"sa-east-1\",\r\n    \"us-east-1\",\r\n    \"us-east-2\",\r\n    \"us-gov-east-1\",\r\n    \"us-gov-west-1\",\r\n    \"us-west-1\",\r\n    \"us-west-2\",\r\n  ]\r\n\r\n  # Creates resources in the specified regions. The best practice is to enable multiregion modules in all enabled\r\n  # regions in your AWS account. To get the list of regions enabled in your AWS account, you can use the AWS CLI: aws\r\n  # ec2 describe-regions.\r\n  opt_in_regions = [\r\n    # Disables as we will not operate in these regions anytime soon\r\n    \"eu-north-1\",\r\n    \"ap-south-1\",\r\n    \"eu-west-3\",\r\n    \"eu-west-2\",\r\n    \"eu-west-1\",\r\n    \"ap-northeast-2\",\r\n    \"ap-northeast-1\",\r\n    \"sa-east-1\",\r\n    \"ca-central-1\",\r\n    \"ap-southeast-1\",\r\n    \"ap-southeast-2\",\r\n    \"eu-central-1\",\r\n    \"us-east-1\",\r\n    \"us-east-2\",\r\n    \"us-west-1\",\r\n    \"us-west-2\",\r\n\r\n    # By default, skip regions that are not enabled in most AWS accounts:\r\n    #\r\n    #  \"af-south-1\",     # Cape Town\r\n    #  \"ap-east-1\",      # Hong Kong\r\n    #  \"eu-south-1\",     # Milan\r\n    #  \"me-south-1\",     # Bahrain\r\n    #  \"us-gov-east-1\",  # GovCloud\r\n    #  \"us-gov-west-1\",  # GovCloud\r\n    #  \"cn-north-1\",     # China\r\n    #  \"cn-northwest-1\", # China\r\n    #\r\n    # This region is enabled by default but is brand-new and some services like AWS Config don't work.\r\n    # \"ap-northeast-3\", # Asia Pacific (Osaka)\r\n  ]\r\n}\r\n```\r\n\n\n---\n\n<ins datetime=\"2022-04-28T18:35:34Z\">\n  <p><a href=\"https://gruntwork.zendesk.com/agent/tickets/108524\">Tracked in ticket #108524</a></p>\n</ins>\n","bodyHTML":"<p dir=\"auto\">So we are seeing errors from security hub, for regions that we haven't opted into for the reference arch.</p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"[ecs-deploy-runner][2022-04-28T18:19:04+0000] │ Error: Cannot find InvitationId for MasterId ********************\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │ \n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │   with module.security_hub.aws_securityhub_invite_accepter.invitee_ap_northeast_1[0],\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │   on ../../security/aws-securityhub/main.tf line 200, in resource &quot;aws_securityhub_invite_accepter&quot; &quot;invitee_ap_northeast_1&quot;:\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │  200: resource &quot;aws_securityhub_invite_accepter&quot; &quot;invitee_ap_northeast_1&quot; {\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │ \n[ecs-deploy-runner][2022-04-28T18:19:04+0000] ╵\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] ╷\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │ Error: Cannot find InvitationId for MasterId ********************\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │ \n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │   with module.security_hub.aws_securityhub_invite_accepter.invitee_ap_northeast_2[0],\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │   on ../../security/aws-securityhub/main.tf line 258, in resource &quot;aws_securityhub_invite_accepter&quot; &quot;invitee_ap_northeast_2&quot;:\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │  258: resource &quot;aws_securityhub_invite_accepter&quot; &quot;invitee_ap_northeast_2&quot; {\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │ \n[ecs-deploy-runner][2022-04-28T18:19:04+0000] ╵\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] ╷\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │ Error: Cannot find InvitationId for MasterId ********************\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │ \n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │   with module.security_hub.aws_securityhub_invite_accepter.invitee_ap_south_1[0],\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │   on ../../security/aws-securityhub/main.tf line 374, in resource &quot;aws_securityhub_invite_accepter&quot; &quot;invitee_ap_south_1&quot;:\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │  374: resource &quot;aws_securityhub_invite_accepter&quot; &quot;invitee_ap_south_1&quot; {\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │ \n[ecs-deploy-runner][2022-04-28T18:19:04+0000] ╵\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] ╷\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │ Error: Cannot find InvitationId for MasterId ********************\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │ \n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │   with module.security_hub.aws_securityhub_invite_accepter.invitee_ap_southeast_1[0],\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │   on ../../security/aws-securityhub/main.tf line 432, in resource &quot;aws_securityhub_invite_accepter&quot; &quot;invitee_ap_southeast_1&quot;:\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │  432: resource &quot;aws_securityhub_invite_accepter&quot; &quot;invitee_ap_southeast_1&quot; {\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │ \n[ecs-deploy-runner][2022-04-28T18:19:04+0000] ╵\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] ╷\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │ Error: Cannot find InvitationId for MasterId ********************\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │ \n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │   with module.security_hub.aws_securityhub_invite_accepter.invitee_ap_southeast_2[0],\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │   on ../../security/aws-securityhub/main.tf line 490, in resource &quot;aws_securityhub_invite_accepter&quot; &quot;invitee_ap_southeast_2&quot;:\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │  490: resource &quot;aws_securityhub_invite_accepter&quot; &quot;invitee_ap_southeast_2&quot; {\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │ \n[ecs-deploy-runner][2022-04-28T18:19:04+0000] ╵\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] ╷\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │ Error: Cannot find InvitationId for MasterId ********************\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │ \n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │   with module.security_hub.aws_securityhub_invite_accepter.invitee_ca_central_1[0],\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │   on ../../security/aws-securityhub/main.tf line 606, in resource &quot;aws_securityhub_invite_accepter&quot; &quot;invitee_ca_central_1&quot;:\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │  606: resource &quot;aws_securityhub_invite_accepter&quot; &quot;invitee_ca_central_1&quot; {\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │ \n[ecs-deploy-runner][2022-04-28T18:19:04+0000] ╵\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] ╷\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │ Error: Cannot find InvitationId for MasterId ********************\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │ \n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │   with module.security_hub.aws_securityhub_invite_accepter.invitee_eu_central_1[0],\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │   on ../../security/aws-securityhub/main.tf line 664, in resource &quot;aws_securityhub_invite_accepter&quot; &quot;invitee_eu_central_1&quot;:\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │  664: resource &quot;aws_securityhub_invite_accepter&quot; &quot;invitee_eu_central_1&quot; {\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │ \n[ecs-deploy-runner][2022-04-28T18:19:04+0000] ╵\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] ╷\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │ Error: Cannot find InvitationId for MasterId ********************\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │ \n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │   with module.security_hub.aws_securityhub_invite_accepter.invitee_eu_north_1[0],\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │   on ../../security/aws-securityhub/main.tf line 722, in resource &quot;aws_securityhub_invite_accepter&quot; &quot;invitee_eu_north_1&quot;:\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │  722: resource &quot;aws_securityhub_invite_accepter&quot; &quot;invitee_eu_north_1&quot; {\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │ \n[ecs-deploy-runner][2022-04-28T18:19:04+0000] ╵\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] ╷\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │ Error: Cannot find InvitationId for MasterId ********************\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │ \n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │   with module.security_hub.aws_securityhub_invite_accepter.invitee_eu_west_1[0],\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │   on ../../security/aws-securityhub/main.tf line 838, in resource &quot;aws_securityhub_invite_accepter&quot; &quot;invitee_eu_west_1&quot;:\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │  838: resource &quot;aws_securityhub_invite_accepter&quot; &quot;invitee_eu_west_1&quot; {\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │ \n[ecs-deploy-runner][2022-04-28T18:19:04+0000] ╵\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] ╷\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │ Error: Cannot find InvitationId for MasterId ********************\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │ \n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │   with module.security_hub.aws_securityhub_invite_accepter.invitee_eu_west_2[0],\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │   on ../../security/aws-securityhub/main.tf line 896, in resource &quot;aws_securityhub_invite_accepter&quot; &quot;invitee_eu_west_2&quot;:\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │  896: resource &quot;aws_securityhub_invite_accepter&quot; &quot;invitee_eu_west_2&quot; {\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │ \n[ecs-deploy-runner][2022-04-28T18:19:04+0000] ╵\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] ╷\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │ Error: Cannot find InvitationId for MasterId ********************\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │ \n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │   with module.security_hub.aws_securityhub_invite_accepter.invitee_eu_west_3[0],\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │   on ../../security/aws-securityhub/main.tf line 954, in resource &quot;aws_securityhub_invite_accepter&quot; &quot;invitee_eu_west_3&quot;:\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │  954: resource &quot;aws_securityhub_invite_accepter&quot; &quot;invitee_eu_west_3&quot; {\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │ \n[ecs-deploy-runner][2022-04-28T18:19:04+0000] ╵\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] ╷\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │ Error: Cannot find InvitationId for MasterId ********************\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │ \n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │   with module.security_hub.aws_securityhub_invite_accepter.invitee_sa_east_1[0],\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │   on ../../security/aws-securityhub/main.tf line 1070, in resource &quot;aws_securityhub_invite_accepter&quot; &quot;invitee_sa_east_1&quot;:\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │ 1070: resource &quot;aws_securityhub_invite_accepter&quot; &quot;invitee_sa_east_1&quot; {\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │ \n[ecs-deploy-runner][2022-04-28T18:19:04+0000] ╵\n\"><pre class=\"notranslate\"><code class=\"notranslate\">[ecs-deploy-runner][2022-04-28T18:19:04+0000] │ Error: Cannot find InvitationId for MasterId ********************\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │ \n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │   with module.security_hub.aws_securityhub_invite_accepter.invitee_ap_northeast_1[0],\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │   on ../../security/aws-securityhub/main.tf line 200, in resource \"aws_securityhub_invite_accepter\" \"invitee_ap_northeast_1\":\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │  200: resource \"aws_securityhub_invite_accepter\" \"invitee_ap_northeast_1\" {\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │ \n[ecs-deploy-runner][2022-04-28T18:19:04+0000] ╵\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] ╷\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │ Error: Cannot find InvitationId for MasterId ********************\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │ \n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │   with module.security_hub.aws_securityhub_invite_accepter.invitee_ap_northeast_2[0],\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │   on ../../security/aws-securityhub/main.tf line 258, in resource \"aws_securityhub_invite_accepter\" \"invitee_ap_northeast_2\":\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │  258: resource \"aws_securityhub_invite_accepter\" \"invitee_ap_northeast_2\" {\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │ \n[ecs-deploy-runner][2022-04-28T18:19:04+0000] ╵\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] ╷\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │ Error: Cannot find InvitationId for MasterId ********************\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │ \n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │   with module.security_hub.aws_securityhub_invite_accepter.invitee_ap_south_1[0],\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │   on ../../security/aws-securityhub/main.tf line 374, in resource \"aws_securityhub_invite_accepter\" \"invitee_ap_south_1\":\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │  374: resource \"aws_securityhub_invite_accepter\" \"invitee_ap_south_1\" {\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │ \n[ecs-deploy-runner][2022-04-28T18:19:04+0000] ╵\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] ╷\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │ Error: Cannot find InvitationId for MasterId ********************\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │ \n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │   with module.security_hub.aws_securityhub_invite_accepter.invitee_ap_southeast_1[0],\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │   on ../../security/aws-securityhub/main.tf line 432, in resource \"aws_securityhub_invite_accepter\" \"invitee_ap_southeast_1\":\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │  432: resource \"aws_securityhub_invite_accepter\" \"invitee_ap_southeast_1\" {\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │ \n[ecs-deploy-runner][2022-04-28T18:19:04+0000] ╵\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] ╷\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │ Error: Cannot find InvitationId for MasterId ********************\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │ \n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │   with module.security_hub.aws_securityhub_invite_accepter.invitee_ap_southeast_2[0],\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │   on ../../security/aws-securityhub/main.tf line 490, in resource \"aws_securityhub_invite_accepter\" \"invitee_ap_southeast_2\":\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │  490: resource \"aws_securityhub_invite_accepter\" \"invitee_ap_southeast_2\" {\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │ \n[ecs-deploy-runner][2022-04-28T18:19:04+0000] ╵\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] ╷\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │ Error: Cannot find InvitationId for MasterId ********************\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │ \n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │   with module.security_hub.aws_securityhub_invite_accepter.invitee_ca_central_1[0],\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │   on ../../security/aws-securityhub/main.tf line 606, in resource \"aws_securityhub_invite_accepter\" \"invitee_ca_central_1\":\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │  606: resource \"aws_securityhub_invite_accepter\" \"invitee_ca_central_1\" {\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │ \n[ecs-deploy-runner][2022-04-28T18:19:04+0000] ╵\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] ╷\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │ Error: Cannot find InvitationId for MasterId ********************\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │ \n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │   with module.security_hub.aws_securityhub_invite_accepter.invitee_eu_central_1[0],\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │   on ../../security/aws-securityhub/main.tf line 664, in resource \"aws_securityhub_invite_accepter\" \"invitee_eu_central_1\":\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │  664: resource \"aws_securityhub_invite_accepter\" \"invitee_eu_central_1\" {\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │ \n[ecs-deploy-runner][2022-04-28T18:19:04+0000] ╵\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] ╷\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │ Error: Cannot find InvitationId for MasterId ********************\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │ \n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │   with module.security_hub.aws_securityhub_invite_accepter.invitee_eu_north_1[0],\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │   on ../../security/aws-securityhub/main.tf line 722, in resource \"aws_securityhub_invite_accepter\" \"invitee_eu_north_1\":\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │  722: resource \"aws_securityhub_invite_accepter\" \"invitee_eu_north_1\" {\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │ \n[ecs-deploy-runner][2022-04-28T18:19:04+0000] ╵\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] ╷\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │ Error: Cannot find InvitationId for MasterId ********************\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │ \n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │   with module.security_hub.aws_securityhub_invite_accepter.invitee_eu_west_1[0],\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │   on ../../security/aws-securityhub/main.tf line 838, in resource \"aws_securityhub_invite_accepter\" \"invitee_eu_west_1\":\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │  838: resource \"aws_securityhub_invite_accepter\" \"invitee_eu_west_1\" {\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │ \n[ecs-deploy-runner][2022-04-28T18:19:04+0000] ╵\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] ╷\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │ Error: Cannot find InvitationId for MasterId ********************\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │ \n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │   with module.security_hub.aws_securityhub_invite_accepter.invitee_eu_west_2[0],\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │   on ../../security/aws-securityhub/main.tf line 896, in resource \"aws_securityhub_invite_accepter\" \"invitee_eu_west_2\":\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │  896: resource \"aws_securityhub_invite_accepter\" \"invitee_eu_west_2\" {\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │ \n[ecs-deploy-runner][2022-04-28T18:19:04+0000] ╵\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] ╷\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │ Error: Cannot find InvitationId for MasterId ********************\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │ \n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │   with module.security_hub.aws_securityhub_invite_accepter.invitee_eu_west_3[0],\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │   on ../../security/aws-securityhub/main.tf line 954, in resource \"aws_securityhub_invite_accepter\" \"invitee_eu_west_3\":\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │  954: resource \"aws_securityhub_invite_accepter\" \"invitee_eu_west_3\" {\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │ \n[ecs-deploy-runner][2022-04-28T18:19:04+0000] ╵\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] ╷\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │ Error: Cannot find InvitationId for MasterId ********************\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │ \n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │   with module.security_hub.aws_securityhub_invite_accepter.invitee_sa_east_1[0],\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │   on ../../security/aws-securityhub/main.tf line 1070, in resource \"aws_securityhub_invite_accepter\" \"invitee_sa_east_1\":\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │ 1070: resource \"aws_securityhub_invite_accepter\" \"invitee_sa_east_1\" {\n[ecs-deploy-runner][2022-04-28T18:19:04+0000] │ \n[ecs-deploy-runner][2022-04-28T18:19:04+0000] ╵\n\n</code></pre></div>\n<p dir=\"auto\">Our regions are configured as such in multi_region_common.hcl</p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"# ----------------------------------------------------------------------------------------------------------------\n# MULTIREGION CONVENIENCE LOCALS\n# The following locals are used for constructing multi region provider configurations for the underlying module.\n# ----------------------------------------------------------------------------------------------------------------\nlocals {\n  # A list of all AWS regions\n  all_aws_regions = [\n    &quot;af-south-1&quot;,\n    &quot;ap-east-1&quot;,\n    &quot;ap-northeast-1&quot;,\n    &quot;ap-northeast-2&quot;,\n    &quot;ap-northeast-3&quot;,\n    &quot;ap-south-1&quot;,\n    &quot;ap-southeast-1&quot;,\n    &quot;ap-southeast-2&quot;,\n    &quot;ap-southeast-3&quot;,\n    &quot;ca-central-1&quot;,\n    &quot;cn-north-1&quot;,\n    &quot;cn-northwest-1&quot;,\n    &quot;eu-central-1&quot;,\n    &quot;eu-north-1&quot;,\n    &quot;eu-south-1&quot;,\n    &quot;eu-west-1&quot;,\n    &quot;eu-west-2&quot;,\n    &quot;eu-west-3&quot;,\n    &quot;me-south-1&quot;,\n    &quot;sa-east-1&quot;,\n    &quot;us-east-1&quot;,\n    &quot;us-east-2&quot;,\n    &quot;us-gov-east-1&quot;,\n    &quot;us-gov-west-1&quot;,\n    &quot;us-west-1&quot;,\n    &quot;us-west-2&quot;,\n  ]\n\n  # Creates resources in the specified regions. The best practice is to enable multiregion modules in all enabled\n  # regions in your AWS account. To get the list of regions enabled in your AWS account, you can use the AWS CLI: aws\n  # ec2 describe-regions.\n  opt_in_regions = [\n    # Disables as we will not operate in these regions anytime soon\n    &quot;eu-north-1&quot;,\n    &quot;ap-south-1&quot;,\n    &quot;eu-west-3&quot;,\n    &quot;eu-west-2&quot;,\n    &quot;eu-west-1&quot;,\n    &quot;ap-northeast-2&quot;,\n    &quot;ap-northeast-1&quot;,\n    &quot;sa-east-1&quot;,\n    &quot;ca-central-1&quot;,\n    &quot;ap-southeast-1&quot;,\n    &quot;ap-southeast-2&quot;,\n    &quot;eu-central-1&quot;,\n    &quot;us-east-1&quot;,\n    &quot;us-east-2&quot;,\n    &quot;us-west-1&quot;,\n    &quot;us-west-2&quot;,\n\n    # By default, skip regions that are not enabled in most AWS accounts:\n    #\n    #  &quot;af-south-1&quot;,     # Cape Town\n    #  &quot;ap-east-1&quot;,      # Hong Kong\n    #  &quot;eu-south-1&quot;,     # Milan\n    #  &quot;me-south-1&quot;,     # Bahrain\n    #  &quot;us-gov-east-1&quot;,  # GovCloud\n    #  &quot;us-gov-west-1&quot;,  # GovCloud\n    #  &quot;cn-north-1&quot;,     # China\n    #  &quot;cn-northwest-1&quot;, # China\n    #\n    # This region is enabled by default but is brand-new and some services like AWS Config don't work.\n    # &quot;ap-northeast-3&quot;, # Asia Pacific (Osaka)\n  ]\n}\"><pre class=\"notranslate\"><code class=\"notranslate\"># ----------------------------------------------------------------------------------------------------------------\n# MULTIREGION CONVENIENCE LOCALS\n# The following locals are used for constructing multi region provider configurations for the underlying module.\n# ----------------------------------------------------------------------------------------------------------------\nlocals {\n  # A list of all AWS regions\n  all_aws_regions = [\n    \"af-south-1\",\n    \"ap-east-1\",\n    \"ap-northeast-1\",\n    \"ap-northeast-2\",\n    \"ap-northeast-3\",\n    \"ap-south-1\",\n    \"ap-southeast-1\",\n    \"ap-southeast-2\",\n    \"ap-southeast-3\",\n    \"ca-central-1\",\n    \"cn-north-1\",\n    \"cn-northwest-1\",\n    \"eu-central-1\",\n    \"eu-north-1\",\n    \"eu-south-1\",\n    \"eu-west-1\",\n    \"eu-west-2\",\n    \"eu-west-3\",\n    \"me-south-1\",\n    \"sa-east-1\",\n    \"us-east-1\",\n    \"us-east-2\",\n    \"us-gov-east-1\",\n    \"us-gov-west-1\",\n    \"us-west-1\",\n    \"us-west-2\",\n  ]\n\n  # Creates resources in the specified regions. The best practice is to enable multiregion modules in all enabled\n  # regions in your AWS account. To get the list of regions enabled in your AWS account, you can use the AWS CLI: aws\n  # ec2 describe-regions.\n  opt_in_regions = [\n    # Disables as we will not operate in these regions anytime soon\n    \"eu-north-1\",\n    \"ap-south-1\",\n    \"eu-west-3\",\n    \"eu-west-2\",\n    \"eu-west-1\",\n    \"ap-northeast-2\",\n    \"ap-northeast-1\",\n    \"sa-east-1\",\n    \"ca-central-1\",\n    \"ap-southeast-1\",\n    \"ap-southeast-2\",\n    \"eu-central-1\",\n    \"us-east-1\",\n    \"us-east-2\",\n    \"us-west-1\",\n    \"us-west-2\",\n\n    # By default, skip regions that are not enabled in most AWS accounts:\n    #\n    #  \"af-south-1\",     # Cape Town\n    #  \"ap-east-1\",      # Hong Kong\n    #  \"eu-south-1\",     # Milan\n    #  \"me-south-1\",     # Bahrain\n    #  \"us-gov-east-1\",  # GovCloud\n    #  \"us-gov-west-1\",  # GovCloud\n    #  \"cn-north-1\",     # China\n    #  \"cn-northwest-1\", # China\n    #\n    # This region is enabled by default but is brand-new and some services like AWS Config don't work.\n    # \"ap-northeast-3\", # Asia Pacific (Osaka)\n  ]\n}\n</code></pre></div>\n<hr>\n<ins datetime=\"2022-04-28T18:35:34Z\">\n  <p dir=\"auto\"><a href=\"https://gruntwork.zendesk.com/agent/tickets/108524\" rel=\"nofollow\">Tracked in ticket #108524</a></p>\n</ins>","answer":{"body":"> Cannot find InvitationId for MasterId\r\n\r\nThis is an issue where the Security Hub master account has not invited the current account, and thus the current account can't accept the invite to associate to the master account. If you had opted out of those regions in the `logs` account, then it explains why it is failing in the child accounts because you had removed the invites from the `logs` account to the children for those regions. This is why it works when you removed those regions in the children, because now it is in sync with the state of the `logs` account.","bodyHTML":"<blockquote>\n<p dir=\"auto\">Cannot find InvitationId for MasterId</p>\n</blockquote>\n<p dir=\"auto\">This is an issue where the Security Hub master account has not invited the current account, and thus the current account can't accept the invite to associate to the master account. If you had opted out of those regions in the <code class=\"notranslate\">logs</code> account, then it explains why it is failing in the child accounts because you had removed the invites from the <code class=\"notranslate\">logs</code> account to the children for those regions. This is why it works when you removed those regions in the children, because now it is in sync with the state of the <code class=\"notranslate\">logs</code> account.</p>"}}} />

</CenterLayout>

<!-- ##DOCS-SOURCER-START
{
  "sourcePlugin": "github-discussions",
  "hash": "103e53df6d89b588c7632d858e9bb158"
}
##DOCS-SOURCER-END -->
