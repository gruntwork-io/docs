---
hide_table_of_contents: true
hide_title: true
custom_edit_url: null
---

import CenterLayout from "/src/components/CenterLayout"
import GitHub from "/src/components/GitHub"

<head>
  <link rel="canonical" href="https://github.com/gruntwork-io/knowledge-base/discussions/557" />
</head>

<CenterLayout>
<span className="searchCategory">Knowledge Base</span>
<h1>How do I get Kubernetes metadata about the Pods in Fargate Logs?</h1>
<GitHub discussion={{"id":"D_kwDOF8slf84AQtQ1","number":557,"author":{"login":"yorinasub17"},"title":"How do I get Kubernetes metadata about the Pods in Fargate Logs?","body":"\nI deployed the [eks-fargate-container-logs module](https://github.com/gruntwork-io/terraform-aws-eks/tree/master/modules/eks-fargate-container-logs) module as a part of [eks-core-services module](https://github.com/gruntwork-io/terraform-aws-service-catalog/tree/master/modules/services/eks-core-services). The log message is in a json object with a single key, `log`:\r\n\r\n```json\r\n{\r\n    \"log\": \"2022-09-09T15:30:45.534811998Z stdout F \"\r\n}\r\n```\r\n\r\nIs there anyway I can get more information, such as the pod labels?\n\n---\n\n<ins datetime=\"2022-09-10T00:02:27Z\">\n  <p><a href=\"https://support.gruntwork.io/hc/requests/109233\">Tracked in ticket #109233</a></p>\n</ins>\n","bodyHTML":"<p dir=\"auto\">I deployed the <a href=\"https://github.com/gruntwork-io/terraform-aws-eks/tree/master/modules/eks-fargate-container-logs\">eks-fargate-container-logs module</a> module as a part of <a href=\"https://github.com/gruntwork-io/terraform-aws-service-catalog/tree/master/modules/services/eks-core-services\">eks-core-services module</a>. The log message is in a json object with a single key, <code class=\"notranslate\">log</code>:</p>\n<div class=\"highlight highlight-source-json notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"{\n    &quot;log&quot;: &quot;2022-09-09T15:30:45.534811998Z stdout F &quot;\n}\"><pre class=\"notranslate\">{\n    <span class=\"pl-ent\">\"log\"</span>: <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>2022-09-09T15:30:45.534811998Z stdout F <span class=\"pl-pds\">\"</span></span>\n}</pre></div>\n<p dir=\"auto\">Is there anyway I can get more information, such as the pod labels?</p>\n<hr>\n<ins datetime=\"2022-09-10T00:02:27Z\">\n  <p dir=\"auto\"><a href=\"https://support.gruntwork.io/hc/requests/109233\" rel=\"nofollow\">Tracked in ticket #109233</a></p>\n</ins>","answer":{"body":"This is because by default the Fargate `fluent-bit` instance does not extract the Kubernetes metadata from the pods when shipping the logs to the destination. You can configure the `fluent-bit` instance to scrape the metadata by configuring the `kubernetes` filter as an extra filter in the module. To do this, add the following to your module block or `inputs` map in `terragrunt.hcl` when calling the `eks-core-services` module:\r\n\r\n```hcl\r\n  fargate_fluent_bit_extra_filters = <<-EOF\r\n  [FILTER]\r\n    Name             kubernetes\r\n    Match            kube.*\r\n    Merge_Log           On\r\n    Buffer_Size         0\r\n    Kube_Meta_Cache_TTL 300s\r\n  EOF\r\n```","bodyHTML":"<p dir=\"auto\">This is because by default the Fargate <code class=\"notranslate\">fluent-bit</code> instance does not extract the Kubernetes metadata from the pods when shipping the logs to the destination. You can configure the <code class=\"notranslate\">fluent-bit</code> instance to scrape the metadata by configuring the <code class=\"notranslate\">kubernetes</code> filter as an extra filter in the module. To do this, add the following to your module block or <code class=\"notranslate\">inputs</code> map in <code class=\"notranslate\">terragrunt.hcl</code> when calling the <code class=\"notranslate\">eks-core-services</code> module:</p>\n<div class=\"highlight highlight-source-hcl notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"  fargate_fluent_bit_extra_filters = &lt;&lt;-EOF\n  [FILTER]\n    Name             kubernetes\n    Match            kube.*\n    Merge_Log           On\n    Buffer_Size         0\n    Kube_Meta_Cache_TTL 300s\n  EOF\"><pre class=\"notranslate\">  <span class=\"pl-v\"><span class=\"pl-smi\">fargate_fluent_bit_extra_filters</span> <span class=\"pl-k\">=</span> </span><span class=\"pl-s\"><span class=\"pl-k\">&lt;&lt;-</span><span class=\"pl-k\">EOF</span></span>\n<span class=\"pl-s\">  [FILTER]</span>\n<span class=\"pl-s\">    Name             kubernetes</span>\n<span class=\"pl-s\">    Match            kube.*</span>\n<span class=\"pl-s\">    Merge_Log           On</span>\n<span class=\"pl-s\">    Buffer_Size         0</span>\n<span class=\"pl-s\">    Kube_Meta_Cache_TTL 300s</span>\n<span class=\"pl-s\"><span class=\"pl-k\">  EOF</span></span></pre></div>"}}} />

</CenterLayout>

<!-- ##DOCS-SOURCER-START
{
  "sourcePlugin": "github-discussions",
  "hash": "2508a5fe3c9c1b9591dbb345cd3b3020"
}
##DOCS-SOURCER-END -->
