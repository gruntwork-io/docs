---
hide_table_of_contents: true
hide_title: true
custom_edit_url: null
---

import CenterLayout from "/src/components/CenterLayout"
import GitHub from "/src/components/GitHub"

<head>
  <link rel="canonical" href="https://github.com/gruntwork-io/knowledge-base/discussions/447" />
</head>

<CenterLayout>
<span className="searchCategory">Knowledge Base</span>
<h1>Jenkins in separate account for Reference Architecture</h1>
<GitHub discussion={{"id":"D_kwDOF8slf84APs6d","number":447,"author":{"login":"iantybo"},"title":"Jenkins in separate account for Reference Architecture","body":"\nIf I have an existing Jenkins server running in an AWS account outside of the 6 I used to deploy my Reference Architecture, should I redeploy it into the Shared account? What is the level of effort to keep my existing Jenkins server and have it successfully run `infrastructure-live` CI jobs? And is there an existing Jenkinsfile I can reference? \n\n---\n\n<ins datetime=\"2022-06-02T18:11:21Z\">\n  <p><a href=\"https://support.gruntwork.io/hc/requests/108707\">Tracked in ticket #108707</a></p>\n</ins>\n","bodyHTML":"<p dir=\"auto\">If I have an existing Jenkins server running in an AWS account outside of the 6 I used to deploy my Reference Architecture, should I redeploy it into the Shared account? What is the level of effort to keep my existing Jenkins server and have it successfully run <code class=\"notranslate\">infrastructure-live</code> CI jobs? And is there an existing Jenkinsfile I can reference?</p>\n<hr>\n<ins datetime=\"2022-06-02T18:11:21Z\">\n  <p dir=\"auto\"><a href=\"https://support.gruntwork.io/hc/requests/108707\" rel=\"nofollow\">Tracked in ticket #108707</a></p>\n</ins>","answer":{"body":"You can keep the Jenkins server where it is. The main integration point for auto deploy is handled by the ECS Deploy Runner (explained [here](https://docs.gruntwork.io/guides/build-it-yourself/pipelines/)). Access to invoke the deploy runner is managed by the `allow-auto-deploy-from-other-accounts` IAM Role. So as long as Jenkins can assume that IAM Role in the target account, then it doesn't really matter where it is.\r\n\r\nThere are two ways to accomplish this:\r\n\r\n- You can create a machine IAM User with auto deploy access to all the sub accounts, and have Jenkins login as that IAM User using traditional AWS Access Key Credentials.\r\n- You update the auto deploy IAM Roles in each account to trust the existing account so that the Jenkins IAM Role can assume the auto deploy roles in each sub account.","bodyHTML":"<p dir=\"auto\">You can keep the Jenkins server where it is. The main integration point for auto deploy is handled by the ECS Deploy Runner (explained <a href=\"https://docs.gruntwork.io/guides/build-it-yourself/pipelines/\" rel=\"nofollow\">here</a>). Access to invoke the deploy runner is managed by the <code class=\"notranslate\">allow-auto-deploy-from-other-accounts</code> IAM Role. So as long as Jenkins can assume that IAM Role in the target account, then it doesn't really matter where it is.</p>\n<p dir=\"auto\">There are two ways to accomplish this:</p>\n<ul dir=\"auto\">\n<li>You can create a machine IAM User with auto deploy access to all the sub accounts, and have Jenkins login as that IAM User using traditional AWS Access Key Credentials.</li>\n<li>You update the auto deploy IAM Roles in each account to trust the existing account so that the Jenkins IAM Role can assume the auto deploy roles in each sub account.</li>\n</ul>"}}} />

</CenterLayout>

<!-- ##DOCS-SOURCER-START
{
  "sourcePlugin": "github-discussions",
  "hash": "74237b3007d054f1360903a208dec1d0"
}
##DOCS-SOURCER-END -->
