---
hide_table_of_contents: true
hide_title: true
custom_edit_url: null
---

import CenterLayout from "/src/components/CenterLayout"
import GitHub from "/src/components/GitHub"

<head>
  <link rel="canonical" href="https://github.com/gruntwork-io/knowledge-base/discussions/741" />
</head>

<CenterLayout>
<span className="searchCategory">Knowledge Base</span>
<h1>Gruntwork recommendations on state file management - in a multi-account setup</h1>
<GitHub discussion={{"id":"D_kwDOF8slf84AUUCQ","number":741,"author":{"login":"pras111gw"},"title":"Gruntwork recommendations on state file management - in a multi-account setup","body":"\nIn response to customers asking about how to manage state files when they use multiple AWS accounts.\n\n---\n\n<ins datetime=\"2023-06-22T00:42:25Z\">\n  <p><a href=\"https://support.gruntwork.io/hc/requests/110288\">Tracked in ticket #110288</a></p>\n</ins>\n","bodyHTML":"<p dir=\"auto\">In response to customers asking about how to manage state files when they use multiple AWS accounts.</p>\n<hr>\n<ins datetime=\"2023-06-22T00:42:25Z\">\n  <p dir=\"auto\"><a href=\"https://support.gruntwork.io/hc/requests/110288\" rel=\"nofollow\">Tracked in ticket #110288</a></p>\n</ins>","answer":{"body":"We strongly recommend keeping one state file per account/region - for the following reasons:\r\n\r\n**Secrets**\r\nTerraform state files contain sensitive information. Therefore, it is crucial to exercise caution when sharing your secrets, especially the production account secrets.\r\n\r\n**Principle of least privilege**\r\nThe principle of least privilege emphasizes the importance of granting only the necessary access within a single AWS account. While accidentally granting excessive permissions can occur, it is more challenging to do so across multiple accounts.\r\n\r\n**Mental separation**\r\nMaintaining a mental separation between different environments simplifies the thought process. For example, associating all development-related resources with the dev account and all production-related resources with the prod account reduces errors. It becomes easier to determine appropriate access levels by thinking, \"This person has access to prod, so they can access this,\" rather than trying to navigate a single account with a mix of environments.\r\n\r\n**Simple authentication**\r\nSimpler authentication is achieved when terraform code only requires authentication with a single account. If the terraform state is stored in a different account, each deployment would necessitate authentication to multiple accounts, leading to complexity.\r\n\r\n**Smaller blast radius**\r\nUsing multiple accounts reduces the potential impact of mistakes, creating a smaller blast radius. With separate accounts, if an error occurs in one account, it is less likely to affect others. In contrast, having all state files in a single account increases the risk of unintentionally altering the state files for all environments simultaneously, which can be highly problematic.\r\n\r\n**Compliance requirements** \r\nCompliance requirements such as those outlined by PCI (Payment Card Industry), often demand strict separation between \"in scope\" and \"out of scope\" entities. Combining state files from PCI and non-PCI environments would likely violate compliance standards and is generally discouraged.\r\n\r\n","bodyHTML":"<p dir=\"auto\">We strongly recommend keeping one state file per account/region - for the following reasons:</p>\n<p dir=\"auto\"><strong>Secrets</strong><br>\nTerraform state files contain sensitive information. Therefore, it is crucial to exercise caution when sharing your secrets, especially the production account secrets.</p>\n<p dir=\"auto\"><strong>Principle of least privilege</strong><br>\nThe principle of least privilege emphasizes the importance of granting only the necessary access within a single AWS account. While accidentally granting excessive permissions can occur, it is more challenging to do so across multiple accounts.</p>\n<p dir=\"auto\"><strong>Mental separation</strong><br>\nMaintaining a mental separation between different environments simplifies the thought process. For example, associating all development-related resources with the dev account and all production-related resources with the prod account reduces errors. It becomes easier to determine appropriate access levels by thinking, \"This person has access to prod, so they can access this,\" rather than trying to navigate a single account with a mix of environments.</p>\n<p dir=\"auto\"><strong>Simple authentication</strong><br>\nSimpler authentication is achieved when terraform code only requires authentication with a single account. If the terraform state is stored in a different account, each deployment would necessitate authentication to multiple accounts, leading to complexity.</p>\n<p dir=\"auto\"><strong>Smaller blast radius</strong><br>\nUsing multiple accounts reduces the potential impact of mistakes, creating a smaller blast radius. With separate accounts, if an error occurs in one account, it is less likely to affect others. In contrast, having all state files in a single account increases the risk of unintentionally altering the state files for all environments simultaneously, which can be highly problematic.</p>\n<p dir=\"auto\"><strong>Compliance requirements</strong><br>\nCompliance requirements such as those outlined by PCI (Payment Card Industry), often demand strict separation between \"in scope\" and \"out of scope\" entities. Combining state files from PCI and non-PCI environments would likely violate compliance standards and is generally discouraged.</p>"}}} />

</CenterLayout>

<!-- ##DOCS-SOURCER-START
{
  "sourcePlugin": "github-discussions",
  "hash": "43bc164cfd5a550e575694f9cc1aa2e0"
}
##DOCS-SOURCER-END -->
