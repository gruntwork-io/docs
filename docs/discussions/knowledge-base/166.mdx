---
hide_table_of_contents: true
hide_title: true
custom_edit_url: null
---

import CenterLayout from "/src/components/CenterLayout"
import GitHub from "/src/components/GitHub"

<head>
  <link rel="canonical" href="https://github.com/gruntwork-io/knowledge-base/discussions/166" />
</head>

<CenterLayout>
<span className="searchCategory">Knowledge Base</span>
<h1>Why do you default to creating all three subnet tiers in the VPC module?</h1>
<GitHub discussion={{"id":"D_kwDOF8slf84AOq_E","number":166,"author":{"login":"yorinasub17"},"title":"Why do you default to creating all three subnet tiers in the VPC module?","body":"Why does the VPC module default to creating all three subnet tiers? Even looking at the CIS wrapping around the module, it still looks like all subnets will always be created. I would expect a minimum of subnets will be the best by default. And particularly not creating public subnets if they aren't strictly needed.","bodyHTML":"<p dir=\"auto\">Why does the VPC module default to creating all three subnet tiers? Even looking at the CIS wrapping around the module, it still looks like all subnets will always be created. I would expect a minimum of subnets will be the best by default. And particularly not creating public subnets if they aren't strictly needed.</p>","answer":{"body":"You always need a `public` subnet even for a purely private deployment of the VPC for the purposes of NAT routing. Without a public subnet tier, the nodes in the private tier will not be able to make outbound connections to the public.\r\n\r\nDepending on your use case, you may be able to get away without any public access (air gapped app deployment) by leveraging AWS private links for the services that you do need access (e.g., s3 and ECR and pulling packages there). However, this is fairly cumbersome to implement and is typically not worth the cost in 90% of use cases.\r\n\r\nAs such, we default to what we expect most customer organizations and team needs, which is the three subnet tiers we default to creating. Note that at each layer, you have the option to disable any tiers that you don't have a need for using the `create_public_subnets`, `create_private_app_subnets`, and `create_private_persistence_subnets` input variables.","bodyHTML":"<p dir=\"auto\">You always need a <code class=\"notranslate\">public</code> subnet even for a purely private deployment of the VPC for the purposes of NAT routing. Without a public subnet tier, the nodes in the private tier will not be able to make outbound connections to the public.</p>\n<p dir=\"auto\">Depending on your use case, you may be able to get away without any public access (air gapped app deployment) by leveraging AWS private links for the services that you do need access (e.g., s3 and ECR and pulling packages there). However, this is fairly cumbersome to implement and is typically not worth the cost in 90% of use cases.</p>\n<p dir=\"auto\">As such, we default to what we expect most customer organizations and team needs, which is the three subnet tiers we default to creating. Note that at each layer, you have the option to disable any tiers that you don't have a need for using the <code class=\"notranslate\">create_public_subnets</code>, <code class=\"notranslate\">create_private_app_subnets</code>, and <code class=\"notranslate\">create_private_persistence_subnets</code> input variables.</p>"}}} />

</CenterLayout>

<!-- ##DOCS-SOURCER-START
{
  "sourcePlugin": "github-discussions",
  "hash": "df24664ce54b2e501d87a02b462326a6"
}
##DOCS-SOURCER-END -->
