---
hide_table_of_contents: true
hide_title: true
custom_edit_url: null
---

import CenterLayout from "/src/components/CenterLayout"
import GitHub from "/src/components/GitHub"

<head>
  <link rel="canonical" href="https://github.com/gruntwork-io/knowledge-base/discussions/21" />
</head>

<CenterLayout>
<span className="searchCategory">Knowledge Base</span>
<h1>How do I modify the for-production infrastructure-live example for a single-account setup? Do I need an accounts.hcl?</h1>
<GitHub discussion={{"id":"MDEwOkRpc2N1c3Npb24zNTUzMTk3","number":21,"author":{"login":"gruntwork-support"},"title":"How do I modify the for-production infrastructure-live example for a single-account setup? Do I need an accounts.hcl?","body":"_This message was extracted from a discussion that originally took place in Gruntwork Community Slack. Names and URLs have been removed where appropriate_\n\n**From a customer**\n\nHey guys,\nIm currently working on building an RnD environment for my business.\nBasically, im taking the infrastructure live and removing stuff I dont need (including multi account stuff).\n\nThere was a technical issue I was wondering about:\nShould I keep an `accounts.hcl` with my single account, so that I could use the infra-live modules as is since they require it, or should I go the \"`for-learning-and-testing`\" way and have `.tf` files which specify exactly what i need from the regular module repos.\n\nThe reason I ask is because it seems weird for me to save what my account numbers are (which feels like state), in a code repo. It feels weird both on a security side (but im a novice there) and also from a separation of code and data side.\n\nWhat are your recommendations?","bodyHTML":"<p dir=\"auto\"><em>This message was extracted from a discussion that originally took place in Gruntwork Community Slack. Names and URLs have been removed where appropriate</em></p>\n<p dir=\"auto\"><strong>From a customer</strong></p>\n<p dir=\"auto\">Hey guys,<br>\nIm currently working on building an RnD environment for my business.<br>\nBasically, im taking the infrastructure live and removing stuff I dont need (including multi account stuff).</p>\n<p dir=\"auto\">There was a technical issue I was wondering about:<br>\nShould I keep an <code class=\"notranslate\">accounts.hcl</code> with my single account, so that I could use the infra-live modules as is since they require it, or should I go the \"<code class=\"notranslate\">for-learning-and-testing</code>\" way and have <code class=\"notranslate\">.tf</code> files which specify exactly what i need from the regular module repos.</p>\n<p dir=\"auto\">The reason I ask is because it seems weird for me to save what my account numbers are (which feels like state), in a code repo. It feels weird both on a security side (but im a novice there) and also from a separation of code and data side.</p>\n<p dir=\"auto\">What are your recommendations?</p>","answer":{"body":"**From a grunt**\n\nThe `accounts.hcl` is actually a guard rail to ensure you don’t accidentally touch the wrong account. Since there is no way for terragrunt to know from the code if you are authenticated to the right/intended account, we need to tell it which account which folders should apply to.\n\nThat is, `terragrunt` uses this information to construct the `aws` provider blocks in a way that tells terraform to make sure when one applies to the `dev` account, they are actually authenticated to the `dev` account.\n\nThis is also used in the infra CI/CD pipeline in a similar manner, to ensure the CI server authenticates to the right account (since assume role requires knowing the ARN, which requires knowing the account ID).","bodyHTML":"<p dir=\"auto\"><strong>From a grunt</strong></p>\n<p dir=\"auto\">The <code class=\"notranslate\">accounts.hcl</code> is actually a guard rail to ensure you don’t accidentally touch the wrong account. Since there is no way for terragrunt to know from the code if you are authenticated to the right/intended account, we need to tell it which account which folders should apply to.</p>\n<p dir=\"auto\">That is, <code class=\"notranslate\">terragrunt</code> uses this information to construct the <code class=\"notranslate\">aws</code> provider blocks in a way that tells terraform to make sure when one applies to the <code class=\"notranslate\">dev</code> account, they are actually authenticated to the <code class=\"notranslate\">dev</code> account.</p>\n<p dir=\"auto\">This is also used in the infra CI/CD pipeline in a similar manner, to ensure the CI server authenticates to the right account (since assume role requires knowing the ARN, which requires knowing the account ID).</p>"}}} />

</CenterLayout>

<!-- ##DOCS-SOURCER-START
{
  "sourcePlugin": "github-discussions",
  "hash": "fc59e4503d106e4f0a2e9f5518c79adc"
}
##DOCS-SOURCER-END -->
