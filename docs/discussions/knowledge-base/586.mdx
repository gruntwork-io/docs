---
hide_table_of_contents: true
hide_title: true
custom_edit_url: null
---

import CenterLayout from "/src/components/CenterLayout"
import GitHub from "/src/components/GitHub"

<head>
  <link rel="canonical" href="https://github.com/gruntwork-io/knowledge-base/discussions/586" />
</head>

<CenterLayout>
<span className="searchCategory">Knowledge Base</span>
<h1>properly exclude directories from run-all plan?</h1>
<GitHub discussion={{"id":"D_kwDOF8slf84ARWrZ","number":586,"author":{"login":"calebtote"},"title":"properly exclude directories from run-all plan?","body":"\r\nIs this the correct syntax?\r\n`terragrunt run-all plan --terragrunt-exclude-dir './us-east-1/ecs/services/' --terragrunt-non-interactive -lock-timeout=10m`\r\n\r\nNo matter the path I put in, I can not get this directory to stop planning my ecs service directory. I’ve tried:\r\n\r\n- quoted\r\n- unquoted\r\n- relative path\r\n- absolute path\r\n- excluding all of `./us-east-1/*` but this still plans everything\r\n\r\nMy directory structure is:\r\n\r\n```\r\napp/\r\n   terraform/\r\n       live/\r\n           us-east-1/\r\n                        ecs/\r\n                        rds/\r\n                        sqs/\r\n```\r\n\r\nMy top level `terragrunt.hcl` file is in `app/terraform/live` and this is where I'm running the above command from.\r\n\r\n---\r\n\r\n<ins datetime=\"2022-11-08T16:50:01Z\">\r\n  <p><a href=\"https://support.gruntwork.io/hc/requests/109571\">Tracked in ticket #109571</a></p>\r\n</ins>\r\n","bodyHTML":"<p dir=\"auto\">Is this the correct syntax?<br>\n<code class=\"notranslate\">terragrunt run-all plan --terragrunt-exclude-dir './us-east-1/ecs/services/' --terragrunt-non-interactive -lock-timeout=10m</code></p>\n<p dir=\"auto\">No matter the path I put in, I can not get this directory to stop planning my ecs service directory. I’ve tried:</p>\n<ul dir=\"auto\">\n<li>quoted</li>\n<li>unquoted</li>\n<li>relative path</li>\n<li>absolute path</li>\n<li>excluding all of <code class=\"notranslate\">./us-east-1/*</code> but this still plans everything</li>\n</ul>\n<p dir=\"auto\">My directory structure is:</p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"app/\n   terraform/\n       live/\n           us-east-1/\n                        ecs/\n                        rds/\n                        sqs/\"><pre class=\"notranslate\"><code>app/\n   terraform/\n       live/\n           us-east-1/\n                        ecs/\n                        rds/\n                        sqs/\n</code></pre></div>\n<p dir=\"auto\">My top level <code class=\"notranslate\">terragrunt.hcl</code> file is in <code class=\"notranslate\">app/terraform/live</code> and this is where I'm running the above command from.</p>\n<hr>\n<ins datetime=\"2022-11-08T16:50:01Z\">\n  <p dir=\"auto\"><a href=\"https://support.gruntwork.io/hc/requests/109571\" rel=\"nofollow\">Tracked in ticket #109571</a></p>\n</ins>","answer":{"body":"Hi,\r\nwas considered to use `**` in path since it has multiple levels?\r\n\r\n```\r\nterragrunt run-all plan --terragrunt-exclude-dir **/ecs/services\r\n```\r\n\r\nExample:\r\n\r\n```\r\n.\r\n├── README.md\r\n└── app\r\n    └── terraform\r\n        └── live\r\n            └── us-east-1\r\n                ├── ecs\r\n                │   ├── main.tf\r\n                │   ├── services\r\n                │   │   ├── main.tf\r\n                │   │   └── terragrunt.hcl\r\n                │   └── terragrunt.hcl\r\n                ├── rds\r\n                │   ├── main.tf\r\n                │   └── terragrunt.hcl\r\n                └── sqs\r\n                    ├── main.tf\r\n                    └── terragrunt.hcl\r\n\r\n```\r\n\r\nDefault execution:\r\n```\r\n$ terragrunt run-all plan \r\n[INFO] Getting version from tgenv-version-name\r\n[INFO] TGENV_VERSION is 0.40.1\r\nGroup 1\r\n- Module /projects/gruntwork/terragrunt-tests/exclude/app/terraform/live/us-east-1/ecs\r\n- Module /projects/gruntwork/terragrunt-tests/exclude/app/terraform/live/us-east-1/ecs/services\r\n- Module /projects/gruntwork/terragrunt-tests/exclude/app/terraform/live/us-east-1/rds\r\n- Module /projects/gruntwork/terragrunt-tests/exclude/app/terraform/live/us-east-1/sqs\r\n\r\n```\r\n\r\nExclusion:\r\n```\r\n$ terragrunt run-all plan --terragrunt-exclude-dir **/ecs/services\r\n\r\n[INFO] Getting version from tgenv-version-name\r\n[INFO] TGENV_VERSION is 0.40.1\r\nINFO[0000] The stack at /projects/gruntwork/terragrunt-tests/exclude will be processed in the following order for command plan:\r\nGroup 1\r\n- Module /projects/gruntwork/terragrunt-tests/exclude/app/terraform/live/us-east-1/ecs\r\n- Module /projects/gruntwork/terragrunt-tests/exclude/app/terraform/live/us-east-1/rds\r\n- Module /projects/gruntwork/terragrunt-tests/exclude/app/terraform/live/us-east-1/sqs\r\n```\r\n\r\nhttps://github.com/denis256/terragrunt-tests/tree/master/exclude\r\n\r\n\r\n\r\n","bodyHTML":"<p dir=\"auto\">Hi,<br>\nwas considered to use <code class=\"notranslate\">**</code> in path since it has multiple levels?</p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"terragrunt run-all plan --terragrunt-exclude-dir **/ecs/services\"><pre class=\"notranslate\"><code>terragrunt run-all plan --terragrunt-exclude-dir **/ecs/services\n</code></pre></div>\n<p dir=\"auto\">Example:</p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\".\n├── README.md\n└── app\n    └── terraform\n        └── live\n            └── us-east-1\n                ├── ecs\n                │   ├── main.tf\n                │   ├── services\n                │   │   ├── main.tf\n                │   │   └── terragrunt.hcl\n                │   └── terragrunt.hcl\n                ├── rds\n                │   ├── main.tf\n                │   └── terragrunt.hcl\n                └── sqs\n                    ├── main.tf\n                    └── terragrunt.hcl\n\"><pre class=\"notranslate\"><code>.\n├── README.md\n└── app\n    └── terraform\n        └── live\n            └── us-east-1\n                ├── ecs\n                │   ├── main.tf\n                │   ├── services\n                │   │   ├── main.tf\n                │   │   └── terragrunt.hcl\n                │   └── terragrunt.hcl\n                ├── rds\n                │   ├── main.tf\n                │   └── terragrunt.hcl\n                └── sqs\n                    ├── main.tf\n                    └── terragrunt.hcl\n\n</code></pre></div>\n<p dir=\"auto\">Default execution:</p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"$ terragrunt run-all plan \n[INFO] Getting version from tgenv-version-name\n[INFO] TGENV_VERSION is 0.40.1\nGroup 1\n- Module /projects/gruntwork/terragrunt-tests/exclude/app/terraform/live/us-east-1/ecs\n- Module /projects/gruntwork/terragrunt-tests/exclude/app/terraform/live/us-east-1/ecs/services\n- Module /projects/gruntwork/terragrunt-tests/exclude/app/terraform/live/us-east-1/rds\n- Module /projects/gruntwork/terragrunt-tests/exclude/app/terraform/live/us-east-1/sqs\n\"><pre class=\"notranslate\"><code>$ terragrunt run-all plan \n[INFO] Getting version from tgenv-version-name\n[INFO] TGENV_VERSION is 0.40.1\nGroup 1\n- Module /projects/gruntwork/terragrunt-tests/exclude/app/terraform/live/us-east-1/ecs\n- Module /projects/gruntwork/terragrunt-tests/exclude/app/terraform/live/us-east-1/ecs/services\n- Module /projects/gruntwork/terragrunt-tests/exclude/app/terraform/live/us-east-1/rds\n- Module /projects/gruntwork/terragrunt-tests/exclude/app/terraform/live/us-east-1/sqs\n\n</code></pre></div>\n<p dir=\"auto\">Exclusion:</p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"$ terragrunt run-all plan --terragrunt-exclude-dir **/ecs/services\n\n[INFO] Getting version from tgenv-version-name\n[INFO] TGENV_VERSION is 0.40.1\nINFO[0000] The stack at /projects/gruntwork/terragrunt-tests/exclude will be processed in the following order for command plan:\nGroup 1\n- Module /projects/gruntwork/terragrunt-tests/exclude/app/terraform/live/us-east-1/ecs\n- Module /projects/gruntwork/terragrunt-tests/exclude/app/terraform/live/us-east-1/rds\n- Module /projects/gruntwork/terragrunt-tests/exclude/app/terraform/live/us-east-1/sqs\"><pre class=\"notranslate\"><code>$ terragrunt run-all plan --terragrunt-exclude-dir **/ecs/services\n\n[INFO] Getting version from tgenv-version-name\n[INFO] TGENV_VERSION is 0.40.1\nINFO[0000] The stack at /projects/gruntwork/terragrunt-tests/exclude will be processed in the following order for command plan:\nGroup 1\n- Module /projects/gruntwork/terragrunt-tests/exclude/app/terraform/live/us-east-1/ecs\n- Module /projects/gruntwork/terragrunt-tests/exclude/app/terraform/live/us-east-1/rds\n- Module /projects/gruntwork/terragrunt-tests/exclude/app/terraform/live/us-east-1/sqs\n</code></pre></div>\n<p dir=\"auto\"><a href=\"https://github.com/denis256/terragrunt-tests/tree/master/exclude\">https://github.com/denis256/terragrunt-tests/tree/master/exclude</a></p>"}}} />

</CenterLayout>
  

<!-- ##DOCS-SOURCER-START
{
  "sourcePlugin": "github-discussions",
  "hash": "8dbde2cd54fd8f002aee1e2032fee717"
}
##DOCS-SOURCER-END -->
