---
hide_table_of_contents: true
hide_title: true
custom_edit_url: null
---

import CenterLayout from "/src/components/CenterLayout"
import GitHub from "/src/components/GitHub"

<head>
  <link rel="canonical" href="https://github.com/gruntwork-io/knowledge-base/discussions/526" />
</head>

<CenterLayout>
<span className="searchCategory">Knowledge Base</span>
<h1>ERRO[0000] Found a dependency cycle between modules:</h1>
<GitHub discussion={{"id":"D_kwDOF8slf84AQUVC","number":526,"author":{"login":"Vijaylokesh"},"title":"ERRO[0000] Found a dependency cycle between modules:","body":"> \r\n\r\nI am creating two Security Groups, One for Application SG and Second one is RDS SG\r\n\r\nApplication SG Module1:\r\n==================\r\ninclude \"root\" {\r\n  path   = find_in_parent_folders()\r\n  expose = true\r\n}\r\n\r\ndependency \"vpc\" {\r\n  config_path = \"../../vpc\"\r\n   mock_outputs = {\r\n    vpc_id = \"temporary-dummy-id\"\r\n  }\r\n}\r\n\r\n\r\ndependency sg-rds {\r\n  config_path = \"../rds\"\r\n   mock_outputs = {\r\n    security_group_id = \"temporary-dummy-id\"\r\n  }\r\n  skip_outputs = true\r\n}\r\n\r\ndependencies {\r\n  paths = [\"../rds\"]\r\n}\r\n\r\n\r\n\r\n\r\nterraform {\r\n  source = \"github.com/terraform-aws-modules/terraform-aws-security-group.git?ref=v4.3.0\"\r\n}\r\n\r\ninputs = {\r\n  name            = \"${include.root.locals.prj}-app-sg-${include.root.locals.env}-${include.root.locals.aws_region}\"\r\n  use_name_prefix = false\r\n  vpc_id          = dependency.vpc.outputs.vpc_id\r\n\r\n  egress_with_source_security_group_id = [\r\n    \r\n    {\r\n      from_port                = 3306\r\n      to_port                  = 3306\r\n      protocol                 = \"tcp\"\r\n      description              = \"Allow access to connect MySQL\"\r\n      source_security_group_id = dependency.sg-rds.outputs.security_group_id\r\n    }\r\n  ]\r\n}\r\n========================\r\n\r\nRDS SG `Module2`\r\n===================\r\n\r\ninclude \"root\" {\r\n  path   = find_in_parent_folders()\r\n  expose = true\r\n}\r\n\r\ndependency \"vpc\" {\r\n  config_path = \"../../vpc\"\r\n   mock_outputs = {\r\n    vpc_id = \"temporary-dummy-id\"\r\n    vpc_cidr_block = \"10.0.0.0/16\"\r\n  }\r\n}\r\n\r\ndependency sg-app-ec2 {\r\n  config_path = \"../app-ec2\"\r\n   mock_outputs = {\r\n    security_group_id = \"temporary-dummy-id\"\r\n  }\r\n}\r\n\r\ndependencies {\r\n  paths = [\"../app-ec2\"]\r\n}\r\n\r\nterraform {\r\n  source = \"github.com/terraform-aws-modules/terraform-aws-security-group.git?ref=v4.3.0\"\r\n}\r\n\r\ninputs = {\r\n  name            = \"${include.root.locals.prj}-rds-sg-${include.root.locals.env}-${include.root.locals.aws_region}\"\r\n  use_name_prefix = false\r\n  vpc_id          = dependency.vpc.outputs.vpc_id\r\n\r\n   ingress_with_source_security_group_id = [\r\n    \r\n    {\r\n      from_port                = 3306\r\n      to_port                  = 3306\r\n      protocol                 = \"tcp\"\r\n      description              = \"Allow access to connect MySQL\"\r\n      source_security_group_id = dependency.sg-rds.outputs.security_group_id\r\n    }\r\n   ]\r\n }   \r\n=================================================\r\nAM running the below commands\r\n terragrunt run-all  plan \r\n \r\nand getting below error\r\n\r\nERRO[0000] Found a dependency cycle between modules:\r\n\r\nLet us know how to pass dependency variables between two modules \r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n---\r\n\r\n<ins datetime=\"2022-08-04T05:28:30Z\">\r\n  <p><a href=\"https://support.gruntwork.io/hc/requests/109098\">Tracked in ticket #109098</a></p>\r\n</ins>\r\n","bodyHTML":"<blockquote>\n</blockquote>\n<p dir=\"auto\">I am creating two Security Groups, One for Application SG and Second one is RDS SG</p>\n<h1 dir=\"auto\">Application SG Module1:</h1>\n<p dir=\"auto\">include \"root\" {<br>\npath   = find_in_parent_folders()<br>\nexpose = true<br>\n}</p>\n<p dir=\"auto\">dependency \"vpc\" {<br>\nconfig_path = \"../../vpc\"<br>\nmock_outputs = {<br>\nvpc_id = \"temporary-dummy-id\"<br>\n}<br>\n}</p>\n<p dir=\"auto\">dependency sg-rds {<br>\nconfig_path = \"../rds\"<br>\nmock_outputs = {<br>\nsecurity_group_id = \"temporary-dummy-id\"<br>\n}<br>\nskip_outputs = true<br>\n}</p>\n<p dir=\"auto\">dependencies {<br>\npaths = [\"../rds\"]<br>\n}</p>\n<p dir=\"auto\">terraform {<br>\nsource = \"github.com/terraform-aws-modules/terraform-aws-security-group.git?ref=v4.3.0\"<br>\n}</p>\n<p dir=\"auto\">inputs = {<br>\nname            = \"${include.root.locals.prj}-app-sg-${include.root.locals.env}-${include.root.locals.aws_region}\"<br>\nuse_name_prefix = false<br>\nvpc_id          = dependency.vpc.outputs.vpc_id</p>\n<p dir=\"auto\">egress_with_source_security_group_id = [</p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"{\n  from_port                = 3306\n  to_port                  = 3306\n  protocol                 = &quot;tcp&quot;\n  description              = &quot;Allow access to connect MySQL&quot;\n  source_security_group_id = dependency.sg-rds.outputs.security_group_id\n}\"><pre class=\"notranslate\"><code class=\"notranslate\">{\n  from_port                = 3306\n  to_port                  = 3306\n  protocol                 = \"tcp\"\n  description              = \"Allow access to connect MySQL\"\n  source_security_group_id = dependency.sg-rds.outputs.security_group_id\n}\n</code></pre></div>\n<h1 dir=\"auto\">]<br>\n}</h1>\n<h1 dir=\"auto\">RDS SG <code class=\"notranslate\">Module2</code></h1>\n<p dir=\"auto\">include \"root\" {<br>\npath   = find_in_parent_folders()<br>\nexpose = true<br>\n}</p>\n<p dir=\"auto\">dependency \"vpc\" {<br>\nconfig_path = \"../../vpc\"<br>\nmock_outputs = {<br>\nvpc_id = \"temporary-dummy-id\"<br>\nvpc_cidr_block = \"10.0.0.0/16\"<br>\n}<br>\n}</p>\n<p dir=\"auto\">dependency sg-app-ec2 {<br>\nconfig_path = \"../app-ec2\"<br>\nmock_outputs = {<br>\nsecurity_group_id = \"temporary-dummy-id\"<br>\n}<br>\n}</p>\n<p dir=\"auto\">dependencies {<br>\npaths = [\"../app-ec2\"]<br>\n}</p>\n<p dir=\"auto\">terraform {<br>\nsource = \"github.com/terraform-aws-modules/terraform-aws-security-group.git?ref=v4.3.0\"<br>\n}</p>\n<p dir=\"auto\">inputs = {<br>\nname            = \"${include.root.locals.prj}-rds-sg-${include.root.locals.env}-${include.root.locals.aws_region}\"<br>\nuse_name_prefix = false<br>\nvpc_id          = dependency.vpc.outputs.vpc_id</p>\n<p dir=\"auto\">ingress_with_source_security_group_id = [</p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"{\n  from_port                = 3306\n  to_port                  = 3306\n  protocol                 = &quot;tcp&quot;\n  description              = &quot;Allow access to connect MySQL&quot;\n  source_security_group_id = dependency.sg-rds.outputs.security_group_id\n}\"><pre class=\"notranslate\"><code class=\"notranslate\">{\n  from_port                = 3306\n  to_port                  = 3306\n  protocol                 = \"tcp\"\n  description              = \"Allow access to connect MySQL\"\n  source_security_group_id = dependency.sg-rds.outputs.security_group_id\n}\n</code></pre></div>\n<h1 dir=\"auto\">]<br>\n}</h1>\n<p dir=\"auto\">AM running the below commands<br>\nterragrunt run-all  plan</p>\n<p dir=\"auto\">and getting below error</p>\n<p dir=\"auto\">ERRO[0000] Found a dependency cycle between modules:</p>\n<p dir=\"auto\">Let us know how to pass dependency variables between two modules</p>\n<hr>\n<ins datetime=\"2022-08-04T05:28:30Z\">\n  <p dir=\"auto\"><a href=\"https://support.gruntwork.io/hc/requests/109098\" rel=\"nofollow\">Tracked in ticket #109098</a></p>\n</ins>","answer":{"body":"First of all, the creative formatting of the code in your post makes it difficult to read. Just a minor note that I wanted to share for the sake of yourself and everyone else in the future.\r\n\r\nSecond, and most important, Gruntwork does not maintain modules within `github.com/terraform-aws-modules`. We suggest you ask about this issue over there. (Be sure to format correctly!)\r\n\r\nThirdly, as we maintain Terragrunt, `terragrunt run-all plan` is not a reliable command in all cases. Please see the [documentation](https://terragrunt.gruntwork.io/docs/features/execute-terraform-commands-on-multiple-modules-at-once/#the-run-all-command) on `run-all`, especially the section on `plan`.","bodyHTML":"<p dir=\"auto\">First of all, the creative formatting of the code in your post makes it difficult to read. Just a minor note that I wanted to share for the sake of yourself and everyone else in the future.</p>\n<p dir=\"auto\">Second, and most important, Gruntwork does not maintain modules within <code class=\"notranslate\">github.com/terraform-aws-modules</code>. We suggest you ask about this issue over there. (Be sure to format correctly!)</p>\n<p dir=\"auto\">Thirdly, as we maintain Terragrunt, <code class=\"notranslate\">terragrunt run-all plan</code> is not a reliable command in all cases. Please see the <a href=\"https://terragrunt.gruntwork.io/docs/features/execute-terraform-commands-on-multiple-modules-at-once/#the-run-all-command\" rel=\"nofollow\">documentation</a> on <code class=\"notranslate\">run-all</code>, especially the section on <code class=\"notranslate\">plan</code>.</p>"}}} />

</CenterLayout>

<!-- ##DOCS-SOURCER-START
{
  "sourcePlugin": "github-discussions",
  "hash": "9b3d14ecde9d7286a97552f8726075b1"
}
##DOCS-SOURCER-END -->
