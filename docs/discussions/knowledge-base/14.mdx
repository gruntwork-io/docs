---
hide_table_of_contents: true
hide_title: true
custom_edit_url: null
---

import CenterLayout from "/src/components/CenterLayout"
import GitHub from "/src/components/GitHub"

<head>
  <link rel="canonical" href="https://github.com/gruntwork-io/knowledge-base/discussions/14" />
</head>

<CenterLayout>
<span className="searchCategory">Knowledge Base</span>
<h1>Code Organization recommendation</h1>
<GitHub discussion={{"id":"MDEwOkRpc2N1c3Npb24zNTQ3MTE3","number":14,"author":{"login":"gruntwork-support"},"title":"Code Organization recommendation","body":"_This message was extracted from a discussion that originally took place in Gruntwork Community Slack. Names and URLs have been removed where appropriate_\n\n**From a customer**\n\nThis is kind of an abstract, strategy question but here goes. With our refarch, we have a number of DRY violations (in particular, `ecs-deploy-runner` s in each account). Is it generally advisable to identify these things, then introduce a higher-level module (i.e. by wrapping the Gruntwork one) with all the commonality to reduce the size of the leaf `terragrunt.hcl` files?\n\n\n\n\nSo with the `ecs-deploy-runner` example, you might end up with a `my-ecs-deploy-runner` module which wraps it and then the `terragrunt.hcl` file in each account is just the vars that are different (e.g. the vpc id)","bodyHTML":"<p dir=\"auto\"><em>This message was extracted from a discussion that originally took place in Gruntwork Community Slack. Names and URLs have been removed where appropriate</em></p>\n<p dir=\"auto\"><strong>From a customer</strong></p>\n<p dir=\"auto\">This is kind of an abstract, strategy question but here goes. With our refarch, we have a number of DRY violations (in particular, <code class=\"notranslate\">ecs-deploy-runner</code> s in each account). Is it generally advisable to identify these things, then introduce a higher-level module (i.e. by wrapping the Gruntwork one) with all the commonality to reduce the size of the leaf <code class=\"notranslate\">terragrunt.hcl</code> files?</p>\n<p dir=\"auto\">So with the <code class=\"notranslate\">ecs-deploy-runner</code> example, you might end up with a <code class=\"notranslate\">my-ecs-deploy-runner</code> module which wraps it and then the <code class=\"notranslate\">terragrunt.hcl</code> file in each account is just the vars that are different (e.g. the vpc id)</p>","answer":{"body":"**From a grunt**\n\nHello! So I did ask internally, and think you’re actually on the right path here!\n\nSo, if you were to abstract away the `ecs-deploy-runner` and put the common things between them in one place, so you only have to update them once, that is a good step forward.\n\nThe challenge might come as you update the `ecs-deploy-runners`, in case there’s some unnoticed bugs by the refactoring itself.\n\n\n\n\nSomething interesting to share - `terragrunt` is actually being updated so that we could re-architecture the `infrastructure-live` repo very soon, and it will be easier to avoid duplication like you’re having.\n\nHave a read here [https://github.com/gruntwork-io/terragrunt/issues/1566](https://github.com/gruntwork-io/terragrunt/issues/1566) :slightly_smiling_face:","bodyHTML":"<p dir=\"auto\"><strong>From a grunt</strong></p>\n<p dir=\"auto\">Hello! So I did ask internally, and think you’re actually on the right path here!</p>\n<p dir=\"auto\">So, if you were to abstract away the <code class=\"notranslate\">ecs-deploy-runner</code> and put the common things between them in one place, so you only have to update them once, that is a good step forward.</p>\n<p dir=\"auto\">The challenge might come as you update the <code class=\"notranslate\">ecs-deploy-runners</code>, in case there’s some unnoticed bugs by the refactoring itself.</p>\n<p dir=\"auto\">Something interesting to share - <code class=\"notranslate\">terragrunt</code> is actually being updated so that we could re-architecture the <code class=\"notranslate\">infrastructure-live</code> repo very soon, and it will be easier to avoid duplication like you’re having.</p>\n<p dir=\"auto\">Have a read here <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"817724989\" data-permission-text=\"Title is private\" data-url=\"https://github.com/gruntwork-io/terragrunt/issues/1566\" data-hovercard-type=\"issue\" data-hovercard-url=\"/gruntwork-io/terragrunt/issues/1566/hovercard\" href=\"https://github.com/gruntwork-io/terragrunt/issues/1566\">gruntwork-io/terragrunt#1566</a> :slightly_smiling_face:</p>"}}} />

</CenterLayout>

<!-- ##DOCS-SOURCER-START
{
  "sourcePlugin": "github-discussions",
  "hash": "7dd0d958d590391fc7b508de524e3d96"
}
##DOCS-SOURCER-END -->
