---
hide_table_of_contents: true
hide_title: true
custom_edit_url: null
---

import CenterLayout from "/src/components/CenterLayout"
import GitHub from "/src/components/GitHub"

<head>
  <link rel="canonical" href="https://github.com/gruntwork-io/knowledge-base/discussions/341" />
</head>

<CenterLayout>
<span className="searchCategory">Knowledge Base</span>
<h1>Gruntwork Reference Architecture Form Fields</h1>
<GitHub discussion={{"id":"D_kwDOF8slf84APOWP","number":341,"author":{"login":"zackproser"},"title":"Gruntwork Reference Architecture Form Fields","body":"This post details the various fields on the Gruntwork Reference Architecture's `reference-architecture-form.yml` file that we request customers fill out when preparing for a deployment. \r\n\r\nIt serves as a reference for how the fields are used, their possible values, important caveats to consider when filling out the form, etc. ","bodyHTML":"<p dir=\"auto\">This post details the various fields on the Gruntwork Reference Architecture's <code class=\"notranslate\">reference-architecture-form.yml</code> file that we request customers fill out when preparing for a deployment.</p>\n<p dir=\"auto\">It serves as a reference for how the fields are used, their possible values, important caveats to consider when filling out the form, etc.</p>","answer":{"body":"**CompanyName** (type = string) \r\nThis is your company's name. It may be used when generating unique prefixes for resources such as S3 buckets, Application Load Balancers, etc. If your company name is too long, our tooling will truncate it so that it does not exceed the character limits imposed by various AWS resources. \r\n\r\n**PrimaryRegion** (type = string)\r\nThis is the AWS region that you want your resources (databases, compute stack, etc) deployed into initially. Note, you can only select one PrimaryRegion initially for your deployment. If you wish to run resources in more than one region following your deployment, see [this Knowledge Base answer](https://github.com/gruntwork-io/knowledge-base/discussions/216#discussioncomment-2232046).\r\n\r\nPlease note that not all AWS regions are currently supported. This is because some AWS regions may not actually implement certain AWS services that the Reference Architecture composes. If the region you selected is not supported, a Gruntwork engineer will let you know.\r\n\r\n**InfraLiveRepoURL** (type = string) \r\nThis is the URL to the repository where you want to host and run your Reference Architecture code **after** your Reference Architecture has been delivered to you.  This URL must end in `.git`. \r\n\r\nWhereas the `github.com/gruntwork-clients/infrastructure-live-<your-name>` repository is used for the following purposes: \r\n- Getting you set up for your Ref Arch deployment\r\n- Collaborating with other team members on your side pre-deployment\r\n- Collaborating with Gruntwork engineers on your form to ensure you are ready for deployment\r\n- Performing the deployment. Gruntwork engineers use this repository and specialized tooling to implement your Reference Architecture\r\n\r\nyour **InfraLiveRepoURL** can optionally point to a different repository where you or your company wants to manage your Ref Arch going forward. For example, if your company prefers Bitbucket and normally works there, you should set this to the HTTPS URL of the Bitbucket repository where you will host this code in the future. \r\n\r\n**InfraLiveRepoSSHURL** (type = string) \r\n\r\nThis is the SSH URL to the repository where you want to host and run your Reference Architecture code **after** your Reference Architecture has been delivered to you. This URL must end in `.git`. \r\n\r\nNote that this URL is related to your **InfraLiveRepoURL**. Your `InfraLiveRepoSSHURL` should be the SSH URL **to the same repository you specified in InfraLiveRepoURL**. \r\n\r\n**InfraLiveDefaultBranchName** (type = string) \r\n\r\nThe default branch of the infrastructure-live repository. This branch is the only branch that the Gruntwork Pipelines solution will be allowed to deploy from. This branch should be marked as protected by your VCS platform.\r\n\r\nIf you are unfamiliar with protected branches, you can review the following documentation:\r\n\r\n   GitHub: https://docs.github.com/en/github/administering-a-repository/about-protected-branches\r\n   GitLab: https://docs.gitlab.com/ee/user/project/protected_branches.html\r\n   Bitbucket: https://support.atlassian.com/bitbucket-cloud/docs/use-branch-permissions/\r\n\r\nWe recommend using \"main\" as the name of the default branch. If you already have a specially configured branch you want to use# that is not \"main\" you can create a copy of it by running `git checkout -b main`.\r\n\r\nYour CI/CD integration will use this branch as the production branch, meaning that\r\n 1. This branch will reflect what is deployed and running in production at any given time\r\n 2. CI/CD will run `terragrunt apply` against this whenever you merge changes into it (from development or feature branches)\r\n 3. Feature branches that are pushed such as `developer-test-feature-1` will have `terragrunt plan` run against them\r\n\r\n**AdminIAMUsers** (type = list)\r\nThis is a list of the users that you are requesting be provisioned in your Reference Architecture's Security account during your deployment. The Security account is the only account in the Gruntwork Reference Architecture that contains IAM users, whereas all other accounts use IAM roles for cross-account access.\r\n\r\nYou must specify at least one Admin IAM user when preparing for a Ref Arch deployment. This user will become one of the primary ways to access your Reference Architecture once it is deployed. \r\n\r\nFor each user in your list, you can supply the following attributes: \r\n\r\n* Username -  The IAM username that you want created. \r\n* Email - The email address for the IAM user. This must be a valid email address, otherwise password reset workflows will not be successful. \r\n* PGPKey - The PGPKey for the user. This PGPKey property is required when you are setting up the AdminIAMUsers for your Reference Architecture. You have two options for supplying a PGPKey: \r\n\r\n1. Keybase. You can use an existing Keybase.io user account or make a new one. If you opt to use keybase, your Keybase user MUST have a public PGP Key associated, otherwise your form will not pass preflight checks and will be need to be fixed before your deployment can commence. \r\n\r\nIf your keybase username is `grunty`, then you would enter `keybase:grunty` for the `PGPKey` attribute when defining your Admin IAM user. \r\n\r\nTo confirm that your keybase user has a public PGP key associated, go to https://keybase.io/<username> and ensure you can see a key icon followed by the key fingerprint, like so: \r\n\r\n![keybase-example](https://user-images.githubusercontent.com/1769996/162036346-5f23ae14-877c-4497-ac67-855d7fa73cb6.png)\r\n\r\n2. Exported PGP Key. You can follow [the instructions here](https://github.com/gruntwork-io/terraform-aws-security/tree/master/modules/iam-users#how-do-i-use-pgp-keys-directly) to export a PGP key that you control locally.\r\n\r\n**AWSAccounts** (type = list) \r\n\r\nThis is where you will configure the AWS accounts that your Reference Architecture will be deployed into. Please use [the Gruntwork CLI](https://github.com/gruntwork-io/gruntwork) to automatically scaffold and create your AWS accounts if you have not already created them manually. We STRONGLY RECOMMEND use of the Gruntwork CLI because it removes the possibility of manual configuration errors that may delay your deployment. \r\n\r\nIt's important to understand a few key points when defining your AWS Accounts. \r\n\r\n1. Gruntwork **requires** BRAND NEW NEVER USED AWS accounts, that have had absolutely nothing done to them. No corporate account baselines can have been applied, as these will conflict with the Gruntwork Reference Architecture's own baselines and will significantly delay your deployment. See also [the Knowledge Base post \"Can we use existing AWS accounts and organizations for the Ref Arch?\"](https://github.com/gruntwork-io/knowledge-base/discussions/207)\r\n2. It is possible to request additional \"App\" accounts (dev, stage, prod). In the correlative outer map, add another entry for additional accounts that you want provisioned. For example, if you wanted two staging environments, one named `staging` and one named `qa`, you would find the `stage:` key in the YAML map and enter something like this: \r\n\r\n```yaml\r\n stage:\r\n    \r\n    - Name: \"staging\"\r\n      ID: \"<YOUR ACCOUNT ID>\"\r\n      DomainName: \"example-staging.com\"\r\n    - Name: \"qa\"\r\n      ID: \"<YOUR ACCOUNT ID>\"\r\n      DomainName: \"example-qa.com\"\r\n\r\n```\r\n3. It is NOT POSSIBLE to request additional Logs, Security, or Shared accounts. \r\n\r\n**MachineUserGitUsername** (type = string)\r\nThis is the username of the Version control system account you have created to serve as your \"machine user\", which is an integral piece of the Gruntwork Pipelines solution and part of the Gruntwork Reference Architecture deployment tooling. \r\n\r\nFor example, if you are ultimately going to host and run your code in GitHub, you would create a new GitHub account for your machine user. You cannot use an existing GitHub account, such as your existing, personal account because we request a GitHub Personal Access Token from your Machine user's account which gives us sufficient access to upload SSH keys for your user and to make any other changes necessary to perform a deployment. \r\n\r\nSeparation of accounts is an intentional design choice made to enhance your own security. \r\n\r\n**MachineUserGitEmail** (type = string) \r\n\r\nWe need this email address in order to complete Git configuration required to allow your machine user to make commits in the CI/CD pipeline. \r\n\r\n**CIServerPlatform**\r\nChoose the flavor for the first leg of your Gruntwork Pipelines solution. If you choose `circleci`, we will generate CircleCI configuration files for you in your repository when delivering your Reference Architecture. If you select `gitlab`, we'll scaffold code intended to be used in Gitlab pipelines, and so on. \r\n\r\nWe strongly recommend you choose `circleci` for simplicity and reliability. \r\n\r\nPlease do not choose `jenkins` unless you have multiple years of experience administering Jenkins in a CI/CD pipeline. \r\n\r\n**VCSPlatformType** (type = string)\r\nEnter the VCS platform where you'll be hosting and running your Reference Architecture code in the future. You must select either `github` or `bitbucket` or `gitlab`. \r\n\r\nDepending upon your selection, we may attempt to do some of the CI/CD pipelines setup for you. For example, if you select Gitlab, we attempt to create the Gitlab project variables your Gruntwork Pipelines solution will require on your behalf. Please note this feature is dependent upon your correctly supplying us with valid credentials to make Gitlab API calls on your behalf. \r\n\r\nCurrently we do not offer such support for Bitbucket. \r\n\r\nFor any and all CI/CD VCS platforms, you will still need to complete a few integration steps upon delivery of your Ref Arch to make your pipeline fully operational. \r\n\r\n**VCSPATSecretsManagerARN**\r\n\r\nWhatever VCS platform you are using, do this:\r\n\r\n- In GitHub, create a new user account, then create a [Personal Access Token (PAT)](https://docs.github.com/en/github/authenticating-to-github/creating-a-personal-access-token).\r\n- In the ref arch form, MachineUserGitUsername and MachineUserGitEmail is where you enter this account’s details.\r\n- In the [Gruntwork developer portal](https://app.gruntwork.io/), add the user to your team, then log in to the portal as the machine user and link the GitHub account. You’ll know it’s set up correctly when you see the Gruntwork icon in the machine user’s GitHub profile, indicating that they are a member of the Gruntwork Organization.\r\n- The PAT should be granted repo, user:email, and admin:public_key permissions.\r\n- Once you have the PAT, create a new [AWS Secrets Manager](https://aws.amazon.com/secrets-manager/) secret in the shared account. You can use any name you wish for this secret. See the section [Appendix: How to create a secret for the VCS token in AWS Secrets Manager](https://github.com/gruntwork-clients/infrastructure-live#appendix-how-to-create-a-secret-for-the-vcs-token-in-aws-secrets-manager) for details.\r\n- Once the secret is created, make a note of the ARN.\r\n- In the ref arch form, `VCSPATSecretsManagerARN` is where you enter this ARN.\r\n\r\nIf you are using GitHub as your VCS, you’re done with this section! If you’re using GitLab or BitBucket, do the following:\r\n\r\nFor GitLab, use [these instructions](https://docs.gitlab.com/ee/user/profile/personal_access_tokens.html), and grant the following scopes (NOTE: api, read_user, and read_api scopes are only used for uploading the public SSH key for the user. You can replace the token with a new one that only has write_repository permission after the Reference Architecture is deployed.):\r\n- `write_repository`\r\n- `api`\r\n- `read_user`\r\n- `read_api`\r\n\r\nFor Bitbucket, use [these instructions](https://support.atlassian.com/bitbucket-cloud/docs/app-passwords/)[](https://github.com/gruntwork-clients/infrastructure-live#explanation-2), and grant the following scopes (NOTE: Account:Write is only used for uploading the public SSH key for the user. You can replace the token with a new one that only has Repositories:Write permission after the Reference Architecture is deployed.):\r\n- `Repositories:Write`\r\n- `Account:Write`\r\n\r\nThen create another secret in AWS Secrets Manager in the shared account containing this PAT. Note the ARN, as in the GitHub step above.\r\n\r\nIn the ref arch form, `GitHubPATSecretsManagerARN` is where you enter this ARN.\r\n\r\nWhy do we require this?\r\n\r\nThe reference architecture includes an end-to-end [CI/CD pipeline for infrastructure](https://gruntwork.io/pipelines/). You’ll need to set up a machine user (also known as a service account) that will automatically checkout your code, push artifacts (such as Docker images and AMIs), and access the Gruntwork IaC Library.\r\n\r\nYou need one [machine user in GitHub](https://developer.github.com/v3/guides/managing-deploy-keys/#machine-users) to access the repos in the Gruntwork IaC Library. If you’re not using GitHub, (e.g., in BitBucket or GitLab), you’ll need to create another machine user for that VCS.\r\n\r\n\r\n**CACertFields** (type = map)\r\nThese certificate authority values will be used to create the TLS certificates that [the AWS Sample App](https://github.com/gruntwork-io/aws-sample-app) we deploy into your app accounts will use to serve traffic over HTTPS.\r\n\r\n**UsingCISCompliance** (type = bool) \r\n\r\nSet this value to true if you have purchased [the CIS AWS Foundations Benchmark add-on](https://gruntwork.io/achieve-compliance/)\r\n\r\n\r\n**VPNIPAllowList** (type = list)\r\n\r\nThe list of CIDR ranges that are permitted to access the network bastion. Note that, even if you have purchased the CIS compliance add-on, you MAY supply the default CIDR range of `0.0.0.0/0` if you wish, for this VPNIPAllowList entry. \r\n\r\nIf you wish to specify that a single IP address should have access, be sure to add the correct `/32` prefix, like so: \r\n```yaml\r\nVPNIPAllowList:\r\n     - \"192.168.2.1/32\"\r\n```\r\n**SSHIPAllowList** (type = list)\r\n\r\nThe list of CIDR ranges that will be permitted SSH access to the network bastion. Note that if you purchased the CIS compliance add-on, you **MUST** set this to a CIDR range more restricted than `0.0.0.0/0`. Your CIS deployment cannot proceed if you supply `0.0.0.0/0` for this value. \r\n\r\n**BastionType** (type = string)\r\nThe flavor of bastion host you would like to protect your private resources. \r\n\r\n**AppServerClusterType** (type = string)\r\n\r\n**DatabaseType** (type = string)\r\n\r\n**CacheType** (type = string)","bodyHTML":"<p dir=\"auto\"><strong>CompanyName</strong> (type = string)<br>\nThis is your company's name. It may be used when generating unique prefixes for resources such as S3 buckets, Application Load Balancers, etc. If your company name is too long, our tooling will truncate it so that it does not exceed the character limits imposed by various AWS resources.</p>\n<p dir=\"auto\"><strong>PrimaryRegion</strong> (type = string)<br>\nThis is the AWS region that you want your resources (databases, compute stack, etc) deployed into initially. Note, you can only select one PrimaryRegion initially for your deployment. If you wish to run resources in more than one region following your deployment, see <a href=\"https://github.com/gruntwork-io/knowledge-base/discussions/216#discussioncomment-2232046\" data-hovercard-type=\"discussion\" data-hovercard-url=\"/gruntwork-io/knowledge-base/discussions/216/hovercard?comment_id=2232046\">this Knowledge Base answer</a>.</p>\n<p dir=\"auto\">Please note that not all AWS regions are currently supported. This is because some AWS regions may not actually implement certain AWS services that the Reference Architecture composes. If the region you selected is not supported, a Gruntwork engineer will let you know.</p>\n<p dir=\"auto\"><strong>InfraLiveRepoURL</strong> (type = string)<br>\nThis is the URL to the repository where you want to host and run your Reference Architecture code <strong>after</strong> your Reference Architecture has been delivered to you.  This URL must end in <code class=\"notranslate\">.git</code>.</p>\n<p dir=\"auto\">Whereas the <code class=\"notranslate\">github.com/gruntwork-clients/infrastructure-live-&lt;your-name&gt;</code> repository is used for the following purposes:</p>\n<ul dir=\"auto\">\n<li>Getting you set up for your Ref Arch deployment</li>\n<li>Collaborating with other team members on your side pre-deployment</li>\n<li>Collaborating with Gruntwork engineers on your form to ensure you are ready for deployment</li>\n<li>Performing the deployment. Gruntwork engineers use this repository and specialized tooling to implement your Reference Architecture</li>\n</ul>\n<p dir=\"auto\">your <strong>InfraLiveRepoURL</strong> can optionally point to a different repository where you or your company wants to manage your Ref Arch going forward. For example, if your company prefers Bitbucket and normally works there, you should set this to the HTTPS URL of the Bitbucket repository where you will host this code in the future.</p>\n<p dir=\"auto\"><strong>InfraLiveRepoSSHURL</strong> (type = string)</p>\n<p dir=\"auto\">This is the SSH URL to the repository where you want to host and run your Reference Architecture code <strong>after</strong> your Reference Architecture has been delivered to you. This URL must end in <code class=\"notranslate\">.git</code>.</p>\n<p dir=\"auto\">Note that this URL is related to your <strong>InfraLiveRepoURL</strong>. Your <code class=\"notranslate\">InfraLiveRepoSSHURL</code> should be the SSH URL <strong>to the same repository you specified in InfraLiveRepoURL</strong>.</p>\n<p dir=\"auto\"><strong>InfraLiveDefaultBranchName</strong> (type = string)</p>\n<p dir=\"auto\">The default branch of the infrastructure-live repository. This branch is the only branch that the Gruntwork Pipelines solution will be allowed to deploy from. This branch should be marked as protected by your VCS platform.</p>\n<p dir=\"auto\">If you are unfamiliar with protected branches, you can review the following documentation:</p>\n<p dir=\"auto\">GitHub: <a href=\"https://docs.github.com/en/github/administering-a-repository/about-protected-branches\">https://docs.github.com/en/github/administering-a-repository/about-protected-branches</a><br>\nGitLab: <a href=\"https://docs.gitlab.com/ee/user/project/protected_branches.html\" rel=\"nofollow\">https://docs.gitlab.com/ee/user/project/protected_branches.html</a><br>\nBitbucket: <a href=\"https://support.atlassian.com/bitbucket-cloud/docs/use-branch-permissions/\" rel=\"nofollow\">https://support.atlassian.com/bitbucket-cloud/docs/use-branch-permissions/</a></p>\n<p dir=\"auto\">We recommend using \"main\" as the name of the default branch. If you already have a specially configured branch you want to use# that is not \"main\" you can create a copy of it by running <code class=\"notranslate\">git checkout -b main</code>.</p>\n<p dir=\"auto\">Your CI/CD integration will use this branch as the production branch, meaning that</p>\n<ol dir=\"auto\">\n<li>This branch will reflect what is deployed and running in production at any given time</li>\n<li>CI/CD will run <code class=\"notranslate\">terragrunt apply</code> against this whenever you merge changes into it (from development or feature branches)</li>\n<li>Feature branches that are pushed such as <code class=\"notranslate\">developer-test-feature-1</code> will have <code class=\"notranslate\">terragrunt plan</code> run against them</li>\n</ol>\n<p dir=\"auto\"><strong>AdminIAMUsers</strong> (type = list)<br>\nThis is a list of the users that you are requesting be provisioned in your Reference Architecture's Security account during your deployment. The Security account is the only account in the Gruntwork Reference Architecture that contains IAM users, whereas all other accounts use IAM roles for cross-account access.</p>\n<p dir=\"auto\">You must specify at least one Admin IAM user when preparing for a Ref Arch deployment. This user will become one of the primary ways to access your Reference Architecture once it is deployed.</p>\n<p dir=\"auto\">For each user in your list, you can supply the following attributes:</p>\n<ul dir=\"auto\">\n<li>Username -  The IAM username that you want created.</li>\n<li>Email - The email address for the IAM user. This must be a valid email address, otherwise password reset workflows will not be successful.</li>\n<li>PGPKey - The PGPKey for the user. This PGPKey property is required when you are setting up the AdminIAMUsers for your Reference Architecture. You have two options for supplying a PGPKey:</li>\n</ul>\n<ol dir=\"auto\">\n<li>Keybase. You can use an existing Keybase.io user account or make a new one. If you opt to use keybase, your Keybase user MUST have a public PGP Key associated, otherwise your form will not pass preflight checks and will be need to be fixed before your deployment can commence.</li>\n</ol>\n<p dir=\"auto\">If your keybase username is <code class=\"notranslate\">grunty</code>, then you would enter <code class=\"notranslate\">keybase:grunty</code> for the <code class=\"notranslate\">PGPKey</code> attribute when defining your Admin IAM user.</p>\n<p dir=\"auto\">To confirm that your keybase user has a public PGP key associated, go to <a href=\"https://keybase.io/\" rel=\"nofollow\">https://keybase.io/</a> and ensure you can see a key icon followed by the key fingerprint, like so:</p>\n<p dir=\"auto\"><a target=\"_blank\" rel=\"noopener noreferrer nofollow\" href=\"https://user-images.githubusercontent.com/1769996/162036346-5f23ae14-877c-4497-ac67-855d7fa73cb6.png\"><img src=\"https://user-images.githubusercontent.com/1769996/162036346-5f23ae14-877c-4497-ac67-855d7fa73cb6.png\" alt=\"keybase-example\" style=\"max-width: 100%;\"></a></p>\n<ol start=\"2\" dir=\"auto\">\n<li>Exported PGP Key. You can follow <a href=\"https://github.com/gruntwork-io/terraform-aws-security/tree/master/modules/iam-users#how-do-i-use-pgp-keys-directly\">the instructions here</a> to export a PGP key that you control locally.</li>\n</ol>\n<p dir=\"auto\"><strong>AWSAccounts</strong> (type = list)</p>\n<p dir=\"auto\">This is where you will configure the AWS accounts that your Reference Architecture will be deployed into. Please use <a href=\"https://github.com/gruntwork-io/gruntwork\">the Gruntwork CLI</a> to automatically scaffold and create your AWS accounts if you have not already created them manually. We STRONGLY RECOMMEND use of the Gruntwork CLI because it removes the possibility of manual configuration errors that may delay your deployment.</p>\n<p dir=\"auto\">It's important to understand a few key points when defining your AWS Accounts.</p>\n<ol dir=\"auto\">\n<li>Gruntwork <strong>requires</strong> BRAND NEW NEVER USED AWS accounts, that have had absolutely nothing done to them. No corporate account baselines can have been applied, as these will conflict with the Gruntwork Reference Architecture's own baselines and will significantly delay your deployment. See also <a href=\"https://github.com/gruntwork-io/knowledge-base/discussions/207\" data-hovercard-type=\"discussion\" data-hovercard-url=\"/gruntwork-io/knowledge-base/discussions/207/hovercard\">the Knowledge Base post \"Can we use existing AWS accounts and organizations for the Ref Arch?\"</a></li>\n<li>It is possible to request additional \"App\" accounts (dev, stage, prod). In the correlative outer map, add another entry for additional accounts that you want provisioned. For example, if you wanted two staging environments, one named <code class=\"notranslate\">staging</code> and one named <code class=\"notranslate\">qa</code>, you would find the <code class=\"notranslate\">stage:</code> key in the YAML map and enter something like this:</li>\n</ol>\n<div class=\"highlight highlight-source-yaml notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\" stage:\n    \n    - Name: &quot;staging&quot;\n      ID: &quot;&lt;YOUR ACCOUNT ID&gt;&quot;\n      DomainName: &quot;example-staging.com&quot;\n    - Name: &quot;qa&quot;\n      ID: &quot;&lt;YOUR ACCOUNT ID&gt;&quot;\n      DomainName: &quot;example-qa.com&quot;\n\"><pre class=\"notranslate\"> <span class=\"pl-ent\">stage</span>:\n    \n    - <span class=\"pl-ent\">Name</span>: <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>staging<span class=\"pl-pds\">\"</span></span>\n      <span class=\"pl-ent\">ID</span>: <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>&lt;YOUR ACCOUNT ID&gt;<span class=\"pl-pds\">\"</span></span>\n      <span class=\"pl-ent\">DomainName</span>: <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>example-staging.com<span class=\"pl-pds\">\"</span></span>\n    - <span class=\"pl-ent\">Name</span>: <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>qa<span class=\"pl-pds\">\"</span></span>\n      <span class=\"pl-ent\">ID</span>: <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>&lt;YOUR ACCOUNT ID&gt;<span class=\"pl-pds\">\"</span></span>\n      <span class=\"pl-ent\">DomainName</span>: <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>example-qa.com<span class=\"pl-pds\">\"</span></span>\n</pre></div>\n<ol start=\"3\" dir=\"auto\">\n<li>It is NOT POSSIBLE to request additional Logs, Security, or Shared accounts.</li>\n</ol>\n<p dir=\"auto\"><strong>MachineUserGitUsername</strong> (type = string)<br>\nThis is the username of the Version control system account you have created to serve as your \"machine user\", which is an integral piece of the Gruntwork Pipelines solution and part of the Gruntwork Reference Architecture deployment tooling.</p>\n<p dir=\"auto\">For example, if you are ultimately going to host and run your code in GitHub, you would create a new GitHub account for your machine user. You cannot use an existing GitHub account, such as your existing, personal account because we request a GitHub Personal Access Token from your Machine user's account which gives us sufficient access to upload SSH keys for your user and to make any other changes necessary to perform a deployment.</p>\n<p dir=\"auto\">Separation of accounts is an intentional design choice made to enhance your own security.</p>\n<p dir=\"auto\"><strong>MachineUserGitEmail</strong> (type = string)</p>\n<p dir=\"auto\">We need this email address in order to complete Git configuration required to allow your machine user to make commits in the CI/CD pipeline.</p>\n<p dir=\"auto\"><strong>CIServerPlatform</strong><br>\nChoose the flavor for the first leg of your Gruntwork Pipelines solution. If you choose <code class=\"notranslate\">circleci</code>, we will generate CircleCI configuration files for you in your repository when delivering your Reference Architecture. If you select <code class=\"notranslate\">gitlab</code>, we'll scaffold code intended to be used in Gitlab pipelines, and so on.</p>\n<p dir=\"auto\">We strongly recommend you choose <code class=\"notranslate\">circleci</code> for simplicity and reliability.</p>\n<p dir=\"auto\">Please do not choose <code class=\"notranslate\">jenkins</code> unless you have multiple years of experience administering Jenkins in a CI/CD pipeline.</p>\n<p dir=\"auto\"><strong>VCSPlatformType</strong> (type = string)<br>\nEnter the VCS platform where you'll be hosting and running your Reference Architecture code in the future. You must select either <code class=\"notranslate\">github</code> or <code class=\"notranslate\">bitbucket</code> or <code class=\"notranslate\">gitlab</code>.</p>\n<p dir=\"auto\">Depending upon your selection, we may attempt to do some of the CI/CD pipelines setup for you. For example, if you select Gitlab, we attempt to create the Gitlab project variables your Gruntwork Pipelines solution will require on your behalf. Please note this feature is dependent upon your correctly supplying us with valid credentials to make Gitlab API calls on your behalf.</p>\n<p dir=\"auto\">Currently we do not offer such support for Bitbucket.</p>\n<p dir=\"auto\">For any and all CI/CD VCS platforms, you will still need to complete a few integration steps upon delivery of your Ref Arch to make your pipeline fully operational.</p>\n<p dir=\"auto\"><strong>VCSPATSecretsManagerARN</strong></p>\n<p dir=\"auto\">Whatever VCS platform you are using, do this:</p>\n<ul dir=\"auto\">\n<li>In GitHub, create a new user account, then create a <a href=\"https://docs.github.com/en/github/authenticating-to-github/creating-a-personal-access-token\">Personal Access Token (PAT)</a>.</li>\n<li>In the ref arch form, MachineUserGitUsername and MachineUserGitEmail is where you enter this account’s details.</li>\n<li>In the <a href=\"https://app.gruntwork.io/\" rel=\"nofollow\">Gruntwork developer portal</a>, add the user to your team, then log in to the portal as the machine user and link the GitHub account. You’ll know it’s set up correctly when you see the Gruntwork icon in the machine user’s GitHub profile, indicating that they are a member of the Gruntwork Organization.</li>\n<li>The PAT should be granted repo, user:email, and admin:public_key permissions.</li>\n<li>Once you have the PAT, create a new <a href=\"https://aws.amazon.com/secrets-manager/\" rel=\"nofollow\">AWS Secrets Manager</a> secret in the shared account. You can use any name you wish for this secret. See the section <a href=\"https://github.com/gruntwork-clients/infrastructure-live#appendix-how-to-create-a-secret-for-the-vcs-token-in-aws-secrets-manager\">Appendix: How to create a secret for the VCS token in AWS Secrets Manager</a> for details.</li>\n<li>Once the secret is created, make a note of the ARN.</li>\n<li>In the ref arch form, <code class=\"notranslate\">VCSPATSecretsManagerARN</code> is where you enter this ARN.</li>\n</ul>\n<p dir=\"auto\">If you are using GitHub as your VCS, you’re done with this section! If you’re using GitLab or BitBucket, do the following:</p>\n<p dir=\"auto\">For GitLab, use <a href=\"https://docs.gitlab.com/ee/user/profile/personal_access_tokens.html\" rel=\"nofollow\">these instructions</a>, and grant the following scopes (NOTE: api, read_user, and read_api scopes are only used for uploading the public SSH key for the user. You can replace the token with a new one that only has write_repository permission after the Reference Architecture is deployed.):</p>\n<ul dir=\"auto\">\n<li><code class=\"notranslate\">write_repository</code></li>\n<li><code class=\"notranslate\">api</code></li>\n<li><code class=\"notranslate\">read_user</code></li>\n<li><code class=\"notranslate\">read_api</code></li>\n</ul>\n<p dir=\"auto\">For Bitbucket, use <a href=\"https://support.atlassian.com/bitbucket-cloud/docs/app-passwords/\" rel=\"nofollow\">these instructions</a><a href=\"https://github.com/gruntwork-clients/infrastructure-live#explanation-2\"></a>, and grant the following scopes (NOTE: Account:Write is only used for uploading the public SSH key for the user. You can replace the token with a new one that only has Repositories:Write permission after the Reference Architecture is deployed.):</p>\n<ul dir=\"auto\">\n<li><code class=\"notranslate\">Repositories:Write</code></li>\n<li><code class=\"notranslate\">Account:Write</code></li>\n</ul>\n<p dir=\"auto\">Then create another secret in AWS Secrets Manager in the shared account containing this PAT. Note the ARN, as in the GitHub step above.</p>\n<p dir=\"auto\">In the ref arch form, <code class=\"notranslate\">GitHubPATSecretsManagerARN</code> is where you enter this ARN.</p>\n<p dir=\"auto\">Why do we require this?</p>\n<p dir=\"auto\">The reference architecture includes an end-to-end <a href=\"https://gruntwork.io/pipelines/\" rel=\"nofollow\">CI/CD pipeline for infrastructure</a>. You’ll need to set up a machine user (also known as a service account) that will automatically checkout your code, push artifacts (such as Docker images and AMIs), and access the Gruntwork IaC Library.</p>\n<p dir=\"auto\">You need one <a href=\"https://developer.github.com/v3/guides/managing-deploy-keys/#machine-users\">machine user in GitHub</a> to access the repos in the Gruntwork IaC Library. If you’re not using GitHub, (e.g., in BitBucket or GitLab), you’ll need to create another machine user for that VCS.</p>\n<p dir=\"auto\"><strong>CACertFields</strong> (type = map)<br>\nThese certificate authority values will be used to create the TLS certificates that <a href=\"https://github.com/gruntwork-io/aws-sample-app\">the AWS Sample App</a> we deploy into your app accounts will use to serve traffic over HTTPS.</p>\n<p dir=\"auto\"><strong>UsingCISCompliance</strong> (type = bool)</p>\n<p dir=\"auto\">Set this value to true if you have purchased <a href=\"https://gruntwork.io/achieve-compliance/\" rel=\"nofollow\">the CIS AWS Foundations Benchmark add-on</a></p>\n<p dir=\"auto\"><strong>VPNIPAllowList</strong> (type = list)</p>\n<p dir=\"auto\">The list of CIDR ranges that are permitted to access the network bastion. Note that, even if you have purchased the CIS compliance add-on, you MAY supply the default CIDR range of <code class=\"notranslate\">0.0.0.0/0</code> if you wish, for this VPNIPAllowList entry.</p>\n<p dir=\"auto\">If you wish to specify that a single IP address should have access, be sure to add the correct <code class=\"notranslate\">/32</code> prefix, like so:</p>\n<div class=\"highlight highlight-source-yaml notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"VPNIPAllowList:\n     - &quot;192.168.2.1/32&quot;\"><pre class=\"notranslate\"><span class=\"pl-ent\">VPNIPAllowList</span>:\n     - <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>192.168.2.1/32<span class=\"pl-pds\">\"</span></span></pre></div>\n<p dir=\"auto\"><strong>SSHIPAllowList</strong> (type = list)</p>\n<p dir=\"auto\">The list of CIDR ranges that will be permitted SSH access to the network bastion. Note that if you purchased the CIS compliance add-on, you <strong>MUST</strong> set this to a CIDR range more restricted than <code class=\"notranslate\">0.0.0.0/0</code>. Your CIS deployment cannot proceed if you supply <code class=\"notranslate\">0.0.0.0/0</code> for this value.</p>\n<p dir=\"auto\"><strong>BastionType</strong> (type = string)<br>\nThe flavor of bastion host you would like to protect your private resources.</p>\n<p dir=\"auto\"><strong>AppServerClusterType</strong> (type = string)</p>\n<p dir=\"auto\"><strong>DatabaseType</strong> (type = string)</p>\n<p dir=\"auto\"><strong>CacheType</strong> (type = string)</p>"}}} />

</CenterLayout>

<!-- ##DOCS-SOURCER-START
{
  "sourcePlugin": "github-discussions",
  "hash": "3c598169a04d4a891f8b663518bb1a7b"
}
##DOCS-SOURCER-END -->
