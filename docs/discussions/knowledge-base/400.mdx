---
hide_table_of_contents: true
hide_title: true
custom_edit_url: null
---

import CenterLayout from "/src/components/CenterLayout"
import GitHub from "/src/components/GitHub"

<head>
  <link rel="canonical" href="https://github.com/gruntwork-io/knowledge-base/discussions/400" />
</head>

<CenterLayout>
<span className="searchCategory">Knowledge Base</span>
<h1>State bucket access for ops-admin</h1>
<GitHub discussion={{"id":"D_kwDOF8slf84APcKD","number":400,"author":{"login":"moos3"},"title":"State bucket access for ops-admin","body":"\nIt appears in the Ref Arch the ops-admin assumed roles don't have access to the state bucket, so they aren't able to do a terragrunt plan to review changes before pushing it up to github. This makes module development a bit a headache. Is there something special that needs to be done to allow ops-admins to do this?\n\n---\n\n<ins datetime=\"2022-05-02T13:38:45Z\">\n  <p><a href=\"https://gruntwork.zendesk.com/agent/tickets/108532\">Tracked in ticket #108532</a></p>\n</ins>\n","bodyHTML":"<p dir=\"auto\">It appears in the Ref Arch the ops-admin assumed roles don't have access to the state bucket, so they aren't able to do a terragrunt plan to review changes before pushing it up to github. This makes module development a bit a headache. Is there something special that needs to be done to allow ops-admins to do this?</p>\n<hr>\n<ins datetime=\"2022-05-02T13:38:45Z\">\n  <p dir=\"auto\"><a href=\"https://gruntwork.zendesk.com/agent/tickets/108532\" rel=\"nofollow\">Tracked in ticket #108532</a></p>\n</ins>","answer":{"body":"The `ops-admin` role does have access to the state buckets. If you look at [the IAM policy that is assigned to the role](https://github.com/gruntwork-io/terraform-aws-cis-service-catalog/blob/master/examples/for-production/infrastructure-live/dev/_global/ops-admin-role/terragrunt.hcl#L58), you will see that it is using the exact same permissions as the ECS Deploy Runner, which has the following [IAM policy statements](https://github.com/gruntwork-io/terraform-aws-cis-service-catalog/blob/master/examples/for-production/infrastructure-live/_envcommon/mgmt/deploy_permissions.yml#L189-L201)\r\n\r\nNote that the role only has permissions to access and manipulate the state bucket of the account in which the role resides. E.g., the `ops-admin` role for the Dev account can only access the state bucket of resources in the Dev account.\r\n\r\nGiven that, typically state bucket access issues are a sign that either:\r\n\r\n- The state bucket was incorrectly created in the wrong account.\r\n- You are assuming the `ops-admin` role in the wrong account.","bodyHTML":"<p dir=\"auto\">The <code class=\"notranslate\">ops-admin</code> role does have access to the state buckets. If you look at <a href=\"https://github.com/gruntwork-io/terraform-aws-cis-service-catalog/blob/master/examples/for-production/infrastructure-live/dev/_global/ops-admin-role/terragrunt.hcl#L58\">the IAM policy that is assigned to the role</a>, you will see that it is using the exact same permissions as the ECS Deploy Runner, which has the following <a href=\"https://github.com/gruntwork-io/terraform-aws-cis-service-catalog/blob/master/examples/for-production/infrastructure-live/_envcommon/mgmt/deploy_permissions.yml#L189-L201\">IAM policy statements</a></p>\n<p dir=\"auto\">Note that the role only has permissions to access and manipulate the state bucket of the account in which the role resides. E.g., the <code class=\"notranslate\">ops-admin</code> role for the Dev account can only access the state bucket of resources in the Dev account.</p>\n<p dir=\"auto\">Given that, typically state bucket access issues are a sign that either:</p>\n<ul dir=\"auto\">\n<li>The state bucket was incorrectly created in the wrong account.</li>\n<li>You are assuming the <code class=\"notranslate\">ops-admin</code> role in the wrong account.</li>\n</ul>"}}} />

</CenterLayout>

<!-- ##DOCS-SOURCER-START
{
  "sourcePlugin": "github-discussions",
  "hash": "87dd74b10c704a282c2fbcf05bde12b0"
}
##DOCS-SOURCER-END -->
