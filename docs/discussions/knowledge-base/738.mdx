---
hide_table_of_contents: true
hide_title: true
custom_edit_url: null
---

import CenterLayout from "/src/components/CenterLayout"
import GitHub from "/src/components/GitHub"

<head>
  <link rel="canonical" href="https://github.com/gruntwork-io/knowledge-base/discussions/738" />
</head>

<CenterLayout>
<span className="searchCategory">Knowledge Base</span>
<h1>output dependency not being read by input</h1>
<GitHub discussion={{"id":"D_kwDOF8slf84AUOQB","number":738,"author":{"login":"fraz78"},"title":"output dependency not being read by input","body":"\r\nHi folks,\r\n\r\nI have a `security group` module that has the below output\r\n\r\n```\r\noutput \"id\" {\r\n  value = aws_security_group.main.id\r\n}\r\n```\r\n\r\nwhen i run `terragrunt output ` against the `security group` module it returns the following output value\r\n\r\n```\r\narn = \"arn:aws:ec2:eu-west-2:83160456789:security-group/sg-095f26bc2025abcde\"\r\nid = \"sg-095f26bc2025abcde\"\r\n```\r\n\r\nhowever, when i try to call the above output in my `rds` module using a dependency in my terragrunt.hcl file, i get the following\r\n\r\n```\r\n│ Error: Variables not allowed\r\n│ \r\n│   on <value for var.vpc_security_group_ids> line 1:\r\n│   (source code not available)\r\n│ \r\n│ Variables may not be used here.\r\n```\r\n\r\nthe variable in my `rds` module is setup as follows\r\n\r\n```\r\nvariable \"vpc_security_group_ids\" {\r\n  description = \"List of VPC security groups to associate\"\r\n  type        = list(string)\r\n  default     = []\r\n}\r\n```\r\n\r\nmy `terragrunt.hcl` file is setup as follows. Please note that i have been able to pass the hard coded security group value (commented out below) and get it to deploy successfully, but as soon as i attempt to use the `dependency.sg.outputs.id` it fails with the above error. For the record, i have tried wrapping it as `[\"dependency.sg.outputs.id\"]` but this is then read in as a string and not a dynamic value.\r\n\r\n```\r\ndependency \"sg\" {\r\n  config_path = \"../sg/rds\"\r\n}\r\n\r\ndependency \"subnet\" {\r\n  config_path = \"../subnet/mft-subnet\"\r\n}\r\n\r\ninputs = {\r\n\r\n  # vpc_security_group_ids  = [\"sg-095f26bc2025abcde\"] \r\n  vpc_security_group_ids     = dependency.sg.outputs.id\r\n  subnet_ids                 = dependency.subnet.outputs.aws_subnets.main.ids\r\n\r\n```\r\n\r\n**Any idea of what may be causing this???????**\r\n\r\nFor the record, the `subnet_ids` in the **above** example in contrast works fine. It's output and variable are defined **below** for reference purposes only:\r\n\r\n```\r\naws_subnets = {\r\n  \"main\" = {\r\n    \"ids\" = [\r\n      \"subnet-02132b73acfeabcderr\",\r\n      \"subnet-050d63659cd5abcdedf\",\r\n    ]\r\n  }\r\n}\r\nmodule = {}\r\n\r\n\r\nvariable \"subnet_ids\" {\r\n  description = \"A list of VPC subnet IDs\"\r\n  type        = list(string)\r\n  default     = []\r\n}\r\n```\r\n\r\n---\r\n\r\n<ins datetime=\"2023-06-15T10:04:53Z\">\r\n  <p><a href=\"https://support.gruntwork.io/hc/requests/110257\">Tracked in ticket #110257</a></p>\r\n</ins>\r\n","bodyHTML":"<p dir=\"auto\">Hi folks,</p>\n<p dir=\"auto\">I have a <code class=\"notranslate\">security group</code> module that has the below output</p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"output &quot;id&quot; {\n  value = aws_security_group.main.id\n}\"><pre class=\"notranslate\"><code class=\"notranslate\">output \"id\" {\n  value = aws_security_group.main.id\n}\n</code></pre></div>\n<p dir=\"auto\">when i run <code class=\"notranslate\">terragrunt output </code> against the <code class=\"notranslate\">security group</code> module it returns the following output value</p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"arn = &quot;arn:aws:ec2:eu-west-2:83160456789:security-group/sg-095f26bc2025abcde&quot;\nid = &quot;sg-095f26bc2025abcde&quot;\"><pre class=\"notranslate\"><code class=\"notranslate\">arn = \"arn:aws:ec2:eu-west-2:83160456789:security-group/sg-095f26bc2025abcde\"\nid = \"sg-095f26bc2025abcde\"\n</code></pre></div>\n<p dir=\"auto\">however, when i try to call the above output in my <code class=\"notranslate\">rds</code> module using a dependency in my terragrunt.hcl file, i get the following</p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"│ Error: Variables not allowed\n│ \n│   on &lt;value for var.vpc_security_group_ids&gt; line 1:\n│   (source code not available)\n│ \n│ Variables may not be used here.\"><pre class=\"notranslate\"><code class=\"notranslate\">│ Error: Variables not allowed\n│ \n│   on &lt;value for var.vpc_security_group_ids&gt; line 1:\n│   (source code not available)\n│ \n│ Variables may not be used here.\n</code></pre></div>\n<p dir=\"auto\">the variable in my <code class=\"notranslate\">rds</code> module is setup as follows</p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"variable &quot;vpc_security_group_ids&quot; {\n  description = &quot;List of VPC security groups to associate&quot;\n  type        = list(string)\n  default     = []\n}\"><pre class=\"notranslate\"><code class=\"notranslate\">variable \"vpc_security_group_ids\" {\n  description = \"List of VPC security groups to associate\"\n  type        = list(string)\n  default     = []\n}\n</code></pre></div>\n<p dir=\"auto\">my <code class=\"notranslate\">terragrunt.hcl</code> file is setup as follows. Please note that i have been able to pass the hard coded security group value (commented out below) and get it to deploy successfully, but as soon as i attempt to use the <code class=\"notranslate\">dependency.sg.outputs.id</code> it fails with the above error. For the record, i have tried wrapping it as <code class=\"notranslate\">[\"dependency.sg.outputs.id\"]</code> but this is then read in as a string and not a dynamic value.</p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"dependency &quot;sg&quot; {\n  config_path = &quot;../sg/rds&quot;\n}\n\ndependency &quot;subnet&quot; {\n  config_path = &quot;../subnet/mft-subnet&quot;\n}\n\ninputs = {\n\n  # vpc_security_group_ids  = [&quot;sg-095f26bc2025abcde&quot;] \n  vpc_security_group_ids     = dependency.sg.outputs.id\n  subnet_ids                 = dependency.subnet.outputs.aws_subnets.main.ids\n\"><pre class=\"notranslate\"><code class=\"notranslate\">dependency \"sg\" {\n  config_path = \"../sg/rds\"\n}\n\ndependency \"subnet\" {\n  config_path = \"../subnet/mft-subnet\"\n}\n\ninputs = {\n\n  # vpc_security_group_ids  = [\"sg-095f26bc2025abcde\"] \n  vpc_security_group_ids     = dependency.sg.outputs.id\n  subnet_ids                 = dependency.subnet.outputs.aws_subnets.main.ids\n\n</code></pre></div>\n<p dir=\"auto\"><strong>Any idea of what may be causing this???????</strong></p>\n<p dir=\"auto\">For the record, the <code class=\"notranslate\">subnet_ids</code> in the <strong>above</strong> example in contrast works fine. It's output and variable are defined <strong>below</strong> for reference purposes only:</p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"aws_subnets = {\n  &quot;main&quot; = {\n    &quot;ids&quot; = [\n      &quot;subnet-02132b73acfeabcderr&quot;,\n      &quot;subnet-050d63659cd5abcdedf&quot;,\n    ]\n  }\n}\nmodule = {}\n\n\nvariable &quot;subnet_ids&quot; {\n  description = &quot;A list of VPC subnet IDs&quot;\n  type        = list(string)\n  default     = []\n}\"><pre class=\"notranslate\"><code class=\"notranslate\">aws_subnets = {\n  \"main\" = {\n    \"ids\" = [\n      \"subnet-02132b73acfeabcderr\",\n      \"subnet-050d63659cd5abcdedf\",\n    ]\n  }\n}\nmodule = {}\n\n\nvariable \"subnet_ids\" {\n  description = \"A list of VPC subnet IDs\"\n  type        = list(string)\n  default     = []\n}\n</code></pre></div>\n<hr>\n<ins datetime=\"2023-06-15T10:04:53Z\">\n  <p dir=\"auto\"><a href=\"https://support.gruntwork.io/hc/requests/110257\" rel=\"nofollow\">Tracked in ticket #110257</a></p>\n</ins>","answer":{"body":"Hi, the variable can be wrapped in `[]` to convert it to a list...\r\n\r\n```\r\ninputs = {\r\n  vpc_security_group_ids     = [ dependency.dep.outputs.id ]\r\n}\r\n```\r\n\r\nSimplified example in: \r\nhttps://github.com/denis256/terragrunt-tests/tree/master/discussion-738","bodyHTML":"<p dir=\"auto\">Hi, the variable can be wrapped in <code class=\"notranslate\">[]</code> to convert it to a list...</p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"inputs = {\n  vpc_security_group_ids     = [ dependency.dep.outputs.id ]\n}\"><pre class=\"notranslate\"><code class=\"notranslate\">inputs = {\n  vpc_security_group_ids     = [ dependency.dep.outputs.id ]\n}\n</code></pre></div>\n<p dir=\"auto\">Simplified example in:<br>\n<a href=\"https://github.com/denis256/terragrunt-tests/tree/master/discussion-738\">https://github.com/denis256/terragrunt-tests/tree/master/discussion-738</a></p>"}}} />

</CenterLayout>

<!-- ##DOCS-SOURCER-START
{
  "sourcePlugin": "github-discussions",
  "hash": "9cc13768d9d10f192c4b3d03da808404"
}
##DOCS-SOURCER-END -->
