---
hide_table_of_contents: true
hide_title: true
custom_edit_url: null
---

import CenterLayout from "/src/components/CenterLayout"
import GitHub from "/src/components/GitHub"

<head>
  <link rel="canonical" href="https://github.com/gruntwork-io/knowledge-base/discussions/321" />
</head>

<CenterLayout>
<span className="searchCategory">Knowledge Base</span>
<h1>Setting up OpenVPN in new Env</h1>
<GitHub discussion={{"id":"D_kwDOF8slf84APHLb","number":321,"author":{"login":"charan-digitaltrust"},"title":"Setting up OpenVPN in new Env","body":"Hi all,\r\nI have created a brand new Env and was able to bring up all the AWS resources using the Terragrunt scripts that we have except for the OpenVPN. We are no longer subscribers of Gruntworks and so we rely on modules hosted locally in our bitbucket. \r\n\r\nWhen I am executing the `terragrunt apply` on the OpenVPN `terrgrunt.hcl` file, I am seeing the error below. \r\n```\r\nError: Expected to find a Root Device name for AMI (ami-062b821853cfec0ee), but got none\r\n\r\n  on .terraform/modules/openvpn/modules/openvpn-server/main.tf line 40, in resource \"aws_launch_configuration\" \"openvpn\":\r\n  40: resource \"aws_launch_configuration\" \"openvpn\" {\r\n```\r\n  \r\n From a little bit of exploring, it looks like it depends on the packer (`openvpn-server.json`) file. However, it requires the github token in order to pull the gruntworks cli tools. I looked up for the similar CLI tools in our bitbucket library containing all the Gruntworks related repos, but could find nothing. \r\n  \r\nCould you show me a way in which I can bring up OpenVPN server in my new Env?","bodyHTML":"<p dir=\"auto\">Hi all,<br>\nI have created a brand new Env and was able to bring up all the AWS resources using the Terragrunt scripts that we have except for the OpenVPN. We are no longer subscribers of Gruntworks and so we rely on modules hosted locally in our bitbucket.</p>\n<p dir=\"auto\">When I am executing the <code class=\"notranslate\">terragrunt apply</code> on the OpenVPN <code class=\"notranslate\">terrgrunt.hcl</code> file, I am seeing the error below.</p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"Error: Expected to find a Root Device name for AMI (ami-062b821853cfec0ee), but got none\n\n  on .terraform/modules/openvpn/modules/openvpn-server/main.tf line 40, in resource &quot;aws_launch_configuration&quot; &quot;openvpn&quot;:\n  40: resource &quot;aws_launch_configuration&quot; &quot;openvpn&quot; {\"><pre class=\"notranslate\"><code>Error: Expected to find a Root Device name for AMI (ami-062b821853cfec0ee), but got none\n\n  on .terraform/modules/openvpn/modules/openvpn-server/main.tf line 40, in resource \"aws_launch_configuration\" \"openvpn\":\n  40: resource \"aws_launch_configuration\" \"openvpn\" {\n</code></pre></div>\n<p dir=\"auto\">From a little bit of exploring, it looks like it depends on the packer (<code class=\"notranslate\">openvpn-server.json</code>) file. However, it requires the github token in order to pull the gruntworks cli tools. I looked up for the similar CLI tools in our bitbucket library containing all the Gruntworks related repos, but could find nothing.</p>\n<p dir=\"auto\">Could you show me a way in which I can bring up OpenVPN server in my new Env?</p>","answer":{"body":"The AMIs are built using the deploy runner, and are managed by the pipeline through changes to the corresponding build script. Specifically, in the `infrastructure-live` repo you should see a folder with bash scripts under the path `shared/REGION/_regional/amis`. Here is [an example](https://github.com/gruntwork-io/terraform-aws-service-catalog/tree/master/examples/for-production/infrastructure-live/shared/us-west-2/_regional/amis).\r\n\r\nNote that for AMI building when expanding to a new region, you have two options:\r\n\r\n- Create a new AMI in the target region by copying and updating the ami build script to target the new region.\r\n- Follow the instructions in [this knowledge base entry](https://github.com/gruntwork-io/knowledge-base/discussions/171) to copy the AMI across all the regions you need.","bodyHTML":"<p dir=\"auto\">The AMIs are built using the deploy runner, and are managed by the pipeline through changes to the corresponding build script. Specifically, in the <code class=\"notranslate\">infrastructure-live</code> repo you should see a folder with bash scripts under the path <code class=\"notranslate\">shared/REGION/_regional/amis</code>. Here is <a href=\"https://github.com/gruntwork-io/terraform-aws-service-catalog/tree/master/examples/for-production/infrastructure-live/shared/us-west-2/_regional/amis\">an example</a>.</p>\n<p dir=\"auto\">Note that for AMI building when expanding to a new region, you have two options:</p>\n<ul dir=\"auto\">\n<li>Create a new AMI in the target region by copying and updating the ami build script to target the new region.</li>\n<li>Follow the instructions in <a href=\"https://github.com/gruntwork-io/knowledge-base/discussions/171\" data-hovercard-type=\"discussion\" data-hovercard-url=\"/gruntwork-io/knowledge-base/discussions/171/hovercard\">this knowledge base entry</a> to copy the AMI across all the regions you need.</li>\n</ul>"}}} />

</CenterLayout>
  

<!-- ##DOCS-SOURCER-START
{
  "sourcePlugin": "github-discussions",
  "hash": "13784cbf2cb6c37158e4ce85e8dbbe77"
}
##DOCS-SOURCER-END -->
