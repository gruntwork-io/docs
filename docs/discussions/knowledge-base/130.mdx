---
hide_table_of_contents: true
hide_title: true
custom_edit_url: null
---

import CenterLayout from "/src/components/CenterLayout"
import GitHub from "/src/components/GitHub"

<head>
  <link rel="canonical" href="https://github.com/gruntwork-io/knowledge-base/discussions/130" />
</head>

<CenterLayout>
<span className="searchCategory">Knowledge Base</span>
<h1>How to pin Terraform provider version constraints to a single patch release</h1>
<GitHub discussion={{"id":"D_kwDOF8slf84AOeFZ","number":130,"author":{"login":"zackproser"},"title":"How to pin Terraform provider version constraints to a single patch release","body":"A customer asked: \r\n> How do I pin my terraform provider to a single patch release, e.g., `2.71.1`? \r\n\r\n","bodyHTML":"<p dir=\"auto\">A customer asked:</p>\n<blockquote>\n<p dir=\"auto\">How do I pin my terraform provider to a single patch release, e.g., <code class=\"notranslate\">2.71.1</code>?</p>\n</blockquote>","answer":{"body":"To pin to a specific \"patch\" version release using [semantic versioning](https://semver.org/), you can use an equal sign in front of the exact version you want installed: \r\n```\r\nprovider \"aws\" {\r\n\r\n  region = var.aws_region\r\n\r\n  # Require exactly version 2.70.1 \r\n  version = \"= 2.70.1\"\r\n}\r\n```\r\n\r\nWith this configuration, Terraform will attempt to fetch and install the exact version you have specified: \r\n\r\n```\r\nterraform init \r\n\r\nInitializing the backend...\r\n\r\nInitializing provider plugins...\r\n- Finding hashicorp/aws versions matching \"2.70.1\"...\r\n- Finding latest version of hashicorp/null...\r\n- Installing hashicorp/aws v2.70.1...\r\n- Installed hashicorp/aws v2.70.1 (signed by HashiCorp)\r\n- Using previously-installed hashicorp/null v3.1.0\r\n\r\nTerraform has made some changes to the provider dependency selections recorded\r\nin the .terraform.lock.hcl file. Review those changes and commit them to your\r\nversion control system if they represent changes you intended to make.\r\n\r\nTerraform has been successfully initialized!\r\n\r\n```\r\nNote that if you have already installed a different version of the provider, you may receive an error about your provider version being locked: \r\n\r\n```\r\n╷\r\n│ Error: Failed to query available provider packages\r\n│\r\n│ Could not retrieve the list of available versions for provider hashicorp/aws: locked\r\n│ provider registry.terraform.io/hashicorp/aws 2.70.0 does not match configured version\r\n│ constraint 2.70.1; must use terraform init -upgrade to allow selection of new versions\r\n╵\r\n```\r\nIf your receive this error, you can re-run your `init` command and pass the `--upgrade` flag to signal to Terraform that it's okay to install a new provider version: \r\n\r\n`terraform init --upgrade`\r\n\r\nWhich will result in a successful provider version change: \r\n\r\n```\r\nInitializing the backend...\r\n\r\nInitializing provider plugins...\r\n- Finding hashicorp/aws versions matching \"2.70.1\"...\r\n- Finding latest version of hashicorp/null...\r\n- Installing hashicorp/aws v2.70.1...\r\n- Installed hashicorp/aws v2.70.1 (signed by HashiCorp)\r\n- Using previously-installed hashicorp/null v3.1.0\r\n\r\nTerraform has made some changes to the provider dependency selections recorded\r\nin the .terraform.lock.hcl file. Review those changes and commit them to your\r\nversion control system if they represent changes you intended to make.\r\n\r\nTerraform has been successfully initialized!\r\n\r\n```","bodyHTML":"<p dir=\"auto\">To pin to a specific \"patch\" version release using <a href=\"https://semver.org/\" rel=\"nofollow\">semantic versioning</a>, you can use an equal sign in front of the exact version you want installed:</p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"provider &quot;aws&quot; {\n\n  region = var.aws_region\n\n  # Require exactly version 2.70.1 \n  version = &quot;= 2.70.1&quot;\n}\"><pre class=\"notranslate\"><code class=\"notranslate\">provider \"aws\" {\n\n  region = var.aws_region\n\n  # Require exactly version 2.70.1 \n  version = \"= 2.70.1\"\n}\n</code></pre></div>\n<p dir=\"auto\">With this configuration, Terraform will attempt to fetch and install the exact version you have specified:</p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"terraform init \n\nInitializing the backend...\n\nInitializing provider plugins...\n- Finding hashicorp/aws versions matching &quot;2.70.1&quot;...\n- Finding latest version of hashicorp/null...\n- Installing hashicorp/aws v2.70.1...\n- Installed hashicorp/aws v2.70.1 (signed by HashiCorp)\n- Using previously-installed hashicorp/null v3.1.0\n\nTerraform has made some changes to the provider dependency selections recorded\nin the .terraform.lock.hcl file. Review those changes and commit them to your\nversion control system if they represent changes you intended to make.\n\nTerraform has been successfully initialized!\n\"><pre class=\"notranslate\"><code class=\"notranslate\">terraform init \n\nInitializing the backend...\n\nInitializing provider plugins...\n- Finding hashicorp/aws versions matching \"2.70.1\"...\n- Finding latest version of hashicorp/null...\n- Installing hashicorp/aws v2.70.1...\n- Installed hashicorp/aws v2.70.1 (signed by HashiCorp)\n- Using previously-installed hashicorp/null v3.1.0\n\nTerraform has made some changes to the provider dependency selections recorded\nin the .terraform.lock.hcl file. Review those changes and commit them to your\nversion control system if they represent changes you intended to make.\n\nTerraform has been successfully initialized!\n\n</code></pre></div>\n<p dir=\"auto\">Note that if you have already installed a different version of the provider, you may receive an error about your provider version being locked:</p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"╷\n│ Error: Failed to query available provider packages\n│\n│ Could not retrieve the list of available versions for provider hashicorp/aws: locked\n│ provider registry.terraform.io/hashicorp/aws 2.70.0 does not match configured version\n│ constraint 2.70.1; must use terraform init -upgrade to allow selection of new versions\n╵\"><pre class=\"notranslate\"><code class=\"notranslate\">╷\n│ Error: Failed to query available provider packages\n│\n│ Could not retrieve the list of available versions for provider hashicorp/aws: locked\n│ provider registry.terraform.io/hashicorp/aws 2.70.0 does not match configured version\n│ constraint 2.70.1; must use terraform init -upgrade to allow selection of new versions\n╵\n</code></pre></div>\n<p dir=\"auto\">If your receive this error, you can re-run your <code class=\"notranslate\">init</code> command and pass the <code class=\"notranslate\">--upgrade</code> flag to signal to Terraform that it's okay to install a new provider version:</p>\n<p dir=\"auto\"><code class=\"notranslate\">terraform init --upgrade</code></p>\n<p dir=\"auto\">Which will result in a successful provider version change:</p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"Initializing the backend...\n\nInitializing provider plugins...\n- Finding hashicorp/aws versions matching &quot;2.70.1&quot;...\n- Finding latest version of hashicorp/null...\n- Installing hashicorp/aws v2.70.1...\n- Installed hashicorp/aws v2.70.1 (signed by HashiCorp)\n- Using previously-installed hashicorp/null v3.1.0\n\nTerraform has made some changes to the provider dependency selections recorded\nin the .terraform.lock.hcl file. Review those changes and commit them to your\nversion control system if they represent changes you intended to make.\n\nTerraform has been successfully initialized!\n\"><pre class=\"notranslate\"><code class=\"notranslate\">Initializing the backend...\n\nInitializing provider plugins...\n- Finding hashicorp/aws versions matching \"2.70.1\"...\n- Finding latest version of hashicorp/null...\n- Installing hashicorp/aws v2.70.1...\n- Installed hashicorp/aws v2.70.1 (signed by HashiCorp)\n- Using previously-installed hashicorp/null v3.1.0\n\nTerraform has made some changes to the provider dependency selections recorded\nin the .terraform.lock.hcl file. Review those changes and commit them to your\nversion control system if they represent changes you intended to make.\n\nTerraform has been successfully initialized!\n\n</code></pre></div>"}}} />

</CenterLayout>

<!-- ##DOCS-SOURCER-START
{
  "sourcePlugin": "github-discussions",
  "hash": "4d722886c006ddb5149c66acc1368fb6"
}
##DOCS-SOURCER-END -->
