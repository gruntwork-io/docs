---
hide_table_of_contents: true
hide_title: true
custom_edit_url: null
---

import CenterLayout from "/src/components/CenterLayout"
import GitHub from "/src/components/GitHub"

<head>
  <link rel="canonical" href="https://github.com/gruntwork-io/knowledge-base/discussions/626" />
</head>

<CenterLayout>
<span className="searchCategory">Knowledge Base</span>
<h1>Automate terragrunt configuration folder/file creation?</h1>
<GitHub discussion={{"id":"D_kwDOF8slf84AR_M3","number":626,"author":{"login":"JBallin"},"title":"Automate terragrunt configuration folder/file creation?","body":"\r\nLet's say I want to create a new terragrunt project with the following file structure:\r\n\r\n```\r\n├── accounts\r\n│   ├── account-a\r\n│   │   ├── modules\r\n│   │   │   ├── module-a\r\n│   │   │   │   └── terragrunt.hcl\r\n│   │   │   ├── module-b\r\n│   │   │   │   └── terragrunt.hcl\r\n│   │   │   └── module-c\r\n│   │   │       └── terragrunt.hcl\r\n│   │   └── terragrunt.hcl\r\n│   ├── account-b\r\n│   │   ├── modules\r\n│   │   │   ├── module-a\r\n│   │   │   │   └── terragrunt.hcl\r\n│   │   │   ├── module-b\r\n│   │   │   │   └── terragrunt.hcl\r\n│   │   │   └── module-c\r\n│   │   │       └── terragrunt.hcl\r\n│   │   └── terragrunt.hcl\r\n```\r\n\r\nHere's an example `terragrunt.hcl`:\r\n\r\n```hcl\r\ninclude \"root\" {\r\n  path = find_in_parent_folders()\r\n}\r\n\r\ninclude \"model\" {\r\n  path = \"${dirname(find_in_parent_folders())}/models/module-a/name.hcl\"\r\n}\r\n```\r\n\r\nIs there a way to automate creating these folders etc with some kind of config file that I would pass to a command like `terragrunt config`? Example config file:\r\n\r\n```hcl\r\nmodule \"accounts\" {\r\n  source  = \"./accounts\"\r\n\r\n  module \"modules\" {\r\n    source  = \"./modules\"\r\n  }\r\n}\r\n```\r\n\r\nAnd then within `./accounts` and `./modules` I would somehow define the account names and module names etc.\r\n\r\n**Why is this useful?**\r\n* DRY\r\n* This would allow me to have a single config file instead of dealing with a bunch of nested folders - allowing me to easily add a new module to every account etc.\r\n* I imagine I could even gitignore everything that would be generated by the config and instead only generate the folders when running terraform commands.\r\n* It would allow other teams to easily adopt the project and customize it to their needs, instead of needing to deal with nested folders.\r\n* It's easier to parse what's happening IMO.\r\n\r\n---\r\n\r\n<ins datetime=\"2023-01-02T21:36:46Z\">\r\n  <p><a href=\"https://support.gruntwork.io/hc/requests/109757\">Tracked in ticket #109757</a></p>\r\n</ins>\r\n","bodyHTML":"<p dir=\"auto\">Let's say I want to create a new terragrunt project with the following file structure:</p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"├── accounts\n│   ├── account-a\n│   │   ├── modules\n│   │   │   ├── module-a\n│   │   │   │   └── terragrunt.hcl\n│   │   │   ├── module-b\n│   │   │   │   └── terragrunt.hcl\n│   │   │   └── module-c\n│   │   │       └── terragrunt.hcl\n│   │   └── terragrunt.hcl\n│   ├── account-b\n│   │   ├── modules\n│   │   │   ├── module-a\n│   │   │   │   └── terragrunt.hcl\n│   │   │   ├── module-b\n│   │   │   │   └── terragrunt.hcl\n│   │   │   └── module-c\n│   │   │       └── terragrunt.hcl\n│   │   └── terragrunt.hcl\"><pre class=\"notranslate\"><code class=\"notranslate\">├── accounts\n│   ├── account-a\n│   │   ├── modules\n│   │   │   ├── module-a\n│   │   │   │   └── terragrunt.hcl\n│   │   │   ├── module-b\n│   │   │   │   └── terragrunt.hcl\n│   │   │   └── module-c\n│   │   │       └── terragrunt.hcl\n│   │   └── terragrunt.hcl\n│   ├── account-b\n│   │   ├── modules\n│   │   │   ├── module-a\n│   │   │   │   └── terragrunt.hcl\n│   │   │   ├── module-b\n│   │   │   │   └── terragrunt.hcl\n│   │   │   └── module-c\n│   │   │       └── terragrunt.hcl\n│   │   └── terragrunt.hcl\n</code></pre></div>\n<p dir=\"auto\">Here's an example <code class=\"notranslate\">terragrunt.hcl</code>:</p>\n<div class=\"highlight highlight-source-hcl notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"include &quot;root&quot; {\n  path = find_in_parent_folders()\n}\n\ninclude &quot;model&quot; {\n  path = &quot;${dirname(find_in_parent_folders())}/models/module-a/name.hcl&quot;\n}\"><pre class=\"notranslate\"><span class=\"pl-en\">include</span> <span class=\"pl-smi\">\"root\"</span> {\n  <span class=\"pl-v\"><span class=\"pl-smi\">path</span> <span class=\"pl-k\">=</span> </span><span class=\"pl-c1\">find_in_parent_folders</span>()\n}\n\n<span class=\"pl-en\">include</span> <span class=\"pl-smi\">\"model\"</span> {\n  <span class=\"pl-v\"><span class=\"pl-smi\">path</span> <span class=\"pl-k\">=</span> </span><span class=\"pl-s\"><span class=\"pl-pds\">\"</span><span class=\"pl-k\">${</span><span class=\"pl-c1\">dirname</span>(<span class=\"pl-c1\">find_in_parent_folders</span>())<span class=\"pl-k\">}</span>/models/module-a/name.hcl<span class=\"pl-pds\">\"</span></span>\n}</pre></div>\n<p dir=\"auto\">Is there a way to automate creating these folders etc with some kind of config file that I would pass to a command like <code class=\"notranslate\">terragrunt config</code>? Example config file:</p>\n<div class=\"highlight highlight-source-hcl notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"module &quot;accounts&quot; {\n  source  = &quot;./accounts&quot;\n\n  module &quot;modules&quot; {\n    source  = &quot;./modules&quot;\n  }\n}\"><pre class=\"notranslate\"><span class=\"pl-en\">module</span> <span class=\"pl-smi\">\"accounts\"</span> {\n  <span class=\"pl-v\"><span class=\"pl-smi\">source</span>  <span class=\"pl-k\">=</span> </span><span class=\"pl-s\"><span class=\"pl-pds\">\"</span>./accounts<span class=\"pl-pds\">\"</span></span>\n\n  <span class=\"pl-en\">module</span> <span class=\"pl-smi\">\"modules\"</span> {\n    <span class=\"pl-v\"><span class=\"pl-smi\">source</span>  <span class=\"pl-k\">=</span> </span><span class=\"pl-s\"><span class=\"pl-pds\">\"</span>./modules<span class=\"pl-pds\">\"</span></span>\n  }\n}</pre></div>\n<p dir=\"auto\">And then within <code class=\"notranslate\">./accounts</code> and <code class=\"notranslate\">./modules</code> I would somehow define the account names and module names etc.</p>\n<p dir=\"auto\"><strong>Why is this useful?</strong></p>\n<ul dir=\"auto\">\n<li>DRY</li>\n<li>This would allow me to have a single config file instead of dealing with a bunch of nested folders - allowing me to easily add a new module to every account etc.</li>\n<li>I imagine I could even gitignore everything that would be generated by the config and instead only generate the folders when running terraform commands.</li>\n<li>It would allow other teams to easily adopt the project and customize it to their needs, instead of needing to deal with nested folders.</li>\n<li>It's easier to parse what's happening IMO.</li>\n</ul>\n<hr>\n<ins datetime=\"2023-01-02T21:36:46Z\">\n  <p dir=\"auto\"><a href=\"https://support.gruntwork.io/hc/requests/109757\" rel=\"nofollow\">Tracked in ticket #109757</a></p>\n</ins>","answer":{"body":"Realizing that root of this question is just about keeping terragrunt dry...which is already being discussed in multiple GitHub issues (e.g. https://github.com/gruntwork-io/terragrunt/issues/759).\r\n\r\nThe only thing potentially novel in my post is the idea of a builder that automatically create configurations, but it may make more sense to continue working toward the existing RFC's for now.","bodyHTML":"<p dir=\"auto\">Realizing that root of this question is just about keeping terragrunt dry...which is already being discussed in multiple GitHub issues (e.g. <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"458141567\" data-permission-text=\"Title is private\" data-url=\"https://github.com/gruntwork-io/terragrunt/issues/759\" data-hovercard-type=\"issue\" data-hovercard-url=\"/gruntwork-io/terragrunt/issues/759/hovercard\" href=\"https://github.com/gruntwork-io/terragrunt/issues/759\">gruntwork-io/terragrunt#759</a>).</p>\n<p dir=\"auto\">The only thing potentially novel in my post is the idea of a builder that automatically create configurations, but it may make more sense to continue working toward the existing RFC's for now.</p>"}}} />

</CenterLayout>

<!-- ##DOCS-SOURCER-START
{
  "sourcePlugin": "github-discussions",
  "hash": "5d0d5ecc5d35ffc642158212a59a9483"
}
##DOCS-SOURCER-END -->
