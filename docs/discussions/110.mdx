---
hide_table_of_contents: true
hide_title: true
custom_edit_url: null
---

import CenterLayout from "/src/components/CenterLayout"
import GitHub from "/src/components/GitHub"

<CenterLayout>
<span class="title">Knowledge Base</span>
<h1>Using Terragrunt for large scale disaster recovery</h1>
<GitHub json={{"id":"D_kwDOF8slf84AOaVS","number":110,"author":{"login":"pete0emerson"},"title":"Using Terragrunt for large scale disaster recovery","body":"Do you have any examples or case studies on using Terragrunt to do a large scale disaster recovery operation?\r\n\r\nFor example: Deploying 100+ resources to a new cloud region in the event of a disaster in another region\r\n\r\nWhat is your recommendation for how to use Terragrunt for such an event?\r\n","bodyHTML":"<p dir=\"auto\">Do you have any examples or case studies on using Terragrunt to do a large scale disaster recovery operation?</p>\n<p dir=\"auto\">For example: Deploying 100+ resources to a new cloud region in the event of a disaster in another region</p>\n<p dir=\"auto\">What is your recommendation for how to use Terragrunt for such an event?</p>","answer":{"body":"We can't provide advice on disaster recovery in general, as it will be VERY use case specific. E.g., What data do you have? How are you replicating it? What sort of consistency requirements do you have? How do you handle DNS fail over? And so on.\r\n\r\nAll we can comment on here is, in relation to Terragrunt, if you have an environment `env1` deployed, how can you structure your code so it's easy to quickly spin up a duplicate environment `env2` (e.g., in case of disaster recovery)? Here's the rough idea:\r\n\r\n1. Create `env1` using Terragrunt (i.e., folders + `terragrunt.hcl` files), with each `source` URL pointing to a specific version of your modules.\r\n2. Ensure that any parameters that must be set differently in each environment (e.g., domain names, CIDR blocks) are extracted into top-level vars, such as e.g., an `env.hcl` file at the root of the environment. \r\n3. When you need to spin up an `env2`, create a copy of the `env1` folder named `env2`.\r\n4. Go into the `env.hcl` file and update it accordingly.\r\n5. Take care of any manual steps that are necessary before spinning up the new environment. These depend on your use case, but it's common to have certain things managed outside of your infrastructure code, by design: e.g., writing secrets to your secrets store (e.g., AWS Secrets Manager or Vault); buying a new domain name; etc.\r\n6. Run `terragrunt run-all apply`.","bodyHTML":"<p dir=\"auto\">We can't provide advice on disaster recovery in general, as it will be VERY use case specific. E.g., What data do you have? How are you replicating it? What sort of consistency requirements do you have? How do you handle DNS fail over? And so on.</p>\n<p dir=\"auto\">All we can comment on here is, in relation to Terragrunt, if you have an environment <code class=\"notranslate\">env1</code> deployed, how can you structure your code so it's easy to quickly spin up a duplicate environment <code class=\"notranslate\">env2</code> (e.g., in case of disaster recovery)? Here's the rough idea:</p>\n<ol dir=\"auto\">\n<li>Create <code class=\"notranslate\">env1</code> using Terragrunt (i.e., folders + <code class=\"notranslate\">terragrunt.hcl</code> files), with each <code class=\"notranslate\">source</code> URL pointing to a specific version of your modules.</li>\n<li>Ensure that any parameters that must be set differently in each environment (e.g., domain names, CIDR blocks) are extracted into top-level vars, such as e.g., an <code class=\"notranslate\">env.hcl</code> file at the root of the environment.</li>\n<li>When you need to spin up an <code class=\"notranslate\">env2</code>, create a copy of the <code class=\"notranslate\">env1</code> folder named <code class=\"notranslate\">env2</code>.</li>\n<li>Go into the <code class=\"notranslate\">env.hcl</code> file and update it accordingly.</li>\n<li>Take care of any manual steps that are necessary before spinning up the new environment. These depend on your use case, but it's common to have certain things managed outside of your infrastructure code, by design: e.g., writing secrets to your secrets store (e.g., AWS Secrets Manager or Vault); buying a new domain name; etc.</li>\n<li>Run <code class=\"notranslate\">terragrunt run-all apply</code>.</li>\n</ol>"},"comments":{"edges":[{"node":{"author":{"login":"gruntwork-discussions"},"body":"You must label this issue with at least one of the following labels before it can be answered:\n\n* [r:terraform-aws-service-catalog](https://github.com/gruntwork-io/terraform-aws-service-catalog)\n* [r:terraform-aws-vpc](https://github.com/gruntwork-io/terraform-aws-vpc)\n* [r:terraform-aws-architecture-catalog](https://github.com/gruntwork-io/terraform-aws-architecture-catalog)\n* [r:terraform-aws-asg](https://github.com/gruntwork-io/terraform-aws-asg)\n* [r:terraform-aws-beanstalk](https://github.com/gruntwork-io/terraform-aws-beanstalk)\n* [r:terraform-aws-cache](https://github.com/gruntwork-io/terraform-aws-cache)\n* [r:terraform-aws-ci](https://github.com/gruntwork-io/terraform-aws-ci)\n* [r:terraform-aws-ci-pipeline-example](https://github.com/gruntwork-io/terraform-aws-ci-pipeline-example)\n* [r:terraform-aws-cis-service-catalog](https://github.com/gruntwork-io/terraform-aws-cis-service-catalog)\n* [r:terraform-aws-data-storage](https://github.com/gruntwork-io/terraform-aws-data-storage)\n* [r:terraform-aws-ecs](https://github.com/gruntwork-io/terraform-aws-ecs)\n* [r:terraform-aws-eks](https://github.com/gruntwork-io/terraform-aws-eks)\n* [r:terraform-aws-elk](https://github.com/gruntwork-io/terraform-aws-elk)\n* [r:terraform-aws-kafka](https://github.com/gruntwork-io/terraform-aws-kafka)\n* [r:terraform-aws-lambda](https://github.com/gruntwork-io/terraform-aws-lambda)\n* [r:terraform-aws-load-balancer](https://github.com/gruntwork-io/terraform-aws-load-balancer)\n* [r:terraform-aws-messaging](https://github.com/gruntwork-io/terraform-aws-messaging)\n* [r:terraform-aws-mongodb](https://github.com/gruntwork-io/terraform-aws-mongodb)\n* [r:terraform-aws-monitoring](https://github.com/gruntwork-io/terraform-aws-monitoring)\n* [r:terraform-aws-openvpn](https://github.com/gruntwork-io/terraform-aws-openvpn)\n* [r:terraform-aws-sam](https://github.com/gruntwork-io/terraform-aws-sam)\n* [r:terraform-aws-security](https://github.com/gruntwork-io/terraform-aws-security)\n* [r:terraform-aws-server](https://github.com/gruntwork-io/terraform-aws-server)\n* [r:terraform-aws-static-assets](https://github.com/gruntwork-io/terraform-aws-static-assets)\n* [r:terraform-aws-zookeeper](https://github.com/gruntwork-io/terraform-aws-zookeeper)\n* [r:terragrunt](https://github.com/gruntwork-io/terragrunt)\n* [r:terratest](https://github.com/gruntwork-io/terratest)\n* [r:repo-copier](https://github.com/gruntwork-io/repo-copier)\n\n\n[Community Guidelines](https://github.com/gruntwork-io/knowledge-base/discussions/1)\n[Getting help](https://gruntwork.io/support/)\n[Gruntwork documentation](https://www.gruntwork.io)\n"}},{"node":{"author":{"login":"brikis98"},"body":"We can't provide advice on disaster recovery in general, as it will be VERY use case specific. E.g., What data do you have? How are you replicating it? What sort of consistency requirements do you have? How do you handle DNS fail over? And so on.\r\n\r\nAll we can comment on here is, in relation to Terragrunt, if you have an environment `env1` deployed, how can you structure your code so it's easy to quickly spin up a duplicate environment `env2` (e.g., in case of disaster recovery)? Here's the rough idea:\r\n\r\n1. Create `env1` using Terragrunt (i.e., folders + `terragrunt.hcl` files), with each `source` URL pointing to a specific version of your modules.\r\n2. Ensure that any parameters that must be set differently in each environment (e.g., domain names, CIDR blocks) are extracted into top-level vars, such as e.g., an `env.hcl` file at the root of the environment. \r\n3. When you need to spin up an `env2`, create a copy of the `env1` folder named `env2`.\r\n4. Go into the `env.hcl` file and update it accordingly.\r\n5. Take care of any manual steps that are necessary before spinning up the new environment. These depend on your use case, but it's common to have certain things managed outside of your infrastructure code, by design: e.g., writing secrets to your secrets store (e.g., AWS Secrets Manager or Vault); buying a new domain name; etc.\r\n6. Run `terragrunt run-all apply`."}}]}}} />

</CenterLayout>
  

<!-- ##DOCS-SOURCER-START
{
  "sourcePlugin": "github-discussions",
  "hash": "507fc4dd67863e008573596f214c94d0"
}
##DOCS-SOURCER-END -->
