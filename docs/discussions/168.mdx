---
hide_table_of_contents: true
hide_title: true
custom_edit_url: null
---

import CenterLayout from "/src/components/CenterLayout"
import GitHub from "/src/components/GitHub"

<CenterLayout>
<span class="title">Knowledge Base</span>
<h1>How do I deploy an ECS Fargate service with an ALB?</h1>
<GitHub json={{"id":"D_kwDOF8slf84AOsHY","number":168,"author":{"login":"yorinasub17"},"title":"How do I deploy an ECS Fargate service with an ALB?","body":"I'm trying to configure the [ecs-service module](https://github.com/gruntwork-io/terraform-aws-ecs/tree/master/modules/ecs-service) in Fargate mode that is linked to an ALB. I have figured out the variable configuration for setting up the service to deploy in Fargate mode, but I am struggling to figure out what variables I need to configure to link it to an ALB. Which variables should I configure?\r\n\r\nNOTE: I already tried copying the `ecs-service` module block from the [docker-fargate-service-with-alb](https://github.com/gruntwork-io/terraform-aws-ecs/tree/master/examples/docker-fargate-service-with-alb), but I am getting the following error:\r\n\r\n```\r\nError: failed creating ECS service (SERVICE_NAME): InvalidParameterException: The target group with \r\ntargetGroupArn arn:aws:elasticloadbalancing:eu-west-1:xxxxxxxxx:targetgroup/SERVICE_NAME/c5717e184d65dcf7\r\ndoes not have an associated load balancer\r\n```","bodyHTML":"<p dir=\"auto\">I'm trying to configure the <a href=\"https://github.com/gruntwork-io/terraform-aws-ecs/tree/master/modules/ecs-service\">ecs-service module</a> in Fargate mode that is linked to an ALB. I have figured out the variable configuration for setting up the service to deploy in Fargate mode, but I am struggling to figure out what variables I need to configure to link it to an ALB. Which variables should I configure?</p>\n<p dir=\"auto\">NOTE: I already tried copying the <code class=\"notranslate\">ecs-service</code> module block from the <a href=\"https://github.com/gruntwork-io/terraform-aws-ecs/tree/master/examples/docker-fargate-service-with-alb\">docker-fargate-service-with-alb</a>, but I am getting the following error:</p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"Error: failed creating ECS service (SERVICE_NAME): InvalidParameterException: The target group with \ntargetGroupArn arn:aws:elasticloadbalancing:eu-west-1:xxxxxxxxx:targetgroup/SERVICE_NAME/c5717e184d65dcf7\ndoes not have an associated load balancer\"><pre class=\"notranslate\"><code>Error: failed creating ECS service (SERVICE_NAME): InvalidParameterException: The target group with \ntargetGroupArn arn:aws:elasticloadbalancing:eu-west-1:xxxxxxxxx:targetgroup/SERVICE_NAME/c5717e184d65dcf7\ndoes not have an associated load balancer\n</code></pre></div>","answer":{"body":"Hi, without `ecs-service` definition is not clear how which variables got passed to module, but should be set [`elb_target_groups`](https://github.com/gruntwork-io/terraform-aws-ecs/blob/master/examples/docker-fargate-service-with-alb/main.tf#L68) on `ecs-service` which should reference [`alb`](https://github.com/gruntwork-io/terraform-aws-ecs/blob/master/examples/docker-fargate-service-with-alb/main.tf#L155) \r\n\r\n\r\n\r\n","bodyHTML":"<p dir=\"auto\">Hi, without <code class=\"notranslate\">ecs-service</code> definition is not clear how which variables got passed to module, but should be set <a href=\"https://github.com/gruntwork-io/terraform-aws-ecs/blob/master/examples/docker-fargate-service-with-alb/main.tf#L68\"><code class=\"notranslate\">elb_target_groups</code></a> on <code class=\"notranslate\">ecs-service</code> which should reference <a href=\"https://github.com/gruntwork-io/terraform-aws-ecs/blob/master/examples/docker-fargate-service-with-alb/main.tf#L155\"><code class=\"notranslate\">alb</code></a></p>"},"comments":{"edges":[{"node":{"author":{"login":"denis256"},"body":"Hi, without `ecs-service` definition is not clear how which variables got passed to module, but should be set [`elb_target_groups`](https://github.com/gruntwork-io/terraform-aws-ecs/blob/master/examples/docker-fargate-service-with-alb/main.tf#L68) on `ecs-service` which should reference [`alb`](https://github.com/gruntwork-io/terraform-aws-ecs/blob/master/examples/docker-fargate-service-with-alb/main.tf#L155) \r\n\r\n\r\n\r\n"}}]}}} />

</CenterLayout>
  

<!-- ##DOCS-SOURCER-START
{
  "sourcePlugin": "github-discussions",
  "hash": "ae08a3ecc4f9a09f231928bbb504b45b"
}
##DOCS-SOURCER-END -->
