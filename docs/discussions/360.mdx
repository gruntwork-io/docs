---
hide_table_of_contents: true
hide_title: true
custom_edit_url: null
---

import CenterLayout from "/src/components/CenterLayout"
import GitHub from "/src/components/GitHub"

<CenterLayout>
<span class="title">Knowledge Base</span>
<h1>How do I use the modules in terraform-aws-service-catalog if there is no example?</h1>
<GitHub json={{"id":"D_kwDOF8slf84APTVn","number":360,"author":{"login":"yorinasub17"},"title":"How do I use the modules in terraform-aws-service-catalog if there is no example?","body":"Some modules in `terraform-aws-service-catalog` like [s3-bucket](https://github.com/gruntwork-io/terraform-aws-service-catalog/tree/master/modules/data-stores/s3-bucket) have no Terragrunt example defined in the `for-production` folder. Does that mean it is not designed for use with Terragrunt?","bodyHTML":"<p dir=\"auto\">Some modules in <code class=\"notranslate\">terraform-aws-service-catalog</code> like <a href=\"https://github.com/gruntwork-io/terraform-aws-service-catalog/tree/master/modules/data-stores/s3-bucket\">s3-bucket</a> have no Terragrunt example defined in the <code class=\"notranslate\">for-production</code> folder. Does that mean it is not designed for use with Terragrunt?</p>","answer":{"body":"There are a handful of modules in the Service Catalog that were developed for different use cases that are difficult to integrate into our Reference Architecture, and thus are omitted from the `for-production` example. This doesn't mean that it is not designed for use with the Reference Architecture - it just means that it's hard for us to come up with a generic use case that is adaptable to a wide variety of customers, and thus we omit it from the example.\r\n\r\nHowever, any and every module in the `terraform-aws-service-catalog` is designed to be deployed with terragrunt. You can take any of the modules in the Service Catalog and create a `terragrunt.hcl` that works well with the Reference Architecture by using the following general template:\r\n\r\n```hcl\r\nterraform {\r\n  source = \"git::git@github.com:gruntwork-io/terraform-aws-security.git//modules/${local.path_to_module}?ref=${local.latest_version}\"\r\n}\r\n\r\ninclude {\r\n  path = find_in_parent_folders()\r\n}\r\n\r\n# ---------------------------------------------------------------------------------------------------------------------\r\n# Locals are named constants that are reusable within the configuration.\r\n# ---------------------------------------------------------------------------------------------------------------------\r\n\r\nlocals {\r\n  # TODO: Set to specific module you are deploying, and its version.\r\n  path_to_module = \"\"\r\n  latest_version = \"\"\r\n\r\n  # Automatically load common variables that are useful in most configurations\r\n  common_vars = read_terragrunt_config(find_in_parent_folders(\"common.hcl\"))\r\n  name_prefix = local.common_vars.locals.name_prefix\r\n  account_vars = read_terragrunt_config(find_in_parent_folders(\"account.hcl\"))\r\n  account_name = local.account_vars.locals.account_name\r\n  account_role = local.account_vars.locals.account_role\r\n  region_vars = read_terragrunt_config(find_in_parent_folders(\"region.hcl\"))\r\n  aws_region = local.region_vars.locals.aws_region\r\n  path_to_account_root = dirname(find_in_parent_folders(\"account.hcl\"))\r\n  path_to_region_root = dirname(find_in_parent_folders(\"region.hcl\"))\r\n}\r\n\r\n# TODO: Add any dependency blocks that you need for deploying this module, like VPC.\r\n# Example:\r\n# dependency \"vpc\" {\r\n#   config_path = \"${local.path_to_region_root}/${local.account_name}/networking/vpc\"\r\n# }\r\n\r\n# ---------------------------------------------------------------------------------------------------------------------\r\n# MODULE PARAMETERS\r\n# These are the variables we have to pass in to use the module specified in the terragrunt configuration above.\r\n# ---------------------------------------------------------------------------------------------------------------------\r\n\r\ninputs = {\r\n  # TODO: Go to the corresponding documentation for the module on\r\n  #       https://docs.gruntwork.io/reference/services/intro/overview\r\n  #       and find the module reference containing the input variables.\r\n  #       For example, here is the page for the s3 bucket variables:\r\n  #       https://docs.gruntwork.io/reference/services/data-storage/s-3-bucket#reference\r\n  #       Using the reference page, go through the variables you want to configure and enter\r\n  #       them in this map. You can reference any of the locals, and dependencies you defined above.\r\n  #\r\n  # Example (for s3):\r\n  # primary_bucket = \"${local.name_prefix}-generic-s3-bucket-for-${local.account_name}\"\r\n  # access_logging_bucket = \"${local.name_prefix}-generic-access-logging\"\r\n}\r\n```\r\n\r\n---\r\n\r\nIf instead you would like to deploy the component in every environment, you will want to follow the `_envcommon` pattern. In this pattern, you would place the common configurations in an `hcl` file in the `_envcommon` folder, and then inherit that config in each environment.\r\n\r\nHere is a template:\r\n\r\n_envcommon HCL_\r\n```hcl\r\nterraform {\r\n  source = \"${local.source_url}?ref=${local.latest_version}\"\r\n}\r\n\r\n# ---------------------------------------------------------------------------------------------------------------------\r\n# Locals are named constants that are reusable within the configuration.\r\n# ---------------------------------------------------------------------------------------------------------------------\r\n\r\nlocals {\r\n  # TODO: Set to specific module you are deploying, and its version.\r\n  path_to_module = \"\"\r\n  latest_version = \"\"\r\n  source_url = \"git::git@github.com:gruntwork-io/terraform-aws-security.git//modules/${local.path_to_module}\"\r\n\r\n  # Automatically load common variables that are useful in most configurations\r\n  common_vars = read_terragrunt_config(find_in_parent_folders(\"common.hcl\"))\r\n  name_prefix = local.common_vars.locals.name_prefix\r\n  account_vars = read_terragrunt_config(find_in_parent_folders(\"account.hcl\"))\r\n  account_name = local.account_vars.locals.account_name\r\n  account_role = local.account_vars.locals.account_role\r\n  region_vars = read_terragrunt_config(find_in_parent_folders(\"region.hcl\"))\r\n  aws_region = local.region_vars.locals.aws_region\r\n  path_to_account_root = dirname(find_in_parent_folders(\"account.hcl\"))\r\n  path_to_region_root = dirname(find_in_parent_folders(\"region.hcl\"))\r\n}\r\n\r\n# TODO: Add any dependency blocks that you need for deploying this module, like VPC.\r\n# Example:\r\n# dependency \"vpc\" {\r\n#   config_path = \"${local.path_to_region_root}/${local.account_name}/networking/vpc\"\r\n# }\r\n\r\n# ---------------------------------------------------------------------------------------------------------------------\r\n# MODULE PARAMETERS\r\n# These are the variables we have to pass in to use the module specified in the terragrunt configuration above.\r\n# ---------------------------------------------------------------------------------------------------------------------\r\n\r\ninputs = {\r\n  # TODO: Go to the corresponding documentation for the module on\r\n  #       https://docs.gruntwork.io/reference/services/intro/overview\r\n  #       and find the module reference containing the input variables.\r\n  #       For example, here is the page for the s3 bucket variables:\r\n  #       https://docs.gruntwork.io/reference/services/data-storage/s-3-bucket#reference\r\n  #       Using the reference page, go through the variables you want to configure and enter\r\n  #       them in this map. You can reference any of the locals, and dependencies you defined above.\r\n  #\r\n  # Example (for s3):\r\n  # primary_bucket = \"${local.name_prefix}-generic-s3-bucket-for-${local.account_name}\"\r\n  # access_logging_bucket = \"${local.name_prefix}-generic-access-logging\"\r\n}\r\n```\r\n\r\n_child terragrunt.hcl config in each environment_\r\n```hcl\r\ninclude \"root\" {\r\n  path = find_in_parent_folders()\r\n}\r\n\r\ninclude \"envcommon\" {\r\n  path = \"${dirname(find_in_parent_folders())}/_envcommon/path/to/hclfile\"\r\n}\r\n```","bodyHTML":"<p dir=\"auto\">There are a handful of modules in the Service Catalog that were developed for different use cases that are difficult to integrate into our Reference Architecture, and thus are omitted from the <code class=\"notranslate\">for-production</code> example. This doesn't mean that it is not designed for use with the Reference Architecture - it just means that it's hard for us to come up with a generic use case that is adaptable to a wide variety of customers, and thus we omit it from the example.</p>\n<p dir=\"auto\">However, any and every module in the <code class=\"notranslate\">terraform-aws-service-catalog</code> is designed to be deployed with terragrunt. You can take any of the modules in the Service Catalog and create a <code class=\"notranslate\">terragrunt.hcl</code> that works well with the Reference Architecture by using the following general template:</p>\n<div class=\"highlight highlight-source-terraform notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"terraform {\n  source = &quot;git::git@github.com:gruntwork-io/terraform-aws-security.git//modules/${local.path_to_module}?ref=${local.latest_version}&quot;\n}\n\ninclude {\n  path = find_in_parent_folders()\n}\n\n# ---------------------------------------------------------------------------------------------------------------------\n# Locals are named constants that are reusable within the configuration.\n# ---------------------------------------------------------------------------------------------------------------------\n\nlocals {\n  # TODO: Set to specific module you are deploying, and its version.\n  path_to_module = &quot;&quot;\n  latest_version = &quot;&quot;\n\n  # Automatically load common variables that are useful in most configurations\n  common_vars = read_terragrunt_config(find_in_parent_folders(&quot;common.hcl&quot;))\n  name_prefix = local.common_vars.locals.name_prefix\n  account_vars = read_terragrunt_config(find_in_parent_folders(&quot;account.hcl&quot;))\n  account_name = local.account_vars.locals.account_name\n  account_role = local.account_vars.locals.account_role\n  region_vars = read_terragrunt_config(find_in_parent_folders(&quot;region.hcl&quot;))\n  aws_region = local.region_vars.locals.aws_region\n  path_to_account_root = dirname(find_in_parent_folders(&quot;account.hcl&quot;))\n  path_to_region_root = dirname(find_in_parent_folders(&quot;region.hcl&quot;))\n}\n\n# TODO: Add any dependency blocks that you need for deploying this module, like VPC.\n# Example:\n# dependency &quot;vpc&quot; {\n#   config_path = &quot;${local.path_to_region_root}/${local.account_name}/networking/vpc&quot;\n# }\n\n# ---------------------------------------------------------------------------------------------------------------------\n# MODULE PARAMETERS\n# These are the variables we have to pass in to use the module specified in the terragrunt configuration above.\n# ---------------------------------------------------------------------------------------------------------------------\n\ninputs = {\n  # TODO: Go to the corresponding documentation for the module on\n  #       https://docs.gruntwork.io/reference/services/intro/overview\n  #       and find the module reference containing the input variables.\n  #       For example, here is the page for the s3 bucket variables:\n  #       https://docs.gruntwork.io/reference/services/data-storage/s-3-bucket#reference\n  #       Using the reference page, go through the variables you want to configure and enter\n  #       them in this map. You can reference any of the locals, and dependencies you defined above.\n  #\n  # Example (for s3):\n  # primary_bucket = &quot;${local.name_prefix}-generic-s3-bucket-for-${local.account_name}&quot;\n  # access_logging_bucket = &quot;${local.name_prefix}-generic-access-logging&quot;\n}\"><pre><span class=\"pl-k\">terraform</span> {\n  source <span class=\"pl-k\">=</span> <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>git::git@github.com:gruntwork-io/terraform-aws-security.git//modules/<span class=\"pl-k\">${</span><span class=\"pl-c1\">local</span><span class=\"pl-k\">.</span><span class=\"pl-smi\">path_to_module</span><span class=\"pl-k\">}</span>?ref=<span class=\"pl-k\">${</span><span class=\"pl-c1\">local</span><span class=\"pl-k\">.</span><span class=\"pl-smi\">latest_version</span><span class=\"pl-k\">}</span><span class=\"pl-pds\">\"</span></span>\n}\n\n<span class=\"pl-en\">include</span> {\n  path <span class=\"pl-k\">=</span> <span class=\"pl-v\">find_in_parent_folders</span>()\n}\n\n<span class=\"pl-c\"><span class=\"pl-c\">#</span> ---------------------------------------------------------------------------------------------------------------------</span>\n<span class=\"pl-c\"><span class=\"pl-c\">#</span> Locals are named constants that are reusable within the configuration.</span>\n<span class=\"pl-c\"><span class=\"pl-c\">#</span> ---------------------------------------------------------------------------------------------------------------------</span>\n\n<span class=\"pl-k\">locals</span> {\n  <span class=\"pl-c\"><span class=\"pl-c\">#</span> TODO: Set to specific module you are deploying, and its version.</span>\n  path_to_module <span class=\"pl-k\">=</span> <span class=\"pl-s\"><span class=\"pl-pds\">\"</span><span class=\"pl-pds\">\"</span></span>\n  latest_version <span class=\"pl-k\">=</span> <span class=\"pl-s\"><span class=\"pl-pds\">\"</span><span class=\"pl-pds\">\"</span></span>\n\n  <span class=\"pl-c\"><span class=\"pl-c\">#</span> Automatically load common variables that are useful in most configurations</span>\n  common_vars <span class=\"pl-k\">=</span> <span class=\"pl-v\">read_terragrunt_config</span>(<span class=\"pl-v\">find_in_parent_folders</span>(<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>common.hcl<span class=\"pl-pds\">\"</span></span>))\n  name_prefix <span class=\"pl-k\">=</span> <span class=\"pl-c1\">local</span><span class=\"pl-k\">.</span><span class=\"pl-smi\">common_vars</span><span class=\"pl-k\">.</span><span class=\"pl-smi\">locals</span><span class=\"pl-k\">.</span><span class=\"pl-smi\">name_prefix</span>\n  account_vars <span class=\"pl-k\">=</span> <span class=\"pl-v\">read_terragrunt_config</span>(<span class=\"pl-v\">find_in_parent_folders</span>(<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>account.hcl<span class=\"pl-pds\">\"</span></span>))\n  account_name <span class=\"pl-k\">=</span> <span class=\"pl-c1\">local</span><span class=\"pl-k\">.</span><span class=\"pl-smi\">account_vars</span><span class=\"pl-k\">.</span><span class=\"pl-smi\">locals</span><span class=\"pl-k\">.</span><span class=\"pl-smi\">account_name</span>\n  account_role <span class=\"pl-k\">=</span> <span class=\"pl-c1\">local</span><span class=\"pl-k\">.</span><span class=\"pl-smi\">account_vars</span><span class=\"pl-k\">.</span><span class=\"pl-smi\">locals</span><span class=\"pl-k\">.</span><span class=\"pl-smi\">account_role</span>\n  region_vars <span class=\"pl-k\">=</span> <span class=\"pl-v\">read_terragrunt_config</span>(<span class=\"pl-v\">find_in_parent_folders</span>(<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>region.hcl<span class=\"pl-pds\">\"</span></span>))\n  aws_region <span class=\"pl-k\">=</span> <span class=\"pl-c1\">local</span><span class=\"pl-k\">.</span><span class=\"pl-smi\">region_vars</span><span class=\"pl-k\">.</span><span class=\"pl-smi\">locals</span><span class=\"pl-k\">.</span><span class=\"pl-smi\">aws_region</span>\n  path_to_account_root <span class=\"pl-k\">=</span> <span class=\"pl-c1\">dirname</span>(<span class=\"pl-v\">find_in_parent_folders</span>(<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>account.hcl<span class=\"pl-pds\">\"</span></span>))\n  path_to_region_root <span class=\"pl-k\">=</span> <span class=\"pl-c1\">dirname</span>(<span class=\"pl-v\">find_in_parent_folders</span>(<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>region.hcl<span class=\"pl-pds\">\"</span></span>))\n}\n\n<span class=\"pl-c\"><span class=\"pl-c\">#</span> TODO: Add any dependency blocks that you need for deploying this module, like VPC.</span>\n<span class=\"pl-c\"><span class=\"pl-c\">#</span> Example:</span>\n<span class=\"pl-c\"><span class=\"pl-c\">#</span> dependency \"vpc\" {</span>\n<span class=\"pl-c\"><span class=\"pl-c\">#</span>   config_path = \"${local.path_to_region_root}/${local.account_name}/networking/vpc\"</span>\n<span class=\"pl-c\"><span class=\"pl-c\">#</span> }</span>\n\n<span class=\"pl-c\"><span class=\"pl-c\">#</span> ---------------------------------------------------------------------------------------------------------------------</span>\n<span class=\"pl-c\"><span class=\"pl-c\">#</span> MODULE PARAMETERS</span>\n<span class=\"pl-c\"><span class=\"pl-c\">#</span> These are the variables we have to pass in to use the module specified in the terragrunt configuration above.</span>\n<span class=\"pl-c\"><span class=\"pl-c\">#</span> ---------------------------------------------------------------------------------------------------------------------</span>\n\n<span class=\"pl-v\"><span class=\"pl-smi\">inputs</span> <span class=\"pl-k\">= </span></span>{\n  <span class=\"pl-c\"><span class=\"pl-c\">#</span> TODO: Go to the corresponding documentation for the module on</span>\n  <span class=\"pl-c\"><span class=\"pl-c\">#</span>       https://docs.gruntwork.io/reference/services/intro/overview</span>\n  <span class=\"pl-c\"><span class=\"pl-c\">#</span>       and find the module reference containing the input variables.</span>\n  <span class=\"pl-c\"><span class=\"pl-c\">#</span>       For example, here is the page for the s3 bucket variables:</span>\n  <span class=\"pl-c\"><span class=\"pl-c\">#</span>       https://docs.gruntwork.io/reference/services/data-storage/s-3-bucket#reference</span>\n  <span class=\"pl-c\"><span class=\"pl-c\">#</span>       Using the reference page, go through the variables you want to configure and enter</span>\n  <span class=\"pl-c\"><span class=\"pl-c\">#</span>       them in this map. You can reference any of the locals, and dependencies you defined above.</span>\n  <span class=\"pl-c\"><span class=\"pl-c\">#</span></span>\n  <span class=\"pl-c\"><span class=\"pl-c\">#</span> Example (for s3):</span>\n  <span class=\"pl-c\"><span class=\"pl-c\">#</span> primary_bucket = \"${local.name_prefix}-generic-s3-bucket-for-${local.account_name}\"</span>\n  <span class=\"pl-c\"><span class=\"pl-c\">#</span> access_logging_bucket = \"${local.name_prefix}-generic-access-logging\"</span>\n}</pre></div>\n<hr>\n<p dir=\"auto\">If instead you would like to deploy the component in every environment, you will want to follow the <code class=\"notranslate\">_envcommon</code> pattern. In this pattern, you would place the common configurations in an <code class=\"notranslate\">hcl</code> file in the <code class=\"notranslate\">_envcommon</code> folder, and then inherit that config in each environment.</p>\n<p dir=\"auto\">Here is a template:</p>\n<p dir=\"auto\"><em>envcommon HCL</em></p>\n<div class=\"highlight highlight-source-terraform notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"terraform {\n  source = &quot;${local.source_url}?ref=${local.latest_version}&quot;\n}\n\n# ---------------------------------------------------------------------------------------------------------------------\n# Locals are named constants that are reusable within the configuration.\n# ---------------------------------------------------------------------------------------------------------------------\n\nlocals {\n  # TODO: Set to specific module you are deploying, and its version.\n  path_to_module = &quot;&quot;\n  latest_version = &quot;&quot;\n  source_url = &quot;git::git@github.com:gruntwork-io/terraform-aws-security.git//modules/${local.path_to_module}&quot;\n\n  # Automatically load common variables that are useful in most configurations\n  common_vars = read_terragrunt_config(find_in_parent_folders(&quot;common.hcl&quot;))\n  name_prefix = local.common_vars.locals.name_prefix\n  account_vars = read_terragrunt_config(find_in_parent_folders(&quot;account.hcl&quot;))\n  account_name = local.account_vars.locals.account_name\n  account_role = local.account_vars.locals.account_role\n  region_vars = read_terragrunt_config(find_in_parent_folders(&quot;region.hcl&quot;))\n  aws_region = local.region_vars.locals.aws_region\n  path_to_account_root = dirname(find_in_parent_folders(&quot;account.hcl&quot;))\n  path_to_region_root = dirname(find_in_parent_folders(&quot;region.hcl&quot;))\n}\n\n# TODO: Add any dependency blocks that you need for deploying this module, like VPC.\n# Example:\n# dependency &quot;vpc&quot; {\n#   config_path = &quot;${local.path_to_region_root}/${local.account_name}/networking/vpc&quot;\n# }\n\n# ---------------------------------------------------------------------------------------------------------------------\n# MODULE PARAMETERS\n# These are the variables we have to pass in to use the module specified in the terragrunt configuration above.\n# ---------------------------------------------------------------------------------------------------------------------\n\ninputs = {\n  # TODO: Go to the corresponding documentation for the module on\n  #       https://docs.gruntwork.io/reference/services/intro/overview\n  #       and find the module reference containing the input variables.\n  #       For example, here is the page for the s3 bucket variables:\n  #       https://docs.gruntwork.io/reference/services/data-storage/s-3-bucket#reference\n  #       Using the reference page, go through the variables you want to configure and enter\n  #       them in this map. You can reference any of the locals, and dependencies you defined above.\n  #\n  # Example (for s3):\n  # primary_bucket = &quot;${local.name_prefix}-generic-s3-bucket-for-${local.account_name}&quot;\n  # access_logging_bucket = &quot;${local.name_prefix}-generic-access-logging&quot;\n}\"><pre><span class=\"pl-k\">terraform</span> {\n  source <span class=\"pl-k\">=</span> <span class=\"pl-s\"><span class=\"pl-pds\">\"</span><span class=\"pl-k\">${</span><span class=\"pl-c1\">local</span><span class=\"pl-k\">.</span><span class=\"pl-smi\">source_url</span><span class=\"pl-k\">}</span>?ref=<span class=\"pl-k\">${</span><span class=\"pl-c1\">local</span><span class=\"pl-k\">.</span><span class=\"pl-smi\">latest_version</span><span class=\"pl-k\">}</span><span class=\"pl-pds\">\"</span></span>\n}\n\n<span class=\"pl-c\"><span class=\"pl-c\">#</span> ---------------------------------------------------------------------------------------------------------------------</span>\n<span class=\"pl-c\"><span class=\"pl-c\">#</span> Locals are named constants that are reusable within the configuration.</span>\n<span class=\"pl-c\"><span class=\"pl-c\">#</span> ---------------------------------------------------------------------------------------------------------------------</span>\n\n<span class=\"pl-k\">locals</span> {\n  <span class=\"pl-c\"><span class=\"pl-c\">#</span> TODO: Set to specific module you are deploying, and its version.</span>\n  path_to_module <span class=\"pl-k\">=</span> <span class=\"pl-s\"><span class=\"pl-pds\">\"</span><span class=\"pl-pds\">\"</span></span>\n  latest_version <span class=\"pl-k\">=</span> <span class=\"pl-s\"><span class=\"pl-pds\">\"</span><span class=\"pl-pds\">\"</span></span>\n  source_url <span class=\"pl-k\">=</span> <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>git::git@github.com:gruntwork-io/terraform-aws-security.git//modules/<span class=\"pl-k\">${</span><span class=\"pl-c1\">local</span><span class=\"pl-k\">.</span><span class=\"pl-smi\">path_to_module</span><span class=\"pl-k\">}</span><span class=\"pl-pds\">\"</span></span>\n\n  <span class=\"pl-c\"><span class=\"pl-c\">#</span> Automatically load common variables that are useful in most configurations</span>\n  common_vars <span class=\"pl-k\">=</span> <span class=\"pl-v\">read_terragrunt_config</span>(<span class=\"pl-v\">find_in_parent_folders</span>(<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>common.hcl<span class=\"pl-pds\">\"</span></span>))\n  name_prefix <span class=\"pl-k\">=</span> <span class=\"pl-c1\">local</span><span class=\"pl-k\">.</span><span class=\"pl-smi\">common_vars</span><span class=\"pl-k\">.</span><span class=\"pl-smi\">locals</span><span class=\"pl-k\">.</span><span class=\"pl-smi\">name_prefix</span>\n  account_vars <span class=\"pl-k\">=</span> <span class=\"pl-v\">read_terragrunt_config</span>(<span class=\"pl-v\">find_in_parent_folders</span>(<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>account.hcl<span class=\"pl-pds\">\"</span></span>))\n  account_name <span class=\"pl-k\">=</span> <span class=\"pl-c1\">local</span><span class=\"pl-k\">.</span><span class=\"pl-smi\">account_vars</span><span class=\"pl-k\">.</span><span class=\"pl-smi\">locals</span><span class=\"pl-k\">.</span><span class=\"pl-smi\">account_name</span>\n  account_role <span class=\"pl-k\">=</span> <span class=\"pl-c1\">local</span><span class=\"pl-k\">.</span><span class=\"pl-smi\">account_vars</span><span class=\"pl-k\">.</span><span class=\"pl-smi\">locals</span><span class=\"pl-k\">.</span><span class=\"pl-smi\">account_role</span>\n  region_vars <span class=\"pl-k\">=</span> <span class=\"pl-v\">read_terragrunt_config</span>(<span class=\"pl-v\">find_in_parent_folders</span>(<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>region.hcl<span class=\"pl-pds\">\"</span></span>))\n  aws_region <span class=\"pl-k\">=</span> <span class=\"pl-c1\">local</span><span class=\"pl-k\">.</span><span class=\"pl-smi\">region_vars</span><span class=\"pl-k\">.</span><span class=\"pl-smi\">locals</span><span class=\"pl-k\">.</span><span class=\"pl-smi\">aws_region</span>\n  path_to_account_root <span class=\"pl-k\">=</span> <span class=\"pl-c1\">dirname</span>(<span class=\"pl-v\">find_in_parent_folders</span>(<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>account.hcl<span class=\"pl-pds\">\"</span></span>))\n  path_to_region_root <span class=\"pl-k\">=</span> <span class=\"pl-c1\">dirname</span>(<span class=\"pl-v\">find_in_parent_folders</span>(<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>region.hcl<span class=\"pl-pds\">\"</span></span>))\n}\n\n<span class=\"pl-c\"><span class=\"pl-c\">#</span> TODO: Add any dependency blocks that you need for deploying this module, like VPC.</span>\n<span class=\"pl-c\"><span class=\"pl-c\">#</span> Example:</span>\n<span class=\"pl-c\"><span class=\"pl-c\">#</span> dependency \"vpc\" {</span>\n<span class=\"pl-c\"><span class=\"pl-c\">#</span>   config_path = \"${local.path_to_region_root}/${local.account_name}/networking/vpc\"</span>\n<span class=\"pl-c\"><span class=\"pl-c\">#</span> }</span>\n\n<span class=\"pl-c\"><span class=\"pl-c\">#</span> ---------------------------------------------------------------------------------------------------------------------</span>\n<span class=\"pl-c\"><span class=\"pl-c\">#</span> MODULE PARAMETERS</span>\n<span class=\"pl-c\"><span class=\"pl-c\">#</span> These are the variables we have to pass in to use the module specified in the terragrunt configuration above.</span>\n<span class=\"pl-c\"><span class=\"pl-c\">#</span> ---------------------------------------------------------------------------------------------------------------------</span>\n\n<span class=\"pl-v\"><span class=\"pl-smi\">inputs</span> <span class=\"pl-k\">= </span></span>{\n  <span class=\"pl-c\"><span class=\"pl-c\">#</span> TODO: Go to the corresponding documentation for the module on</span>\n  <span class=\"pl-c\"><span class=\"pl-c\">#</span>       https://docs.gruntwork.io/reference/services/intro/overview</span>\n  <span class=\"pl-c\"><span class=\"pl-c\">#</span>       and find the module reference containing the input variables.</span>\n  <span class=\"pl-c\"><span class=\"pl-c\">#</span>       For example, here is the page for the s3 bucket variables:</span>\n  <span class=\"pl-c\"><span class=\"pl-c\">#</span>       https://docs.gruntwork.io/reference/services/data-storage/s-3-bucket#reference</span>\n  <span class=\"pl-c\"><span class=\"pl-c\">#</span>       Using the reference page, go through the variables you want to configure and enter</span>\n  <span class=\"pl-c\"><span class=\"pl-c\">#</span>       them in this map. You can reference any of the locals, and dependencies you defined above.</span>\n  <span class=\"pl-c\"><span class=\"pl-c\">#</span></span>\n  <span class=\"pl-c\"><span class=\"pl-c\">#</span> Example (for s3):</span>\n  <span class=\"pl-c\"><span class=\"pl-c\">#</span> primary_bucket = \"${local.name_prefix}-generic-s3-bucket-for-${local.account_name}\"</span>\n  <span class=\"pl-c\"><span class=\"pl-c\">#</span> access_logging_bucket = \"${local.name_prefix}-generic-access-logging\"</span>\n}</pre></div>\n<p dir=\"auto\"><em>child terragrunt.hcl config in each environment</em></p>\n<div class=\"highlight highlight-source-terraform notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"include &quot;root&quot; {\n  path = find_in_parent_folders()\n}\n\ninclude &quot;envcommon&quot; {\n  path = &quot;${dirname(find_in_parent_folders())}/_envcommon/path/to/hclfile&quot;\n}\"><pre><span class=\"pl-en\">include</span> <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>root<span class=\"pl-pds\">\"</span></span> {\n  path <span class=\"pl-k\">=</span> <span class=\"pl-v\">find_in_parent_folders</span>()\n}\n\n<span class=\"pl-en\">include</span> <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>envcommon<span class=\"pl-pds\">\"</span></span> {\n  path <span class=\"pl-k\">=</span> <span class=\"pl-s\"><span class=\"pl-pds\">\"</span><span class=\"pl-k\">${</span><span class=\"pl-c1\">dirname</span>(<span class=\"pl-v\">find_in_parent_folders</span>())<span class=\"pl-k\">}</span>/_envcommon/path/to/hclfile<span class=\"pl-pds\">\"</span></span>\n}</pre></div>"},"comments":{"edges":[{"node":{"author":{"login":"yorinasub17"},"body":"There are a handful of modules in the Service Catalog that were developed for different use cases that are difficult to integrate into our Reference Architecture, and thus are omitted from the `for-production` example. This doesn't mean that it is not designed for use with the Reference Architecture - it just means that it's hard for us to come up with a generic use case that is adaptable to a wide variety of customers, and thus we omit it from the example.\r\n\r\nHowever, any and every module in the `terraform-aws-service-catalog` is designed to be deployed with terragrunt. You can take any of the modules in the Service Catalog and create a `terragrunt.hcl` that works well with the Reference Architecture by using the following general template:\r\n\r\n```hcl\r\nterraform {\r\n  source = \"git::git@github.com:gruntwork-io/terraform-aws-security.git//modules/${local.path_to_module}?ref=${local.latest_version}\"\r\n}\r\n\r\ninclude {\r\n  path = find_in_parent_folders()\r\n}\r\n\r\n# ---------------------------------------------------------------------------------------------------------------------\r\n# Locals are named constants that are reusable within the configuration.\r\n# ---------------------------------------------------------------------------------------------------------------------\r\n\r\nlocals {\r\n  # TODO: Set to specific module you are deploying, and its version.\r\n  path_to_module = \"\"\r\n  latest_version = \"\"\r\n\r\n  # Automatically load common variables that are useful in most configurations\r\n  common_vars = read_terragrunt_config(find_in_parent_folders(\"common.hcl\"))\r\n  name_prefix = local.common_vars.locals.name_prefix\r\n  account_vars = read_terragrunt_config(find_in_parent_folders(\"account.hcl\"))\r\n  account_name = local.account_vars.locals.account_name\r\n  account_role = local.account_vars.locals.account_role\r\n  region_vars = read_terragrunt_config(find_in_parent_folders(\"region.hcl\"))\r\n  aws_region = local.region_vars.locals.aws_region\r\n  path_to_account_root = dirname(find_in_parent_folders(\"account.hcl\"))\r\n  path_to_region_root = dirname(find_in_parent_folders(\"region.hcl\"))\r\n}\r\n\r\n# TODO: Add any dependency blocks that you need for deploying this module, like VPC.\r\n# Example:\r\n# dependency \"vpc\" {\r\n#   config_path = \"${local.path_to_region_root}/${local.account_name}/networking/vpc\"\r\n# }\r\n\r\n# ---------------------------------------------------------------------------------------------------------------------\r\n# MODULE PARAMETERS\r\n# These are the variables we have to pass in to use the module specified in the terragrunt configuration above.\r\n# ---------------------------------------------------------------------------------------------------------------------\r\n\r\ninputs = {\r\n  # TODO: Go to the corresponding documentation for the module on\r\n  #       https://docs.gruntwork.io/reference/services/intro/overview\r\n  #       and find the module reference containing the input variables.\r\n  #       For example, here is the page for the s3 bucket variables:\r\n  #       https://docs.gruntwork.io/reference/services/data-storage/s-3-bucket#reference\r\n  #       Using the reference page, go through the variables you want to configure and enter\r\n  #       them in this map. You can reference any of the locals, and dependencies you defined above.\r\n  #\r\n  # Example (for s3):\r\n  # primary_bucket = \"${local.name_prefix}-generic-s3-bucket-for-${local.account_name}\"\r\n  # access_logging_bucket = \"${local.name_prefix}-generic-access-logging\"\r\n}\r\n```\r\n\r\n---\r\n\r\nIf instead you would like to deploy the component in every environment, you will want to follow the `_envcommon` pattern. In this pattern, you would place the common configurations in an `hcl` file in the `_envcommon` folder, and then inherit that config in each environment.\r\n\r\nHere is a template:\r\n\r\n_envcommon HCL_\r\n```hcl\r\nterraform {\r\n  source = \"${local.source_url}?ref=${local.latest_version}\"\r\n}\r\n\r\n# ---------------------------------------------------------------------------------------------------------------------\r\n# Locals are named constants that are reusable within the configuration.\r\n# ---------------------------------------------------------------------------------------------------------------------\r\n\r\nlocals {\r\n  # TODO: Set to specific module you are deploying, and its version.\r\n  path_to_module = \"\"\r\n  latest_version = \"\"\r\n  source_url = \"git::git@github.com:gruntwork-io/terraform-aws-security.git//modules/${local.path_to_module}\"\r\n\r\n  # Automatically load common variables that are useful in most configurations\r\n  common_vars = read_terragrunt_config(find_in_parent_folders(\"common.hcl\"))\r\n  name_prefix = local.common_vars.locals.name_prefix\r\n  account_vars = read_terragrunt_config(find_in_parent_folders(\"account.hcl\"))\r\n  account_name = local.account_vars.locals.account_name\r\n  account_role = local.account_vars.locals.account_role\r\n  region_vars = read_terragrunt_config(find_in_parent_folders(\"region.hcl\"))\r\n  aws_region = local.region_vars.locals.aws_region\r\n  path_to_account_root = dirname(find_in_parent_folders(\"account.hcl\"))\r\n  path_to_region_root = dirname(find_in_parent_folders(\"region.hcl\"))\r\n}\r\n\r\n# TODO: Add any dependency blocks that you need for deploying this module, like VPC.\r\n# Example:\r\n# dependency \"vpc\" {\r\n#   config_path = \"${local.path_to_region_root}/${local.account_name}/networking/vpc\"\r\n# }\r\n\r\n# ---------------------------------------------------------------------------------------------------------------------\r\n# MODULE PARAMETERS\r\n# These are the variables we have to pass in to use the module specified in the terragrunt configuration above.\r\n# ---------------------------------------------------------------------------------------------------------------------\r\n\r\ninputs = {\r\n  # TODO: Go to the corresponding documentation for the module on\r\n  #       https://docs.gruntwork.io/reference/services/intro/overview\r\n  #       and find the module reference containing the input variables.\r\n  #       For example, here is the page for the s3 bucket variables:\r\n  #       https://docs.gruntwork.io/reference/services/data-storage/s-3-bucket#reference\r\n  #       Using the reference page, go through the variables you want to configure and enter\r\n  #       them in this map. You can reference any of the locals, and dependencies you defined above.\r\n  #\r\n  # Example (for s3):\r\n  # primary_bucket = \"${local.name_prefix}-generic-s3-bucket-for-${local.account_name}\"\r\n  # access_logging_bucket = \"${local.name_prefix}-generic-access-logging\"\r\n}\r\n```\r\n\r\n_child terragrunt.hcl config in each environment_\r\n```hcl\r\ninclude \"root\" {\r\n  path = find_in_parent_folders()\r\n}\r\n\r\ninclude \"envcommon\" {\r\n  path = \"${dirname(find_in_parent_folders())}/_envcommon/path/to/hclfile\"\r\n}\r\n```"}}]}}} />

</CenterLayout>
  

<!-- ##DOCS-SOURCER-START
{
  "sourcePlugin": "github-discussions",
  "hash": "cb73c492f808bc11bd1856ab910b5d51"
}
##DOCS-SOURCER-END -->
