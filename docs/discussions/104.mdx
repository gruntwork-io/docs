---
hide_table_of_contents: true
hide_title: true
custom_edit_url: null
---

import CenterLayout from "/src/components/CenterLayout"
import GitHub from "/src/components/GitHub"

<CenterLayout>
<span class="title">Knowledge Base</span>
<h1>How do you restrict database access in Kubernetes?</h1>
<GitHub json={{"id":"D_kwDOF8slf84AOTOX","number":104,"author":{"login":"yorinasub17"},"title":"How do you restrict database access in Kubernetes?","body":"I want to know what mechanisms there are to restrict access to a Database from a Kubernetes Pod.","bodyHTML":"<p dir=\"auto\">I want to know what mechanisms there are to restrict access to a Database from a Kubernetes Pod.</p>","answer":{"body":"There are several ways to do this:\r\n\r\n- If the database credentials are stored in AWS Secrets Manager, you can restrict which secrets the Pod has access to at the IAM role layer. That is, you setup an IAM policy to only allow the pod to access the secrets it needs and attach it to the IAM role corresponding to the service account.\r\n\r\n- If the database credentials are stored in Kubernetes Secrets, then you can manage the RBAC permissions on the service account attached to the Pod to restrict which secrets it has access to mount in.\r\n\r\n- We also support the following ways to restrict network access to the data store:\r\n    - If you are using Fargate, you can control which subnets the pods will source it’s IP from on the Fargate Profile. You can take advantage of this to dedicate a special subnet block to Pods in specific namespaces and set up the Database security group to only allow access from that subnet CIDR.\r\n\r\n    - If you are using self managed ASGs or managed node groups, you can do something similar to Fargate by setting up ASG node pools for each use case, and restrict the subnets that are used for pods deployed on those nodes.\r\n    \r\n- There are also a few other mechanisms to restrict network access (note that Gruntwork does not yet have modules for configuring these mechanisms):\r\n    - You can assign [custom security groups to your pods](https://docs.aws.amazon.com/eks/latest/userguide/security-groups-for-pods.html) and restrict the network policy for a group of Pods that way.\r\n    - You can setup [Calico](https://docs.aws.amazon.com/eks/latest/userguide/calico.html) and [Network Policies](https://kubernetes.io/docs/concepts/services-networking/network-policies/) to setup network firewalls within Kubernetes.\r\n    - You can setup a service mesh solution like [istio](https://istio.io/), and restrict network traffic that way.","bodyHTML":"<p dir=\"auto\">There are several ways to do this:</p>\n<ul dir=\"auto\">\n<li>\n<p dir=\"auto\">If the database credentials are stored in AWS Secrets Manager, you can restrict which secrets the Pod has access to at the IAM role layer. That is, you setup an IAM policy to only allow the pod to access the secrets it needs and attach it to the IAM role corresponding to the service account.</p>\n</li>\n<li>\n<p dir=\"auto\">If the database credentials are stored in Kubernetes Secrets, then you can manage the RBAC permissions on the service account attached to the Pod to restrict which secrets it has access to mount in.</p>\n</li>\n<li>\n<p dir=\"auto\">We also support the following ways to restrict network access to the data store:</p>\n<ul dir=\"auto\">\n<li>\n<p dir=\"auto\">If you are using Fargate, you can control which subnets the pods will source it’s IP from on the Fargate Profile. You can take advantage of this to dedicate a special subnet block to Pods in specific namespaces and set up the Database security group to only allow access from that subnet CIDR.</p>\n</li>\n<li>\n<p dir=\"auto\">If you are using self managed ASGs or managed node groups, you can do something similar to Fargate by setting up ASG node pools for each use case, and restrict the subnets that are used for pods deployed on those nodes.</p>\n</li>\n</ul>\n</li>\n<li>\n<p dir=\"auto\">There are also a few other mechanisms to restrict network access (note that Gruntwork does not yet have modules for configuring these mechanisms):</p>\n<ul dir=\"auto\">\n<li>You can assign <a href=\"https://docs.aws.amazon.com/eks/latest/userguide/security-groups-for-pods.html\" rel=\"nofollow\">custom security groups to your pods</a> and restrict the network policy for a group of Pods that way.</li>\n<li>You can setup <a href=\"https://docs.aws.amazon.com/eks/latest/userguide/calico.html\" rel=\"nofollow\">Calico</a> and <a href=\"https://kubernetes.io/docs/concepts/services-networking/network-policies/\" rel=\"nofollow\">Network Policies</a> to setup network firewalls within Kubernetes.</li>\n<li>You can setup a service mesh solution like <a href=\"https://istio.io/\" rel=\"nofollow\">istio</a>, and restrict network traffic that way.</li>\n</ul>\n</li>\n</ul>"},"comments":{"edges":[{"node":{"author":{"login":"gruntwork-discussions"},"body":"You must label this issue with at least one of the following labels before it can be answered:\n\n* [r:terraform-aws-service-catalog](https://github.com/gruntwork-io/terraform-aws-service-catalog)\n* [r:terraform-aws-vpc](https://github.com/gruntwork-io/terraform-aws-vpc)\n* [r:terraform-aws-architecture-catalog](https://github.com/gruntwork-io/terraform-aws-architecture-catalog)\n* [r:terraform-aws-asg](https://github.com/gruntwork-io/terraform-aws-asg)\n* [r:terraform-aws-beanstalk](https://github.com/gruntwork-io/terraform-aws-beanstalk)\n* [r:terraform-aws-cache](https://github.com/gruntwork-io/terraform-aws-cache)\n* [r:terraform-aws-ci](https://github.com/gruntwork-io/terraform-aws-ci)\n* [r:terraform-aws-ci-pipeline-example](https://github.com/gruntwork-io/terraform-aws-ci-pipeline-example)\n* [r:terraform-aws-cis-service-catalog](https://github.com/gruntwork-io/terraform-aws-cis-service-catalog)\n* [r:terraform-aws-data-storage](https://github.com/gruntwork-io/terraform-aws-data-storage)\n* [r:terraform-aws-ecs](https://github.com/gruntwork-io/terraform-aws-ecs)\n* [r:terraform-aws-eks](https://github.com/gruntwork-io/terraform-aws-eks)\n* [r:terraform-aws-elk](https://github.com/gruntwork-io/terraform-aws-elk)\n* [r:terraform-aws-kafka](https://github.com/gruntwork-io/terraform-aws-kafka)\n* [r:terraform-aws-lambda](https://github.com/gruntwork-io/terraform-aws-lambda)\n* [r:terraform-aws-load-balancer](https://github.com/gruntwork-io/terraform-aws-load-balancer)\n* [r:terraform-aws-messaging](https://github.com/gruntwork-io/terraform-aws-messaging)\n* [r:terraform-aws-mongodb](https://github.com/gruntwork-io/terraform-aws-mongodb)\n* [r:terraform-aws-monitoring](https://github.com/gruntwork-io/terraform-aws-monitoring)\n* [r:terraform-aws-openvpn](https://github.com/gruntwork-io/terraform-aws-openvpn)\n* [r:terraform-aws-sam](https://github.com/gruntwork-io/terraform-aws-sam)\n* [r:terraform-aws-security](https://github.com/gruntwork-io/terraform-aws-security)\n* [r:terraform-aws-server](https://github.com/gruntwork-io/terraform-aws-server)\n* [r:terraform-aws-static-assets](https://github.com/gruntwork-io/terraform-aws-static-assets)\n* [r:terraform-aws-zookeeper](https://github.com/gruntwork-io/terraform-aws-zookeeper)\n* [r:terragrunt](https://github.com/gruntwork-io/terragrunt)\n* [r:terratest](https://github.com/gruntwork-io/terratest)\n* [r:repo-copier](https://github.com/gruntwork-io/repo-copier)\n\n\n[Community Guidelines](https://github.com/gruntwork-io/knowledge-base/discussions/1)\n[Getting help](https://gruntwork.io/support/)\n[Gruntwork documentation](https://www.gruntwork.io)\n"}},{"node":{"author":{"login":"yorinasub17"},"body":"There are several ways to do this:\r\n\r\n- If the database credentials are stored in AWS Secrets Manager, you can restrict which secrets the Pod has access to at the IAM role layer. That is, you setup an IAM policy to only allow the pod to access the secrets it needs and attach it to the IAM role corresponding to the service account.\r\n\r\n- If the database credentials are stored in Kubernetes Secrets, then you can manage the RBAC permissions on the service account attached to the Pod to restrict which secrets it has access to mount in.\r\n\r\n- We also support the following ways to restrict network access to the data store:\r\n    - If you are using Fargate, you can control which subnets the pods will source it’s IP from on the Fargate Profile. You can take advantage of this to dedicate a special subnet block to Pods in specific namespaces and set up the Database security group to only allow access from that subnet CIDR.\r\n\r\n    - If you are using self managed ASGs or managed node groups, you can do something similar to Fargate by setting up ASG node pools for each use case, and restrict the subnets that are used for pods deployed on those nodes.\r\n    \r\n- There are also a few other mechanisms to restrict network access (note that Gruntwork does not yet have modules for configuring these mechanisms):\r\n    - You can assign [custom security groups to your pods](https://docs.aws.amazon.com/eks/latest/userguide/security-groups-for-pods.html) and restrict the network policy for a group of Pods that way.\r\n    - You can setup [Calico](https://docs.aws.amazon.com/eks/latest/userguide/calico.html) and [Network Policies](https://kubernetes.io/docs/concepts/services-networking/network-policies/) to setup network firewalls within Kubernetes.\r\n    - You can setup a service mesh solution like [istio](https://istio.io/), and restrict network traffic that way."}}]}}} />

</CenterLayout>
  

<!-- ##DOCS-SOURCER-START
{
  "sourcePlugin": "github-discussions",
  "hash": "ff8c471a5ded3f271890f83d6a48d53d"
}
##DOCS-SOURCER-END -->
