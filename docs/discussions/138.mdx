---
hide_table_of_contents: true
hide_title: true
custom_edit_url: null
---

import CenterLayout from "/src/components/CenterLayout"
import GitHub from "/src/components/GitHub"

<CenterLayout>
<span class="title">Knowledge Base</span>
<h1>There is a backward incompatibility in terraform-aws-service-catalog for eks-cluster v0.63.4</h1>
<GitHub json={{"id":"D_kwDOF8slf84AOgEN","number":138,"author":{"login":"yorinasub17"},"title":"There is a backward incompatibility in terraform-aws-service-catalog for eks-cluster v0.63.4","body":"I am upgrading my `eks-cluster` module call from v0.58.5 to v0.63.4 with self-managed workers and the update is causing terraform to recreate the ASGs associated with my cluster. `v0.63.4` should have been marked as backward incompatible.\r\n\r\nWhat can I do to avoid the worker node recreation?","bodyHTML":"<p dir=\"auto\">I am upgrading my <code class=\"notranslate\">eks-cluster</code> module call from v0.58.5 to v0.63.4 with self-managed workers and the update is causing terraform to recreate the ASGs associated with my cluster. <code class=\"notranslate\">v0.63.4</code> should have been marked as backward incompatible.</p>\n<p dir=\"auto\">What can I do to avoid the worker node recreation?</p>","answer":{"body":"I have identified the root cause for this diff. It is caused by this PR, https://github.com/gruntwork-io/terraform-aws-service-catalog/pull/994, which introduced a new `null_resource` that is skewing the dependency chain.\r\n\r\nI have confirmed that running the following should resolve this recreation:\r\n\r\n```\r\nterragrunt apply -target null_resource.depend_on_auth_merger # on v0.63.4. Make sure the plan looks minimal!\r\n```\r\n\r\nOnce the `null_resource` is created, everything should be knowable at plan time and thus avoid all the recreations. This applies to both self managed and managed worker nodes.","bodyHTML":"<p dir=\"auto\">I have identified the root cause for this diff. It is caused by this PR, <a href=\"https://github.com/gruntwork-io/terraform-aws-service-catalog/pull/994\">https://github.com/gruntwork-io/terraform-aws-service-catalog/pull/994</a>, which introduced a new <code class=\"notranslate\">null_resource</code> that is skewing the dependency chain.</p>\n<p dir=\"auto\">I have confirmed that running the following should resolve this recreation:</p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"terragrunt apply -target null_resource.depend_on_auth_merger # on v0.63.4. Make sure the plan looks minimal!\"><pre class=\"notranslate\"><code>terragrunt apply -target null_resource.depend_on_auth_merger # on v0.63.4. Make sure the plan looks minimal!\n</code></pre></div>\n<p dir=\"auto\">Once the <code class=\"notranslate\">null_resource</code> is created, everything should be knowable at plan time and thus avoid all the recreations. This applies to both self managed and managed worker nodes.</p>"},"comments":{"edges":[{"node":{"author":{"login":"gruntwork-discussions"},"body":"You must label this issue with at least one of the following labels before it can be answered:\n\n* [r:terraform-aws-service-catalog](https://github.com/gruntwork-io/terraform-aws-service-catalog)\n* [r:terraform-aws-vpc](https://github.com/gruntwork-io/terraform-aws-vpc)\n* [r:terraform-aws-architecture-catalog](https://github.com/gruntwork-io/terraform-aws-architecture-catalog)\n* [r:terraform-aws-asg](https://github.com/gruntwork-io/terraform-aws-asg)\n* [r:terraform-aws-beanstalk](https://github.com/gruntwork-io/terraform-aws-beanstalk)\n* [r:terraform-aws-cache](https://github.com/gruntwork-io/terraform-aws-cache)\n* [r:terraform-aws-ci](https://github.com/gruntwork-io/terraform-aws-ci)\n* [r:terraform-aws-ci-pipeline-example](https://github.com/gruntwork-io/terraform-aws-ci-pipeline-example)\n* [r:terraform-aws-cis-service-catalog](https://github.com/gruntwork-io/terraform-aws-cis-service-catalog)\n* [r:terraform-aws-data-storage](https://github.com/gruntwork-io/terraform-aws-data-storage)\n* [r:terraform-aws-ecs](https://github.com/gruntwork-io/terraform-aws-ecs)\n* [r:terraform-aws-eks](https://github.com/gruntwork-io/terraform-aws-eks)\n* [r:terraform-aws-elk](https://github.com/gruntwork-io/terraform-aws-elk)\n* [r:terraform-aws-kafka](https://github.com/gruntwork-io/terraform-aws-kafka)\n* [r:terraform-aws-lambda](https://github.com/gruntwork-io/terraform-aws-lambda)\n* [r:terraform-aws-load-balancer](https://github.com/gruntwork-io/terraform-aws-load-balancer)\n* [r:terraform-aws-messaging](https://github.com/gruntwork-io/terraform-aws-messaging)\n* [r:terraform-aws-mongodb](https://github.com/gruntwork-io/terraform-aws-mongodb)\n* [r:terraform-aws-monitoring](https://github.com/gruntwork-io/terraform-aws-monitoring)\n* [r:terraform-aws-openvpn](https://github.com/gruntwork-io/terraform-aws-openvpn)\n* [r:terraform-aws-sam](https://github.com/gruntwork-io/terraform-aws-sam)\n* [r:terraform-aws-security](https://github.com/gruntwork-io/terraform-aws-security)\n* [r:terraform-aws-server](https://github.com/gruntwork-io/terraform-aws-server)\n* [r:terraform-aws-static-assets](https://github.com/gruntwork-io/terraform-aws-static-assets)\n* [r:terraform-aws-zookeeper](https://github.com/gruntwork-io/terraform-aws-zookeeper)\n* [r:terragrunt](https://github.com/gruntwork-io/terragrunt)\n* [r:terratest](https://github.com/gruntwork-io/terratest)\n* [r:repo-copier](https://github.com/gruntwork-io/repo-copier)\n\n\n[Community Guidelines](https://github.com/gruntwork-io/knowledge-base/discussions/1)\n[Getting help](https://gruntwork.io/support/)\n[Gruntwork documentation](https://www.gruntwork.io)\n"}},{"node":{"author":{"login":"yorinasub17"},"body":"I have identified the root cause for this diff. It is caused by this PR, https://github.com/gruntwork-io/terraform-aws-service-catalog/pull/994, which introduced a new `null_resource` that is skewing the dependency chain.\r\n\r\nI have confirmed that running the following should resolve this recreation:\r\n\r\n```\r\nterragrunt apply -target null_resource.depend_on_auth_merger # on v0.63.4. Make sure the plan looks minimal!\r\n```\r\n\r\nOnce the `null_resource` is created, everything should be knowable at plan time and thus avoid all the recreations. This applies to both self managed and managed worker nodes."}}]}}} />

</CenterLayout>
  

<!-- ##DOCS-SOURCER-START
{
  "sourcePlugin": "github-discussions",
  "hash": "12dedeb924a719282fbf35981ea499ca"
}
##DOCS-SOURCER-END -->
