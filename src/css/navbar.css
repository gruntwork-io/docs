/**
 * Navbar Styles
 * 
 * ==========================================================================
 * CUSTOM BREAKPOINTS (defined in custom.css @theme inline)
 * ==========================================================================
 * 
 *   --breakpoint-md:  997px   → Mobile to intermediate transition (matches Docusaurus default)
 *   --breakpoint-xl:  1280px  → Full desktop navbar
 * 
 * Note: CSS media queries don't support var(), so we use literal values below.
 * If you change these breakpoints, search for the pixel values to update all usages.
 * 
 * ==========================================================================
 * BREAKPOINT BEHAVIOR
 * ==========================================================================
 * 
 *   < md  (< 997px)           : Mobile - hamburger menu only
 *   md-xl (997px - 1279px)    : Intermediate - nav + "More" dropdown + theme toggle + search
 *   ≥ xl  (≥ 1280px)          : Desktop - full navbar, all items visible
 * 
 */

/* ==========================================================================
   Base Styles (all viewports)
   ========================================================================== */

.navbar__item {
  font-size: 0.8rem;
  letter-spacing: -0.01em;
}

/* ==========================================================================
   Secondary Nav Dropdown Component
   ========================================================================== */

.secondary-nav-dropdown {
  position: relative;
  z-index: 200; /* Ensure dropdown appears above search bar */
}

.secondary-nav-dropdown__menu {
  position: absolute;
  top: 100%;
  right: 0;
  min-width: 200px;
  padding: 0.5rem;
  margin-top: 0.25rem;
  background: var(--ifm-navbar-background-color);
  border: 1px solid var(--ifm-toc-border-color);
  border-radius: 0.5rem;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
  z-index: 100;
}

[data-theme='dark'] .secondary-nav-dropdown__menu {
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
}

.secondary-nav-dropdown__item {
  display: block;
  padding: 0.5rem 0.75rem;
  font-size: 0.8rem;
  color: var(--ifm-navbar-link-color);
  text-decoration: none;
  border-radius: 0.25rem;
  transition: background-color 0.15s ease;
}

.secondary-nav-dropdown__item:hover {
  background: var(--ifm-menu-color-background-hover);
  text-decoration: none;
  color: var(--ifm-navbar-link-hover-color);
}

.secondary-nav-dropdown__divider {
  height: 1px;
  margin: 0.5rem 0;
  background: var(--ifm-toc-border-color);
}

/* Style Sign In ButtonLink in dropdown */
.secondary-nav-dropdown__signin {
  display: block !important;
  width: 100%;
  margin-top: 0.25rem;
}

.secondary-nav-dropdown__signin button {
  width: 100%;
  justify-content: center;
}

/* ==========================================================================
   BREAKPOINT: Mobile (< md, below 997px)
   Hamburger menu only
   ========================================================================== */

@media (max-width: 996px) {
  /* Show hamburger toggle */
  .navbar__toggle {
    display: inherit !important;
  }
  
  /* Hide navbar items (they go in mobile sidebar) */
  .navbar__item {
    display: none !important;
  }
  
  /* Hide dropdown (items are in sidebar) */
  .secondary-nav-dropdown {
    display: none !important;
  }
  
  /* Remove container padding */
  .navbar > .container,
  .navbar > .container-fluid {
    padding: 0 !important;
  }
  
  /* Reduce search input width */
  .navbar__search-input {
    width: 9rem !important;
  }
  
  /* Color mode toggle is already hidden by Docusaurus at this breakpoint */
}

/* ==========================================================================
   BREAKPOINT: Intermediate (md to xl, 997px - 1279px)
   Primary nav visible, secondary items in "More" dropdown
   ========================================================================== */

@media (min-width: 997px) and (max-width: 1279px) {
  /* Hide hamburger toggle */
  .navbar__toggle {
    display: none !important;
  }
  
  /* Show primary nav items (left side) */
  .navbar__items:not(.navbar__items--right) .navbar__item {
    display: flex !important;
  }
  
  /* Hide secondary nav items (right side) - they're in the dropdown */
  .navbar__items--right .navbar__item {
    display: none !important;
  }
  
  /* Show the "More" dropdown */
  .navbar__items--right .navbar__item.secondary-nav-dropdown {
    display: flex !important;
  }
  
  /* Hide Sign In button (it's in the dropdown) */
  .navbar-signin-wrapper {
    display: none !important;
  }
  
  /* Show color mode toggle (Docusaurus shows it at 997px+) */
  .navbar-color-mode-wrapper,
  [class*="colorModeToggle"] {
    display: flex !important;
  }
  
  /* Restore container padding */
  .navbar > .container,
  .navbar > .container-fluid {
    padding: var(--ifm-navbar-padding-horizontal) !important;
  }
  
  /* Right navbar items layout */
  .navbar__items--right {
    flex-shrink: 0;
    gap: 0.5rem;
    overflow: visible !important;
  }
  
  /* Prevent clipping */
  .navbar > .container,
  .navbar > .container-fluid,
  .navbar__inner {
    overflow: visible !important;
  }
  
  /* Ensure dropdown is visible */
  .secondary-nav-dropdown {
    display: flex !important;
    flex-shrink: 0;
  }

  /* Show search bar */
  [class*="navbarSearchContainer"] {
    display: flex !important;
    flex-shrink: 0;
  }
  
  /* Search bar width */
  [class*="navbarSearchContainer"] input {
    width: 9rem !important;
    min-width: 9rem !important;
  }
}

/* ==========================================================================
   BREAKPOINT: Desktop (≥ xl, 1280px and above)
   Full navbar with all items visible
   ========================================================================== */

@media (min-width: 1280px) {
  /* Hide the "More" dropdown (all items visible directly) */
  .secondary-nav-dropdown {
    display: none !important;
  }
  
  /* Search bar minimum width */
  [class*="navbarSearchContainer"] input {
    min-width: 6rem;
  }
  
  /* Visual balance for right-side items */
  .navbar__items--right {
    margin-left: 10px;
  }
}
